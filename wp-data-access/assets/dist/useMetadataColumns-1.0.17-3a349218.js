import{l as u,dZ as ge,d_ as fe,cg as be,r as j,j as e,c8 as Ce,S as X,cC as ve,e as K,C as Z,bu as de,cj as se,a6 as ye}from"./main-1.0.17.js";import{u as ne,B as o,af as Se,aq as ke,k as Te,h as Ae,r as R,p as Y,d as _e,q as we,o as Fe,e as te,c as ae}from"./main-1.0.17-54ffa424.js";import{D as q}from"./usePrepareStore-1.0.17-a8be8b2f.js";import{u as Ee}from"./useStoreTable-1.0.17-fdcf1717.js";import{u as Ne,S as Le}from"./useFormStore-1.0.17-baf3b989.js";import{B as y,A as J}from"./useScreenSize-1.0.17-44173319.js";import{f as We,g as Oe}from"./index.esm-1.0.17-11edad0c.js";import{a as Pe,b as Be,c as Re}from"./ActionsDml-1.0.17-9041b8e8.js";import{u as Ie,a as V,T as Ue,M as Ge,P as Me,D as He,c as Ye,e as ie,b as qe,d as ze,S as Ke}from"./SortableDragHandle-1.0.17-a2162a27.js";import{n as Ve,o as Qe}from"./index.esm-1.0.17-78a91bbf.js";import{S as H,F as I,a as F,b as le}from"./Select-1.0.17-745624d0.js";import{M as w}from"./MenuItem-1.0.17-ed8ab45a.js";import{I as Xe}from"./iconBase-1.0.17-8d991e6c.js";import{M as Ze}from"./Menu-1.0.17-09126381.js";import{c as Q}from"./index-1.0.17-e83aeb27.js";import{u as ce}from"./useTableUpdater-1.0.17-299f713b.js";import{S as Je,a as $e,b as De}from"./Stepper-1.0.17-9e6367ba.js";import{F as ue}from"./FormControlLabel-1.0.17-cc31d0c1.js";import{C as es}from"./Checkbox-1.0.17-3dddd4e7.js";import{T as E}from"./TargetEnum-1.0.17-1e1ba2c5.js";import{C as ss,S as ns}from"./TabPanel-1.0.17-3c2dbf14.js";import{L as oe}from"./Link-1.0.17-88d48a3e.js";import{A as pe,a as xe}from"./AccordionSummary-1.0.17-276b7b2a.js";import{A as he}from"./AccordionDetails-1.0.17-7b8437b0.js";const Es=({appId:i,target:s})=>{u.debug(i,s);const r=Ee(i),l=ne(c=>ge(c,i)),a=Ne(i),p=ne(c=>fe(c,i));s===q.TABLE?r==null||r.columns:a==null||a.columns;const d=s===q.TABLE?l:p,C={label:"",type:be.TEXT,expression:""};return j.useState(-1),j.useState(C),j.useState(!1),j.useEffect(()=>{},[i,d,s]),e.jsxs(o,{children:[e.jsx(o,{sx:{padding:"15px 15px 10px 5px",marginBottom:"5px",textAlign:"right"},children:e.jsx(y,{variant:"contained",startIcon:e.jsx(Se,{}),disabled:!0,onClick:()=>{},children:"Computed Field"})}),!1]})},Ns=({checked:i,children:s,alignRight:r,disabled:l})=>{var p,d;const a={width:"13px",height:"13px",top:"unset",backgroundColor:(p=J)==null?void 0:p.palette.background.paper};return r===!1?a.right="unset":a.left="unset",e.jsxs(o,{sx:{position:"relative",width:"24px",height:"24px","& svg":{position:"absolute",width:"24px",height:"24px",top:0,bottom:0,left:0,right:0},"& svg.off":a},children:[s,!i&&l!==!0&&e.jsx(ke,{className:"off",color:(d=J)==null?void 0:d.palette.error.main})]})},re=({column:i,columnIndex:s,lookupColumns:r,wizardLookup:l,addActions:a,enableAddAction:p,target:d,appId:C,onUpdate:c,onActions:v})=>{u.debug(i,s,r,l,a,p,d,C);const N=d===q.TABLE?Ce(X.getState(),C):ve(X.getState(),C),[S,g]=j.useState(s===null?"":l.dynamicConditions[s].lookupColumnName);u.debug("stateLookupColumnName",S);const[f,n]=j.useState(s===null?"":l.dynamicConditions[s].tableColumnName);u.debug("stateTableColumnName",f);const[L,W]=j.useState(null),T=!!L,O=h=>{W(h.currentTarget),h.stopPropagation()},A=()=>{W(null)},U=h=>{h.lookupColumnName!==""&&h.tableColumnName!==""&&c(h)};return e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:a?"1fr auto 1fr auto":"1fr auto 1fr",alignItems:"center",gridGap:"5px"},children:[e.jsxs(H,{MenuProps:{id:"pp-select-menu"},value:S,onChange:h=>{g(h.target.value),U({lookupColumnName:h.target.value,tableColumnName:f})},children:[e.jsx(w,{value:""}),...r.map(h=>e.jsx(w,{value:h,children:h}))]}),e.jsx("span",{children:"="}),e.jsxs(H,{MenuProps:{id:"pp-select-menu"},value:f,onChange:h=>{n(h.target.value),U({lookupColumnName:S,tableColumnName:h.target.value})},children:[e.jsx(w,{value:""}),...N.map(h=>h.columnName===i.columnName||h.computedField!==void 0?null:e.jsx(w,{value:h.columnName,children:h.columnName}))]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(Xe,{color:"primary",onClick:O,children:e.jsx(Te,{})}),e.jsxs(Ze,{anchorEl:L,open:T,onClose:A,sx:{zIndex:9999999999},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[p&&e.jsxs(w,{onClick:()=>{v("add"),A()},children:[e.jsx(Ve,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"Add column"})]}),e.jsxs(w,{onClick:()=>{v("delete"),A()},children:[e.jsx(Qe,{}),e.jsx("span",{style:{marginLeft:"10px"},children:"Delete column"})]})]})]})]})},ts=({column:i,appId:s,columnIndex:r,databases:l,defaultDatabase:a,wpDatabase:p,target:d,setLookup:C,enableWizard:c})=>{u.debug(i,s,r,l,a,p,d);const v=Ie(V(Me),V(Ge),V(Ue)),N=ce(s),S=["Select database","Select lookup table","Select lookup column","Select lookup column values","Lookup conditions"],[g,f]=j.useState(0),[n,L]=j.useState(i.lookup!==void 0?{dbs:a,tbl:"",key:"",value:"",delimiter:"",defaultWhere:"",dynamicConditions:[],loadOnStartup:!1,rerender:!1,...i.lookup}:{dbs:a,tbl:"",key:"",value:"",delimiter:"",defaultWhere:"",dynamicConditions:[],loadOnStartup:!1,rerender:!1});u.debug("wizardLookup",n);const[W,T]=j.useState(n.dynamicConditions.length===0),[O,A]=j.useState(!1);u.debug("wizardError",O);const[U,h]=j.useState([]);u.debug("tables",U);const[_,z]=j.useState([]);u.debug("lookupColumns",_);const k=G=>{L({...n,...G})};return e.jsxs(e.Fragment,{children:[g!==S.length&&e.jsx(o,{sx:{textAlign:"right"},children:e.jsx(y,{variant:"outlined",startIcon:e.jsx(Ae,{}),onClick:()=>{c(!1)},children:"Cancel"})}),e.jsx(Je,{activeStep:g,orientation:"vertical",sx:{marginBottom:0},children:S.map((G,B)=>{var $;return u.debug(G,B),e.jsxs($e,{children:[e.jsx(De,{children:G}),e.jsx(Le,{children:e.jsxs(o,{sx:{marginTop:"20px",display:"grid",gridGap:"10px","& > :nth-of-type(2)":{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"5px",justifyContent:"space-between"}},children:[B===0&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{MenuProps:{id:"pp-select-menu"},value:n==null?void 0:n.dbs,onChange:t=>{k({dbs:t.target.value})},children:[...l.map(t=>e.jsx(w,{value:t,children:p===t?t+" (WordPress database)":t}))]}),e.jsxs(o,{children:[e.jsx(o,{}),e.jsx(y,{variant:"contained",endIcon:e.jsx(R,{}),onClick:()=>{Pe(s,(n==null?void 0:n.dbs)??"",t=>{const x=t==null?void 0:t.data;u.debug("response data",x),h(x),x.includes(n==null?void 0:n.tbl)||k({tbl:x[0]})},t=>{u.error("error",t),K(t??Z.contactSupport,{variant:"error"})}),f(g+1)},children:"Next"})]})]}),B===1&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{MenuProps:{id:"pp-select-menu"},value:n==null?void 0:n.tbl,onChange:t=>{k({tbl:t.target.value})},children:[...U.map(t=>e.jsx(w,{value:t,children:t}))]}),e.jsxs(o,{children:[e.jsx(y,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:()=>{f(g-1)},children:"Previous"}),e.jsx(y,{variant:"contained",endIcon:e.jsx(R,{}),onClick:()=>{Be(s,(n==null?void 0:n.dbs)??"",(n==null?void 0:n.tbl)??"",t=>{const x=t==null?void 0:t.data;u.debug("response data",x);const b=x.map(m=>m.column_name);if(n.value!==""){const m=n.value.split(",");b.map(P=>{m.includes(P)||m.push(P)}),z(m)}else z(b);b.includes(n.key)||k({key:x[0].column_name})},t=>{u.error("error",t),K(t??Z.contactSupport,{variant:"error"})}),f(g+1)},children:"Next"})]})]}),B===2&&e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsxs(H,{MenuProps:{id:"pp-select-menu"},value:n==null?void 0:n.key,onChange:t=>{k({key:t.target.value})},children:[..._.map(t=>e.jsx(w,{value:t,children:t}))]}),e.jsx(F,{children:"Column selected from lookup table."})]}),e.jsxs(o,{children:[e.jsx(y,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:()=>{f(g-1)},children:"Previous"}),e.jsx(y,{variant:"contained",endIcon:e.jsx(R,{}),onClick:()=>{f(g+1)},children:"Next"})]})]}),B===3&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{children:[e.jsxs(I,{fullWidth:!0,children:[e.jsx(He,{autoScroll:!0,sensors:v,collisionDetection:Ye,onDragEnd:t=>{const{active:x,over:b}=t;if((x==null?void 0:x.id)!==(b==null?void 0:b.id)){u.debug(x,b);const m=_.indexOf(x.id.toString()),P=_.indexOf(b.id.toString()),D=ie(_,m,P);u.debug(D),z(D);let M=[];n.value!==""&&(M=n.value.split(",")),u.debug(M);const me=M.indexOf(x.id.toString()),je=M.indexOf(b.id.toString()),ee=ie(M,me,je);u.debug(ee),k({value:ee.join()})}},children:e.jsx(qe,{items:_,children:e.jsxs(o,{sx:{width:"100%",margin:0,padding:0,"& > div:first-of-type > div":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& > :last-of-type > div":{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderBottom:"1px solid rgba(0, 0, 0, 0.23)"}},children:[..._.map(t=>e.jsx(ze,{id:t,style:{borderRadius:"10px"},children:e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",padding:"12px 20px",borderTop:"1px solid rgba(0, 0, 0, 0.23)",borderLeft:"1px solid rgba(0, 0, 0, 0.23)",borderRight:"1px solid rgba(0, 0, 0, 0.23)"},children:[e.jsx(ue,{control:e.jsx(es,{id:t,checked:n.value.split(",").includes(t),onChange:(x,b)=>{let m=[];if(n.value!==""&&(m=n.value.split(",")),b)m.push(t);else{const P=m.indexOf(t);P!==-1&&m.splice(P,1)}k({value:m.join()})}}),label:t}),e.jsx(Ke,{id:t,enabled:!0})]})},t))]})})}),e.jsx(F,{children:"Columns shown in lookup."}),O&&e.jsxs(F,{sx:{color:($=J)==null?void 0:$.palette.error.main,display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"5px","& svg":{fontSize:"20px"}},children:[e.jsx(_e,{}),e.jsx("span",{children:"Select at least one column."})]})]}),e.jsx(E,{value:n==null?void 0:n.delimiter,onChange:t=>{k({delimiter:t.target.value})},fullWidth:!0,type:"text",placeholder:"Column delimiter",sx:{marginTop:"10px"}})]}),e.jsxs(o,{children:[e.jsx(y,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:()=>{f(g-1)},children:"Previous"}),e.jsx(y,{variant:"contained",endIcon:e.jsx(R,{}),onClick:()=>{n.value===""?K("Select at least one column",{variant:"error"}):f(g+1)},children:"Next"})]})]}),B===4&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{display:"grid",gridGap:"20px"},children:[e.jsxs(I,{fullWidth:!0,children:[e.jsx(le,{children:"Default where"}),e.jsx(E,{value:n==null?void 0:n.defaultWhere,multiline:!0,fullWidth:!0,minRows:2,maxRows:4,variant:"outlined",onClick:t=>{t.stopPropagation()},onChange:t=>{k({defaultWhere:t.target.value})}}),e.jsx(F,{children:"Enter a valid SQL where clause or leave empty."})]}),e.jsxs(o,{children:[e.jsx(le,{children:"Dynamic conditions"}),e.jsxs(o,{sx:{display:"grid",gridGap:"5px"},children:[...n.dynamicConditions.map((t,x)=>e.jsx(re,{appId:s,column:i,columnIndex:x,lookupColumns:_,wizardLookup:n,addActions:!0,target:d,enableAddAction:n.dynamicConditions.length===x+1&&!W,onUpdate:b=>{const m=Q(n);m.dynamicConditions[r]={...b},k(m)},onActions:b=>{if(b==="add")T(!0);else if(b==="delete"){const m=Q(n);m.dynamicConditions.splice(x,1),k(m),T(m.dynamicConditions.length===0)}}})),W&&e.jsx(re,{appId:s,column:i,columnIndex:null,lookupColumns:_,wizardLookup:n,addActions:n.dynamicConditions.length>0,target:d,enableAddAction:!1,onUpdate:t=>{const x=Q(n);x.dynamicConditions.push(t),k(x),T(!1)},onActions:t=>{t==="delete"&&T(!1)}})]}),e.jsx(I,{children:e.jsx(F,{children:"Rebuilds lookup when conditions change."})})]})]}),e.jsxs(o,{children:[e.jsx(y,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:()=>{f(g-1)},children:"Previous"}),e.jsx(y,{variant:"contained",startIcon:e.jsx(we,{}),onClick:()=>{n.value===""?A(!0):(C(r,n),A(!1),N(!0),f(g+1))},children:"Finish"})]})]})]})})]},G)})}),g===S.length&&e.jsxs(o,{sx:{marginTop:"20px"},children:["Lookup wizard successfully completed. Please save changes to enable.",e.jsx(y,{onClick:()=>{c(!1),f(g+1)},children:"Close wizard"})]})]})},is=({column:i,appId:s,columnIndex:r,databases:l,defaultDatabase:a,wpDatabase:p,target:d,setLookup:C})=>{var T,O;u.debug(i,s,r,l,a,p,d);const[c,v]=j.useState(!1),N=()=>{C(r,void 0),v(!1)},[S,g]=j.useState(!1);u.debug("wizardOn",S);const[f,n]=j.useState(!1),[L,W]=j.useState(!1);return e.jsxs(e.Fragment,{children:[i.lookup!==void 0&&!S?e.jsxs(o,{sx:{display:"grid",gridGap:"10px"},children:[e.jsx(E,{fullWidth:!0,label:"Database",value:i.lookup.dbs,disabled:!0}),e.jsx(E,{fullWidth:!0,label:"Table",value:i.lookup.tbl,disabled:!0}),e.jsx(E,{fullWidth:!0,label:"Lookup column",value:i.lookup.key,disabled:!0}),e.jsx(E,{fullWidth:!0,label:"Values shown in lookup",value:i.lookup.value.split(",").join(i.lookup.delimiter),disabled:!0}),e.jsx(E,{fullWidth:!0,label:"Default where",value:i.lookup.defaultWhere,disabled:!0}),e.jsx(E,{fullWidth:!0,multiline:!0,label:"Dynamic conditions",value:(O=(T=i.lookup)==null?void 0:T.dynamicConditions)==null?void 0:O.map(A=>A.lookupColumnName+" = "+A.tableColumnName).join(`
`),disabled:!0}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",alignItems:"center",gap:"10px"},children:[e.jsx(y,{variant:"contained",fullWidth:!0,startIcon:e.jsx(Fe,{}),onClick:()=>{v(!0)},children:"Delete"}),e.jsx(y,{variant:"contained",fullWidth:!0,endIcon:e.jsx(R,{}),onClick:()=>{g(!0)},children:"Update"})]})]}):e.jsx(e.Fragment,{children:S?e.jsx(ts,{column:i,appId:s,columnIndex:r,databases:l,defaultDatabase:a,wpDatabase:p,target:d,setLookup:C,enableWizard:g}):e.jsx(y,{variant:"contained",fullWidth:!0,endIcon:e.jsx(R,{}),onClick:()=>{g(!0)},children:"Start lookup wizard"})}),e.jsxs(F,{component:"div",sx:{marginTop:"30px"},children:[e.jsx(o,{children:e.jsxs(oe,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>n(!f),children:[e.jsx(te,{}),"What is a lookup?"]})}),f&&e.jsxs(o,{sx:{marginTop:"20px",marginBottom:"30px",display:"grid",gap:"20px"},children:[e.jsx(o,{children:"A lookup is a list of possible allowed values for a specific column. For a fixed number of values, this can be achieved using the enum data type."}),e.jsx(o,{children:"To create a lookup, start the lookup wizard and follow the instructions. A lookup must return a single unique column value."}),e.jsx(o,{children:"Lookups support single selections only. For multiple value selections, use the set data type."})]})]}),e.jsxs(F,{component:"div",children:[e.jsx(o,{children:e.jsxs(oe,{sx:{textDecoration:"none",cursor:"pointer",display:"inline-flex","& svg":{fontSize:"1rem",marginRight:"2px"}},onClick:()=>W(!L),children:[e.jsx(te,{}),"Example"]})}),L&&e.jsxs(o,{sx:{marginTop:"20px",display:"grid"},children:[e.jsxs(o,{children:["Consider table ",e.jsx("strong",{children:"products"})," containing a product type column. Available product types are stored in a table ",e.jsx("strong",{children:"product_types"}),".",e.jsxs("pre",{children:["create table product_types",e.jsx("br",{}),"(product_type varchar(10) NOT NULL",e.jsx("br",{}),",product_info varchar(255) NOT NULL",e.jsx("br",{}),",...",e.jsx("br",{}),",PRIMARY KEY (product_type)",e.jsx("br",{}),")",e.jsx("br",{}),e.jsx("br",{}),"create table products",e.jsx("br",{}),"(product_id int NOT NULL",e.jsx("br",{}),",product_type varchar(10) NOT NULL",e.jsx("br",{}),",...",e.jsx("br",{}),",PRIMARY KEY (product_id)",e.jsx("br",{}),",FOREIGN KEY (product_type)",e.jsx("br",{})," REFERENCES product_types(product_type)",e.jsx("br",{}),")"]})]}),e.jsxs(o,{children:["Start the lookup wizard",e.jsxs("ol",{style:{padding:"0 40px"},children:[e.jsx("li",{children:"Select your database"}),e.jsxs("li",{children:["Select lookup table ",e.jsx("strong",{children:"`product_types`"})]}),e.jsxs("li",{children:["Select lookup column ",e.jsx("strong",{children:"`product_type`"})]}),e.jsxs("li",{children:["Select ",e.jsx("strong",{children:"`product_info`"})," (or other(s))"]}),e.jsx("li",{children:"Add lookup conditions (if applicable)"})]})]}),e.jsxs(o,{children:["Notes",e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Step 4 allows you to add multiple lookup columns to the list. A column delimiter can be added between the selected columns. Columns added in step 4 are included in the search on the lookup table."}),e.jsxs("li",{children:["Additional lookup conditions are not necessary if you want to show all available lookup values. Use the ",e.jsx("strong",{children:"Default where"})," clause if you want to show a subset of the lookup values."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Dynamic conditions"})," can be used to make the list output depend on other form values. Use dynamic conditions to create cascading drop-down lists."]})]})]})]})]}),c&&e.jsx(ss,{title:"Please confirm",message:"Are you sure you want to delete this lookup? This action cannot be undone once you click APPLY!",open:c,setOpen:v,onConfirm:()=>N()})]})},ls=i=>{const[s,r]=j.useState({databases:[],defaultDatabase:"",wpDatabase:""});return u.debug("databases",s),j.useEffect(()=>{de(i)&&s.databases.length===0&&Re(i,l=>{const a=l==null?void 0:l.data;u.debug("response data",a);const p=[];let d="",C="";a.map(c=>{var v;u.debug(c),(c==null?void 0:c.dbs)!==void 0&&(p.push(c.dbs),((v=c==null?void 0:c.dbs_type)==null?void 0:v.toLocaleLowerCase())==="wp"&&(C=c.dbs,d=c.dbs))}),p.sort((c,v)=>c.localeCompare(v,void 0,{sensitivity:"base"})),r({databases:p,defaultDatabase:d,wpDatabase:C})},l=>{u.error("error",l)})},[i,s]),s},Ls=({appId:i,columnIndex:s,tableColumn:r,columnMetaData:l,setLookup:a})=>{var c;const p=ls(i),d=ce(i),C=()=>typeof r.inlineEditing=="boolean";return!de(i)||l===null||r.computedField!==void 0||s===void 0||se(l==null?void 0:l.data_type)!=="string"&&se(l==null?void 0:l.data_type)!=="number"||(l==null?void 0:l.data_type)==="enum"||(l==null?void 0:l.data_type)==="set"?null:e.jsxs(pe,{disableGutters:!0,children:[e.jsxs(xe,{expandIcon:e.jsx(ae,{}),sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(We,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Lookup"})]}),e.jsxs(he,{sx:{marginTop:"10px"},children:[e.jsx(is,{appId:i,column:r,columnIndex:s,databases:p.databases,defaultDatabase:p.defaultDatabase,wpDatabase:p.wpDatabase,target:q.TABLE,setLookup:a}),C()&&r.lookup!==void 0&&e.jsx(o,{sx:{marginTop:"20px"},children:e.jsxs(I,{children:[e.jsx(ue,{control:e.jsx(ns,{checked:((c=r.lookup)==null?void 0:c.loadOnStartup)||l.is_nullable==="NO"&&r.inlineEditing===!0,disabled:l.is_nullable==="NO"&&r.inlineEditing,onChange:(v,N)=>{const S=r.lookup;S!==void 0&&(a(s,{...S,loadOnStartup:N}),d(!0)),v.stopPropagation()}}),label:"Load full lookup on startup",labelPlacement:"end"}),e.jsx(F,{component:"div",sx:{"& ul":{margin:0,padding:"5px"}},children:e.jsxs("ul",{style:{listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Loading small lookups into memory increases performance on startup"}),e.jsx("li",{children:"When disabled for large lookups, lookup values are cached"}),e.jsx("li",{children:"This feature is auto enabled when inline editing is enabled"}),e.jsx("li",{children:"Lookups are applied on save"}),e.jsx("li",{children:"A lookup change might require an app reload"})]})})]})})]})]})},Ws=({columnMetaData:i})=>i===void 0?null:e.jsxs(pe,{disableGutters:!0,children:[e.jsxs(xe,{expandIcon:e.jsx(ae,{}),sx:{fontSize:"1rem","& .MuiAccordionSummary-content":{padding:"1rem",alignItems:"center"}},children:[e.jsx(Oe,{}),e.jsx("span",{style:{paddingLeft:"0.5rem"},children:"Column metadata"})]}),e.jsxs(he,{sx:{display:"grid"},children:[e.jsxs(o,{sx:{marginTop:"1rem",display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"left",alignItems:"center"},children:[e.jsx("div",{children:"Column name"}),e.jsx("div",{children:e.jsx("strong",{children:i.column_name})}),e.jsx("div",{children:"Data type"}),e.jsx("div",{children:e.jsx("strong",{children:i.column_type})}),e.jsx("div",{children:"Is nullable"}),e.jsx("div",{children:e.jsx("strong",{children:i.is_nullable})}),e.jsx("div",{children:"Default value"}),e.jsx("div",{children:e.jsx("strong",{children:i.column_default==="NULL"?"null":i.column_default??"null"})}),i.extra!==""&&e.jsxs(e.Fragment,{children:[e.jsx("div",{}),e.jsx("div",{children:e.jsx("strong",{children:i.extra})})]})]}),e.jsx(I,{children:e.jsx(F,{children:"This is the how the column is stored in the database."})})]})]}),Os=(i,s)=>{s===void 0&&(s=ye(X.getState(),i));const r=j.useMemo(()=>{var a,p;const l={};if(Array.isArray(s==null?void 0:s.columns)&&((a=s==null?void 0:s.columns)==null?void 0:a.length)>0)for(let d=0;d<s.columns.length;d++)l[s.columns[d].column_name]=s.columns[d];if(Array.isArray(s==null?void 0:s.relation_columns)&&((p=s==null?void 0:s.relation_columns)==null?void 0:p.length)>0)for(let d=0;d<s.relation_columns.length;d++)l[Z.relationTablePrefix+s.relation_columns[d].column_name]=s.relation_columns[d];return l},[s]);return u.debug(r),r};export{Ns as I,Ls as S,Ws as a,Es as b,Os as u};
