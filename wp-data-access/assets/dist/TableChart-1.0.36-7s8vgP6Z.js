import{j as p}from"./cm-1.0.36-c_d2YVSf.js";import{r as h}from"./redux-1.0.36-Dw38apwx.js";import{P as ye,b as V,a as Ce}from"./index-1.0.36-Dx_S8RK1.js";import{c as Y}from"./index-1.0.36-Cdz_jNzK.js";import{a as be}from"./hooks-1.0.36-DVpFeylj.js";import{cl as _e,l as Re,$ as Se,a5 as we}from"./lib-1.0.36-RK2jtnD_.js";import{C as Oe}from"./ChartTypeSelection-1.0.36-_PaDDuu1.js";import{C as qe}from"./Chart-1.0.36-DVqQ3GnJ.js";import{T as Ee}from"./TableChartSelection-1.0.36-CInq9tTy.js";import{b as ke}from"./useChartSettings-1.0.36-DKli_4MO.js";import{c as q,g as he}from"./vendor-1.0.36-CN03Eozo.js";import{T as Ie}from"./Tooltip-1.0.36-BmrJt8sK.js";import{I as ze}from"./iconBase-1.0.36-Cg_-P7_6.js";import{B as Z}from"./ConfirmDialog-1.0.36-_-4q7QfI.js";import{P as Ae}from"./Menu-1.0.36-BJc4ujw0.js";import{B as k}from"./Spinner-1.0.36-BfGTD4Gb.js";import"./index-1.0.36-BW5TOU2Q.js";import"./Typography-1.0.36-CpRCY5e-.js";import"./notistack-1.0.36-BWLrSPn1.js";import"./useEnhancedEffect-1.0.36-CTzd5Szc.js";import"./loglevel-1.0.36-BZ7XahX3.js";import"./lodash-1.0.36-DFhYoGis.js";import"./moment-1.0.36-C5S46NFB.js";import"./ChartTypes-1.0.36-I-VdyVbC.js";import"./index-1.0.36-Dv-fkoQB.js";import"./FormHelperText-1.0.36-CywRqLJL.js";import"./useFormControl-1.0.36-DwbRv5ZH.js";import"./TextField-1.0.36-7fMfIiaO.js";import"./isHostComponent-1.0.36-DVu5iVWx.js";import"./debounce-1.0.36-Be36O1Ab.js";import"./FormLabel-1.0.36-wYb03Y2-.js";import"./useControlled-1.0.36-DU9XYnsb.js";import"./createSvgIcon-1.0.36-CIHUMY7B.js";import"./MenuItem-1.0.36-BUF9VZzL.js";import"./dividerClasses-1.0.36-cwzIcK9n.js";import"./ListItemIcon-1.0.36-Bqr3TVuQ.js";import"./main-1.0.36.js";import"./AppTheme-1.0.36-BB9LBkIC.js";import"./index-1.0.36-xGqEIHxf.js";import"./getThemeProps-1.0.36-R5fuQQuM.js";import"./useTableColumnOrder-1.0.36-BKuLdalh.js";import"./index.esm-1.0.36-BcBy0Voo.js";import"./LanguagesSupport-1.0.36-CNwr1suX.js";import"./TableContainer-1.0.36-CsHiUQr0.js";import"./AdminTheme-1.0.36-Bhvs-n11.js";import"./tanstack-1.0.36-BtzdZ5qw.js";import"./FallbackSpinner-1.0.36-D7KlMhQ_.js";import"./ActionsSettings-1.0.36-BoYKkBaN.js";import"./RestApi-1.0.36-XUqEDvWp.js";import"./TargetEnum-1.0.36-DPFnTxiX.js";import"./Tooltip-1.0.36-COg3Mxx7.js";import"./ScopeEnum-1.0.36-B4DDvIDj.js";import"./index-1.0.36-BaUawQwX.js";import"./TabPanel-1.0.36-CEnbl1IG.js";import"./useThemeProps-1.0.36-BvrgfXwP.js";import"./useTableUpdater-1.0.36-hYY8Nrtx.js";import"./settings-1.0.36-CMky96jX.js";import"./useFormDetails-1.0.36-Bik4Yf-M.js";import"./ThemeProvider-1.0.36-BePdakPr.js";import"./Autocomplete-1.0.36-iUEM6sWc.js";import"./Close-1.0.36-Bg2BHC5L.js";import"./Popper-1.0.36-B2EKBEPA.js";var I,ee;function H(){if(ee)return I;ee=1;function e(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}return I=e,I}var z,re;function Pe(){if(re)return z;re=1;var e=typeof q=="object"&&q&&q.Object===Object&&q;return z=e,z}var A,te;function ge(){if(te)return A;te=1;var e=Pe(),r=typeof self=="object"&&self&&self.Object===Object&&self,n=e||r||Function("return this")();return A=n,A}var P,ne;function Be(){if(ne)return P;ne=1;var e=ge(),r=function(){return e.Date.now()};return P=r,P}var B,ie;function Ne(){if(ie)return B;ie=1;var e=/\s/;function r(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return B=r,B}var N,oe;function Ge(){if(oe)return N;oe=1;var e=Ne(),r=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(r,"")}return N=n,N}var G,ae;function xe(){if(ae)return G;ae=1;var e=ge(),r=e.Symbol;return G=r,G}var W,ue;function We(){if(ue)return W;ue=1;var e=xe(),r=Object.prototype,n=r.hasOwnProperty,i=r.toString,a=e?e.toStringTag:void 0;function c(u){var t=n.call(u,a),f=u[a];try{u[a]=void 0;var o=!0}catch{}var s=i.call(u);return o&&(t?u[a]=f:delete u[a]),s}return W=c,W}var D,se;function De(){if(se)return D;se=1;var e=Object.prototype,r=e.toString;function n(i){return r.call(i)}return D=n,D}var L,ce;function Le(){if(ce)return L;ce=1;var e=xe(),r=We(),n=De(),i="[object Null]",a="[object Undefined]",c=e?e.toStringTag:void 0;function u(t){return t==null?t===void 0?a:i:c&&c in Object(t)?r(t):n(t)}return L=u,L}var M,fe;function Me(){if(fe)return M;fe=1;function e(r){return r!=null&&typeof r=="object"}return M=e,M}var F,de;function Fe(){if(de)return F;de=1;var e=Le(),r=Me(),n="[object Symbol]";function i(a){return typeof a=="symbol"||r(a)&&e(a)==n}return F=i,F}var $,le;function $e(){if(le)return $;le=1;var e=Ge(),r=H(),n=Fe(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,t=parseInt;function f(o){if(typeof o=="number")return o;if(n(o))return i;if(r(o)){var s=typeof o.valueOf=="function"?o.valueOf():o;o=r(s)?s+"":s}if(typeof o!="string")return o===0?o:+o;o=e(o);var b=c.test(o);return b||u.test(o)?t(o.slice(2),b?2:8):a.test(o)?i:+o}return $=f,$}var U,me;function ve(){if(me)return U;me=1;var e=H(),r=Be(),n=$e(),i="Expected a function",a=Math.max,c=Math.min;function u(t,f,o){var s,b,C,y,l,g,m=0,T=!1,x=!1,_=!0;if(typeof t!="function")throw new TypeError(i);f=n(f)||0,e(o)&&(T=!!o.leading,x="maxWait"in o,C=x?a(n(o.maxWait)||0,f):C,_="trailing"in o?!!o.trailing:_);function j(d){var R=s,S=b;return s=b=void 0,m=d,y=t.apply(S,R),y}function v(d){return m=d,l=setTimeout(O,f),T?j(d):y}function w(d){var R=d-g,S=d-m,Q=f-R;return x?c(Q,C-S):Q}function J(d){var R=d-g,S=d-m;return g===void 0||R>=f||R<0||x&&S>=C}function O(){var d=r();if(J(d))return K(d);l=setTimeout(O,w(d))}function K(d){return l=void 0,_&&s?j(d):(s=b=void 0,y)}function Te(){l!==void 0&&clearTimeout(l),m=0,s=g=b=l=void 0}function je(){return l===void 0?y:K(r())}function E(){var d=r(),R=J(d);if(s=arguments,b=this,g=d,R){if(l===void 0)return v(g);if(x)return clearTimeout(l),l=setTimeout(O,f),j(g)}return l===void 0&&(l=setTimeout(O,f)),y}return E.cancel=Te,E.flush=je,E}return U=u,U}var Ue=ve();const Xe=he(Ue);var X,pe;function He(){if(pe)return X;pe=1;var e=ve(),r=H(),n="Expected a function";function i(a,c,u){var t=!0,f=!0;if(typeof a!="function")throw new TypeError(n);return r(u)&&(t="leading"in u?!!u.leading:t,f="trailing"in u?!!u.trailing:f),e(a,c,{leading:t,maxWait:c,trailing:f})}return X=i,X}var Je=He();const Ke=he(Je),Qe=(e,r,n,i)=>{switch(r){case"debounce":return Xe(e,n,i);case"throttle":return Ke(e,n,i);default:return e}},Ve=e=>{const r=h.useRef(e);return h.useEffect(()=>{r.current=e}),h.useMemo(()=>(...n)=>{var i;return(i=r.current)===null||i===void 0?void 0:i.call(r,...n)},[])},Ye=e=>{const[r,n]=h.useState((e==null?void 0:e.current)||null);return e&&setTimeout(()=>{e.current!==r&&n(e.current)},0),{refProxy:h.useMemo(()=>new Proxy(a=>{a!==r&&n(a)},{get(a,c){return c==="current"?r:a[c]},set(a,c,u){return c==="current"?n(u):a[c]=u,!0}}),[r]),refElement:r,setRefElement:n}},Ze=(e,r)=>r==="border-box"?{width:e.borderBoxSize[0].inlineSize,height:e.borderBoxSize[0].blockSize}:r==="content-box"?{width:e.contentBoxSize[0].inlineSize,height:e.contentBoxSize[0].blockSize}:{width:e.contentRect.width,height:e.contentRect.height};function er({skipOnMount:e=!1,refreshMode:r,refreshRate:n=1e3,refreshOptions:i,handleWidth:a=!0,handleHeight:c=!0,targetRef:u,observerOptions:t,onResize:f}={}){const o=h.useRef(e),s=Ve(f),[b,C]=h.useState({width:void 0,height:void 0}),{refProxy:y,refElement:l}=Ye(u),{box:g}=t||{},m=h.useCallback(x=>{if(!a&&!c)return;if(o.current){o.current=!1;return}const _=(j,v)=>a&&j.width!==v.width||c&&j.height!==v.height;x.forEach(j=>{const v=Ze(j,g);C(w=>_(w,v)?(s==null||s({width:v.width,height:v.height,entry:j}),v):w)})},[a,c,o,g]),T=h.useCallback(Qe(m,r,n,i),[m,r,n,i]);return h.useEffect(()=>{let x;return l?(x=new window.ResizeObserver(T),x.observe(l,t)):(b.width||b.height)&&(s==null||s({width:null,height:null,entry:null}),C({width:void 0,height:void 0})),()=>{var _,j,v;(_=x==null?void 0:x.disconnect)===null||_===void 0||_.call(x),(v=(j=T).cancel)===null||v===void 0||v.call(j)}},[T,l]),Object.assign({ref:y},b)}const rr=({appId:e,popupState:r})=>(be(),(i=>null)()),ft=({appId:e,componentWidth:r,table:n,tableStore:i,metaData:a,appLanguage:c})=>{const u=be(),t=ke(e),[f,o]=h.useState("BarChart");h.useEffect(()=>{s.current!==null&&g()},[f]);const s=h.useRef(null),b=h.useCallback(()=>{s.current&&l(s.current.offsetWidth)},[s]),{width:C}=er({targetRef:s,onResize:b}),[y,l]=h.useState(),g=()=>{var T;const m=_e(n,t.majorAxisColumn,t.minorAxisColumns,t.grouped,i.columns,a);Re.debug(m),((T=t==null?void 0:t.data)==null?void 0:T.length)>0?u(Se({appId:e,property:{majorAxisColumn:t.majorAxisColumn,minorAxisColumns:t.minorAxisColumns,data:m,chartType:f,grouped:t.grouped}})):u(we({appId:e,chartState:{majorAxisColumn:t.majorAxisColumn,minorAxisColumns:t.minorAxisColumns,data:m,chartType:f,grouped:t.grouped}}))};return p.jsx(ye,{variant:"popover",popupId:e,children:m=>{var T;return p.jsxs(p.Fragment,{children:[r<900?p.jsx(Ie,{title:"Charts",children:p.jsx(ze,{...V(m),onClickCapture:()=>{t!==void 0&&g()},children:p.jsx(Y,{})})}):p.jsx(Z,{variant:"contained",endIcon:p.jsx(Y,{}),...V(m),onClickCapture:()=>{t!==void 0&&g()},children:"CHARTS"}),p.jsx(Ae,{...Ce(m),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","& > .MuiPaper-root":{resize:"horizontal",minWidth:"380px",width:y+"px"}},children:p.jsxs(k,{sx:{display:"grid",gap:"20px",padding:"20px"},ref:s,children:[p.jsx(Ee,{appId:e,metaData:a,tableStore:i}),p.jsx(Oe,{chartType:f,setChartType:o,chartTypes:(t==null?void 0:t.chartTypes)??[],isTableChart:!0}),p.jsxs(k,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem"},children:[p.jsx(k,{sx:{whiteSpace:"nowrap"},children:i.state.masterDetailConditions===void 0&&p.jsx(rr,{appId:e,popupState:m})}),p.jsxs(Z,{variant:"contained",onClick:()=>{m.close()},children:[" ",c.back," "]})]}),(t==null?void 0:t.docked)==="undocked"&&((T=t==null?void 0:t.data)==null?void 0:T.length)>0&&(t==null?void 0:t.majorAxisColumn)!==""&&(t==null?void 0:t.minorAxisColumns.length)>0&&p.jsx(qe,{appId:e,isBuilderEnabled:!1,isToolbarEnabled:!1,chartWidth:C,isTableChart:!0})]})})]})}})};export{ft as default};
