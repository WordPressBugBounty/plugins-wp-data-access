import{j as e}from"./cm-1.0.41-DxZ4itL_.js";import{r as a}from"./redux-1.0.41-DJjpZqD1.js";import{z as d,aL as g}from"./index-1.0.41-CpXj521P.js";import{C as f}from"./index-1.0.41-DIUNb9YZ.js";import{e as u}from"./notistack-1.0.41-Bq-EKqc7.js";import{a as y}from"./hooks-1.0.41-sDnKeMy7.js";import{c8 as j}from"./lib-1.0.41-DFdWuh_n.js";import{B as i}from"./Spinner-1.0.41-fWZy8imI.js";import{T as n}from"./Tooltip-1.0.41-g4uuOuci.js";import{L as m}from"./Link-1.0.41-yhMF_PSg.js";import{A as h}from"./AdminTheme-1.0.41-4tiUoVeb.js";import{M as C}from"./markdown-1.0.41-dNZTjvWI.js";import{r as b}from"./rehyperaw-1.0.41-YJYMuCoH.js";import{f as v}from"./Typography-1.0.41-BIN1Ddvh.js";import"./vendor-1.0.41-CN03Eozo.js";import"./iconBase-1.0.41-BNQFQdHp.js";import"./useEnhancedEffect-1.0.41-BVsyj6AW.js";import"./ctc-1.0.41-D6Hg2DQJ.js";import"./loglevel-1.0.41-BZ7XahX3.js";import"./lodash-1.0.41-Cd8grAqB.js";import"./moment-1.0.41-C5S46NFB.js";import"./ThemeProvider-1.0.41-D1lNQgXT.js";import"./useControlled-1.0.41-BEhJe3xs.js";import"./Popper-1.0.41-Dl4_0sfD.js";const w=({className:t,children:r})=>{var s;const p=y();return e.jsxs(i,{sx:{position:"relative","& > pre":{border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:"4px",backgroundColor:"#fafafa",padding:"35px 20px 20px 20px",whiteSpace:"pre-wrap"},"& > pre code":{padding:0,margin:0,background:"transparent"}},children:[e.jsx("pre",{className:t,children:r}),e.jsxs(i,{sx:{position:"absolute",top:10,right:12,whiteSpace:"nowrap",display:"flex",gap:"10px"},children:[e.jsx(f,{text:(s=r==null?void 0:r.props)==null?void 0:s.children,onCopy:()=>{u("Code successfully copied to clipboard",{variant:"info"})},children:e.jsx(n,{title:"Copy query to clipboard",children:e.jsxs(m,{sx:{fontSize:"0.875em",cursor:"pointer",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"2px"},children:[e.jsx(d,{}),"Copy"]})})}),e.jsx(n,{title:"Copy query to editor",children:e.jsxs(m,{sx:{fontSize:"0.875em",cursor:"pointer",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"2px"},onClick:()=>{var o;p(j({copyQuery:(o=r==null?void 0:r.props)==null?void 0:o.children}))},children:[e.jsx(g,{}),"Edit"]})})]})]})},U=({chatMessages:t,loading:r,fullScreen:p})=>{const s=a.useRef(null);return a.useEffect(()=>{if(s.current!==null){const o=s.current;o.scrollTo(0,o.scrollHeight)}},[t]),a.useEffect(()=>{if(r&&s.current!==null){const o=s.current;o.scrollTo(0,o.scrollHeight)}},[r]),e.jsxs(i,{ref:s,sx:{overflowX:"hidden",overflowY:"scroll",margin:"0 20px",fontSize:"14px"},children:[...t.map(o=>{var l,c,x;return e.jsxs(i,{className:o.type==="ai"?"pp-message-ai":"pp-message-me",sx:{"&.pp-message-ai":{marginTop:0},"&.pp-message-ai .pp-message":{padding:0},"&.pp-message-me":{display:"flex",flexDirection:"row-reverse",justifyContent:"end",alignItems:"center","&:hover .pp-message-icon":{visibility:"visible"}},"&.pp-message-me .pp-message":{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",padding:"0 16px",bgcolor:"#f5f5f5"}},children:[o.message&&e.jsx(i,{className:"pp-message",sx:{whiteSpace:"normal",fontFamily:"monospace",...o.isError===!0&&{color:(x=(c=(l=h)==null?void 0:l.palette)==null?void 0:c.error)==null?void 0:x.dark},...o.isNote===!0&&{fontStyle:"italic"},"& > *":{margin:p?"2em 0":"1em 0",padding:0}},children:e.jsx(C,{rehypePlugins:[b],components:{pre:w},children:o.message})}),e.jsx(i,{className:"pp-message-icon",sx:{marginBottom:p?"2em":"1em",...o.type==="me"&&{visibility:"hidden",padding:"0 5px 0 30px",marginBottom:0}},children:o.isNote!==!0&&e.jsx(f,{text:o.message,onCopy:()=>{u("Message successfully copied to clipboard",{variant:"info"})},children:e.jsx(n,{title:"Copy to clipboard",children:e.jsxs(m,{sx:{fontSize:"0.875em",cursor:"pointer",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"2px"},children:[e.jsx(d,{}),"Copy"]})})})})]})}),r?e.jsx(i,{sx:{padding:"30px",textAlign:"center","& svg":{color:"rgba(0, 0, 0, 0.23)"}},children:e.jsx(v,{size:24})}):""]})};export{U as default};
