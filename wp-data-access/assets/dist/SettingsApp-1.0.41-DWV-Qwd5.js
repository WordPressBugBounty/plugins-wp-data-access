import{j as e}from"./cm-1.0.41-DxZ4itL_.js";import{A as F,a as B,b as P,c as k}from"./MainAppBuilder-1.0.41-OJMdvq67.js";import{r as A}from"./redux-1.0.41-DJjpZqD1.js";import{x as b,y as E}from"./index-1.0.41-CpXj521P.js";import{T as h}from"./TargetEnum-1.0.41-CIW1jlU5.js";import{B as x,C as U}from"./ConfirmDialog-1.0.41-NKESMhfW.js";import{s as D}from"./ActionsSettings-1.0.41-3gFM2W6T.js";import{e as g}from"./notistack-1.0.41-Bq-EKqc7.js";import{l as m,b as T,m as C,U as c,A as G}from"./lib-1.0.41-DFdWuh_n.js";import{A as p,a as u}from"./AccordionSummary-1.0.41-CY9CEWZQ.js";import{A as w}from"./AccordionDetails-1.0.41-DlUbOAS0.js";import{F as d,a as M}from"./FormHelperText-1.0.41-BPSj83yP.js";import{u as v,a as y}from"./hooks-1.0.41-sDnKeMy7.js";import{P as W}from"./PremiumFeature-1.0.41-CNKLpmFu.js";import{F as f}from"./FormControlLabel-1.0.41-OBCouq3I.js";import{S as j}from"./Switch-1.0.41-BrkxB2Jy.js";import{T as S}from"./TextField-1.0.41-CGPjmVeQ.js";import{B as R}from"./Spinner-1.0.41-fWZy8imI.js";import{S as L}from"./Select-1.0.41-aTzlc-HZ.js";import{M as a}from"./MenuItem-1.0.41-DCc8qvzQ.js";import"./vendor-1.0.41-CN03Eozo.js";import"./AdminTheme-1.0.41-4tiUoVeb.js";import"./Typography-1.0.41-BIN1Ddvh.js";import"./main-1.0.41.js";import"./loglevel-1.0.41-BZ7XahX3.js";import"./lodash-1.0.41-Cd8grAqB.js";import"./moment-1.0.41-C5S46NFB.js";import"./Tooltip-1.0.41-BQBkdKQ5.js";import"./BuilderMenu-1.0.41-CI6mFW4W.js";import"./iconBase-1.0.41-BNQFQdHp.js";import"./useEnhancedEffect-1.0.41-BVsyj6AW.js";import"./Menu-1.0.41-DBfdBNVU.js";import"./ThemeProvider-1.0.41-D1lNQgXT.js";import"./index-1.0.41-DGYaemnA.js";import"./useApp-1.0.41-rJY2RiUW.js";import"./ActionsApp-1.0.41-Cz0T7QKd.js";import"./RestApi-1.0.41-CZ_yORv3.js";/* empty css                        */import"./CardContent-1.0.41-Cwtu331C.js";import"./TabPanel-1.0.41-BJuUpIHA.js";import"./useThemeProps-1.0.41-BJkkrkB6.js";import"./getThemeProps-1.0.41-BXG_2HDV.js";import"./index-1.0.41-B2jO0d0P.js";import"./FileSaver.min-1.0.41-CFZnymRv.js";import"./index-1.0.41-DIUNb9YZ.js";import"./ctc-1.0.41-D6Hg2DQJ.js";import"./index-1.0.41-zQwWCc96.js";import"./Tooltip-1.0.41-g4uuOuci.js";import"./useControlled-1.0.41-BEhJe3xs.js";import"./Popper-1.0.41-Dl4_0sfD.js";import"./Link-1.0.41-yhMF_PSg.js";import"./Checkbox-1.0.41-C_619ZQC.js";import"./SwitchBase-1.0.41-C_lqznV-.js";import"./useFormControl-1.0.41-1E9QEnRo.js";import"./createSvgIcon-1.0.41-0lRWzB2Q.js";import"./DynamicModeEnum-1.0.41-BXuL5kgA.js";import"./ComponentColumn-1.0.41-YtEVVFdp.js";import"./ActionsExplorer-1.0.41-DSAyrNr3.js";import"./Autocomplete-1.0.41-82-5yXGC.js";import"./Close-1.0.41-Dkp5SdDZ.js";import"./Chip-1.0.41-C0GI7jZZ.js";import"./FormLabel-1.0.41-CgxisugM.js";import"./MapsApiKey-1.0.41-GmC7QRk2.js";import"./RadioGroup-1.0.41-BzP_AWOa.js";import"./Radio-1.0.41-S-npPzGQ.js";import"./lang-1.0.41-Bm0VdcRH.js";import"./index-1.0.41-Wbyk3QBm.js";import"./index-1.0.41-Ca6zW1RM.js";import"./SanitizeComponent-1.0.41-B18z6eJi.js";import"./dompurify-1.0.41-DhD2mIk-.js";import"./Divider-1.0.41-CupjOoMR.js";import"./InputAdornment-1.0.41-BaGp3m3T.js";import"./Stepper-1.0.41-C_961xRF.js";import"./ListItemIcon-1.0.41-D1zPE5kJ.js";import"./ListItemText-1.0.41-CcKDonwI.js";import"./TableRow-1.0.41-CTJevnEe.js";import"./CardHeader-1.0.41-DfJVb3rg.js";import"./AppContainerSelector-1.0.41-C9pS32qV.js";import"./FallbackSpinner-1.0.41-2QUzxGrn.js";import"./useLoadAppMetaData-1.0.41-DlCzMh1q.js";import"./StoreTypeEnum-1.0.41-s2ixWw7u.js";import"./MapPrepare-1.0.41-DTWLc2Gj.js";import"./useMetadata-1.0.41-DKmF8A3i.js";import"./index-1.0.41-bmWVeOdZ.js";/* empty css                    */import"./Collapse-1.0.41-QlMDtjRk.js";import"./utils-1.0.41-iop7lDec.js";const H=({app:s})=>{m.debug(s);const[o,i]=A.useState(!1),[r,t]=A.useState(void 0),n=()=>{switch(r){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(p,{disableGutters:!0,children:[e.jsx(u,{expandIcon:e.jsx(b,{}),children:"Reset"}),e.jsx(w,{children:e.jsxs(d,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{t(h.TABLE),i(!0)},children:"Reset Table Builder"}),e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{t(h.FORM),i(!0)},children:"Reset Form Builder"}),e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{t(h.CHART),i(!0)},children:"Reset Chart"}),e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{t(h.MAP),i(!0)},children:"Reset Map"}),e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{t(h.THEME),i(!0)},children:"Reset Theme"}),e.jsxs(M,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},error:!0,children:[e.jsx(E,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(U,{title:n(),message:"Are you sure? This action cannot be undone!",open:o,setOpen:i,onConfirm:()=>{r!==void 0&&D(s.appDbId,s.appCntId,r,null,null,null,null,l=>{if(l!=null&&l.code&&(l==null?void 0:l.message)!==void 0)switch(l.code){case"ok":g(l.message,{variant:"success"});break;case"info":g(l.message,{variant:"info"});break;default:g(l.message??T.contactSupport,{variant:"error"})}else m.error(l),g(T.contactSupport,{variant:"error"})},l=>{m.error("error",l),g(l??T.contactSupport,{variant:"error"})})}})]})},N=()=>{const s=v(o=>{var i,r;return(r=(i=o==null?void 0:o.apps)==null?void 0:i.app)==null?void 0:r.fullScreen});return m.debug("appFullscreen",s),s},O=()=>{const s=v(o=>{var i,r;return(r=(i=o==null?void 0:o.apps)==null?void 0:i.app)==null?void 0:r.safeMode});return m.debug("appSafeMode",s),s},q=({app:s,setIsUpdated:o})=>{m.debug(s);const i=y();N();const r=O();return e.jsxs(e.Fragment,{children:[e.jsx(f,{control:e.jsx(j,{checked:!1,disabled:!0,onChange:(t,n)=>{i(C({property:{fullScreen:n}})),o&&o(!0),t.stopPropagation()}}),label:"Enable full screen support",labelPlacement:"end"}),e.jsx(d,{fullWidth:!0,children:e.jsx(M,{children:"Adds an icon to the app toolbar, allowing the user to switch to full-screen mode."})}),e.jsx(f,{control:e.jsx(j,{checked:r,disabled:!0,onChange:(t,n)=>{i(C({property:{safeMode:n}})),o&&o(!0),t.stopPropagation()}}),label:"Enable safe mode",labelPlacement:"end"}),e.jsx(d,{fullWidth:!0,children:e.jsx(M,{children:"Disables all custom code, including hooks and computed code fields."})}),e.jsx(W,{})]})},z=()=>{const s=v(o=>o.apps.app.registration);return m.debug("appRegistration",s),s},J=({app:s,setIsUpdated:o})=>{m.debug(s);const i=y(),r=z();return e.jsxs(e.Fragment,{children:[e.jsx(d,{fullWidth:!0,children:e.jsx(f,{control:e.jsx(j,{checked:r.showMessage,onChange:(t,n)=>{i(c({message:r.message,showMessage:n,url:r.url,showUrl:r.showUrl,urlTime:r.urlTime,allowUpdates:r.allowUpdates})),o&&o(!0),t.stopPropagation()}}),label:"Show message after submit",labelPlacement:"end"})}),r.showMessage&&e.jsx(S,{type:"text",label:"Message",fullWidth:!0,helperText:"Displayed message after the registration form is successfully submitted.",value:r.message??"",autoComplete:"off",onChange:t=>{i(c({message:t.target.value,showMessage:r.showMessage,url:r.url,showUrl:r.showUrl,urlTime:r.urlTime,allowUpdates:r.allowUpdates})),o&&o(!0),t.stopPropagation()},sx:{marginTop:"20px",marginBottom:"10px"}}),e.jsxs(R,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(d,{children:e.jsx(f,{control:e.jsx(j,{checked:r.showUrl,disabled:r.allowUpdates,onChange:(t,n)=>{i(c({message:r.message,showMessage:r.showMessage,url:r.url,showUrl:n,urlTime:r.urlTime,allowUpdates:r.allowUpdates})),o&&o(!0),t.stopPropagation()}}),label:"Redirect after submit",labelPlacement:"end"})}),e.jsxs(L,{fullWidth:!0,value:r.urlTime,onChange:t=>{i(c({message:r.message,showMessage:r.showMessage,url:r.url,showUrl:r.showUrl,urlTime:Number(t.target.value),allowUpdates:r.allowUpdates})),o&&o(!0)},onClick:t=>{t.preventDefault(),t.stopPropagation()},children:[e.jsx(a,{value:"0",children:"0 seconds"}),e.jsx(a,{value:"1",children:"1 seconds"}),e.jsx(a,{value:"2",children:"2 seconds"}),e.jsx(a,{value:"3",children:"3 seconds"}),e.jsx(a,{value:"4",children:"4 seconds"}),e.jsx(a,{value:"5",children:"5 seconds"}),e.jsx(a,{value:"6",children:"6 seconds"}),e.jsx(a,{value:"7",children:"7 seconds"}),e.jsx(a,{value:"8",children:"8 seconds"}),e.jsx(a,{value:"9",children:"9 seconds"}),e.jsx(a,{value:"10",children:"10 seconds"})]})]}),r.showUrl&&e.jsx(S,{type:"text",label:"URL",fullWidth:!0,disabled:r.allowUpdates,helperText:"The URL users are redirected to after form submission.",value:r.url??"",autoComplete:"off",onChange:t=>{i(c({message:r.message,showMessage:r.showMessage,url:t.target.value,showUrl:r.showUrl,urlTime:r.urlTime,allowUpdates:r.allowUpdates})),o&&o(!0),t.stopPropagation()},sx:{marginTop:"20px",marginBottom:"10px"}}),e.jsx(d,{fullWidth:!0,children:e.jsx(f,{control:e.jsx(j,{checked:r.allowUpdates,onChange:(t,n)=>{i(c({message:r.message,showMessage:r.showMessage,url:r.url,showUrl:r.showUrl,urlTime:r.urlTime,allowUpdates:n})),o&&o(!0),t.stopPropagation()}}),label:"Allow updates after submit",labelPlacement:"end"})})]})},Ar=({app:s,setIsUpdated:o})=>(m.debug(s),e.jsxs(R,{children:[e.jsx(p,{disableGutters:!0,component:"div",sx:{"& .MuiAccordionSummary-root:hover, .MuiButtonBase-root:hover":{cursor:"default"},"& .MuiFormControl-root":{marginTop:"8px"}},children:e.jsx(u,{children:e.jsx(F,{app:s,hasErrors:!1,setIsUpdated:o})})}),e.jsx(p,{disableGutters:!0,component:"div",sx:{"& .MuiAccordionSummary-root:hover, .MuiButtonBase-root:hover":{cursor:"default"},"& .MuiFormControl-root":{marginTop:"8px"}},children:e.jsx(u,{children:e.jsx(B,{app:s,hasErrors:!1,setIsUpdated:o})})}),e.jsx(p,{disableGutters:!0,component:"div",sx:{"& .MuiAccordionSummary-root:hover, .MuiButtonBase-root:hover":{cursor:"default"},"& .MuiFormControl-root":{marginTop:"8px",marginBottom:"8px"}},children:e.jsx(u,{sx:{marginBottom:0},children:e.jsx(P,{app:s,setIsUpdated:o})})}),e.jsxs(p,{disableGutters:!0,children:[e.jsx(u,{expandIcon:e.jsx(b,{}),children:"Language"}),e.jsx(w,{children:e.jsx(k,{app:s,setIsUpdated:o})})]}),e.jsxs(p,{disableGutters:!0,children:[e.jsx(u,{expandIcon:e.jsx(b,{}),children:"Settings"}),e.jsx(w,{children:e.jsx(q,{app:s,setIsUpdated:o})})]}),s.appType==G.REGISTRATION&&e.jsxs(p,{disableGutters:!0,children:[e.jsx(u,{expandIcon:e.jsx(b,{}),children:"Registration Form Settings"}),e.jsx(w,{children:e.jsx(J,{app:s,setIsUpdated:o})})]}),e.jsx(H,{app:s})]}));export{Ar as default};
