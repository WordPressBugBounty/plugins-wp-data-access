import{j as d}from"./cm-1.0.36-c_d2YVSf.js";import{l as w,m as S}from"./lib-1.0.36-RK2jtnD_.js";import{B as F}from"./Spinner-1.0.36-BfGTD4Gb.js";import{F as V}from"./FormLabel-1.0.36-wYb03Y2-.js";import{L as k,a as A}from"./Menu-1.0.36-BJc4ujw0.js";import{g as E,l as I,L as G}from"./ListItem-1.0.36-CIrAeyuU.js";import{r as B}from"./redux-1.0.36-Dw38apwx.js";import{i as P,j as T,c as R,l as U,r as D,m as M,o as O}from"./Typography-1.0.36-CpRCY5e-.js";import{u as W}from"./useEnhancedEffect-1.0.36-CTzd5Szc.js";import{a as q,B as z}from"./iconBase-1.0.36-Cg_-P7_6.js";import{L as K}from"./ListItemIcon-1.0.36-Bqr3TVuQ.js";import{C as H}from"./Checkbox-1.0.36-BBYwR5K6.js";import{L as J}from"./ListItemText-1.0.36-DnpUu346.js";import"./vendor-1.0.36-CN03Eozo.js";import"./loglevel-1.0.36-BZ7XahX3.js";import"./lodash-1.0.36-DFhYoGis.js";import"./moment-1.0.36-C5S46NFB.js";import"./useFormControl-1.0.36-DwbRv5ZH.js";import"./ThemeProvider-1.0.36-BePdakPr.js";import"./index-1.0.36-Cdz_jNzK.js";import"./notistack-1.0.36-BWLrSPn1.js";import"./isHostComponent-1.0.36-DVu5iVWx.js";import"./debounce-1.0.36-Be36O1Ab.js";import"./FormHelperText-1.0.36-CywRqLJL.js";import"./MenuItem-1.0.36-BUF9VZzL.js";import"./dividerClasses-1.0.36-cwzIcK9n.js";import"./SwitchBase-1.0.36-DQfS6hYA.js";import"./useControlled-1.0.36-DU9XYnsb.js";import"./createSvgIcon-1.0.36-CIHUMY7B.js";const Q=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},X=t=>{const{alignItems:e,classes:n,dense:u,disabled:r,disableGutters:p,divider:v,selected:m}=t,f=U({root:["root",u&&"dense",!p&&"gutters",v&&"divider",r&&"disabled",e==="flex-start"&&"alignItemsFlexStart",m&&"selected"]},E,n);return{...n,...f}},Y=T(z,{shouldForwardProp:t=>D(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Q})(M(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${I.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),Z=B.forwardRef(function(e,n){const u=P({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:p=!1,component:v="div",children:m,dense:C=!1,disableGutters:f=!1,divider:$=!1,focusVisibleClassName:b,selected:j=!1,className:h,...g}=u,L=B.useContext(k),o=B.useMemo(()=>({dense:C||L.dense||!1,alignItems:r,disableGutters:f}),[r,L.dense,C,f]),a=B.useRef(null);W(()=>{p&&a.current&&a.current.focus()},[p]);const i={...u,alignItems:r,dense:o.dense,disableGutters:f,divider:$,selected:j},s=X(i),x=q(a,n);return d.jsx(k.Provider,{value:o,children:d.jsx(Y,{ref:x,href:g.href||g.to,component:(g.href||g.to)&&v==="div"?"button":v,focusVisibleClassName:R(s.focusVisible,b),ownerState:i,className:R(s.root,h),...g,classes:s,children:m})})}),jt=({column:t,columnName:e,columnLabel:n,lov:u,lookups:r,columnFilters:p,setColumnFilters:v,setCurrentFilterColumnName:m,css:C,clientSideProcessing:f,tableColumns:$})=>{w.debug(e,u,p);let b=[];p.map(o=>{o.id===e&&Array.isArray(o.value)&&(b=o.value)}),w.debug(b);const j={...C(),margin:"10px 0 0 0",padding:0,height:"180px",overflow:"auto"},h=o=>d.jsxs(A,{sx:j,children:[...o.map(a=>{const i=f?a.key:a.value,s=a.value;return d.jsx(G,{sx:{margin:0,padding:0},children:d.jsxs(Z,{selected:b.includes(i),sx:{padding:"0 8px 0 0"},onClick:()=>{const x=[...p].filter(y=>y.id===e),l=x.length===0?[]:x[0].value;if(!l.includes(i))l.push(i);else{const y=l.indexOf(i);y!==-1&&l.splice(y,1)}const c=[...p].filter(y=>y.id!==e);l.length>0&&c.push({id:e,value:l}),l.length===0&&m(""),v(c)},onFocus:()=>{m(e)},onBlur:()=>{m("")},children:[d.jsx(K,{sx:{minWidth:0},children:d.jsx(H,{checked:b.includes(i)})}),d.jsx(J,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S(s)})]})})})]}),g=()=>{const o=[],a=$.filter(i=>i.columnName===e)[0];return t.getFacetedUniqueValues().forEach((i,s)=>{var x,l;if(s)if(r&&r[e]&&((x=a==null?void 0:a.lookup)==null?void 0:x.loadOnStartup)!==!0){if(r[e][s]&&typeof r[e][s]=="string"){const c=r[e][s]+" ("+i+")";c!==""&&o.push({key:s,value:c})}else if(r[e][s]&&Array.isArray(r[e][s])){const c=r[e][s].join((l=a==null?void 0:a.lookup)==null?void 0:l.delimiter)+" ("+i+")";c!==""&&o.push({key:s,value:c})}}else{const c=s+" ("+i+")";o.push({key:s,value:c})}}),h(o)},L=()=>h(u??[]);return d.jsxs(F,{className:"pp-column-search-field",sx:{margin:0,padding:0},children:[d.jsx(V,{children:n}),f?g():L()]})};export{jt as default};
