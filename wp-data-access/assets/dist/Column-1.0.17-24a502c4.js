import{l as h,cE as $,r,j as _,e1 as u,e2 as c,_ as b}from"./main-1.0.17.js";import{l as N}from"./ActionsDml-1.0.17-9041b8e8.js";import{u as t}from"./main-1.0.17-54ffa424.js";import{F as H}from"./usePrepareStore-1.0.17-a8be8b2f.js";import{a as J,A as I,T as V}from"./TargetEnum-1.0.17-1e1ba2c5.js";import{i as M}from"./index-1.0.17-9ae5630d.js";import"./iconBase-1.0.17-8d991e6c.js";import"./Select-1.0.17-745624d0.js";import"./Menu-1.0.17-09126381.js";import"./createSvgIcon-1.0.17-f0c1dc0a.js";import"./Close-1.0.17-6c546366.js";const C=({appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,storeForm:E,formMode:y,locale:x})=>{var q,U;h.debug(v,d,j,P,e,s,f,i,E,y,x);const k=t(p=>$(p,v));h.debug("data",k);const[A,z]=r.useState([]);h.debug("lov",A);const[W,K]=r.useState(Array.isArray((q=s.lookup)==null?void 0:q.dynamicConditions)?(U=s.lookup)==null?void 0:U.dynamicConditions.map(p=>({columnName:p.tableColumnName,columnValue:""})):[]);h.debug("conditions",W),r.useEffect(()=>{var p,O;Array.isArray((p=s.lookup)==null?void 0:p.dynamicConditions)&&((O=s.lookup)==null||O.dynamicConditions.map(S=>{k[S.tableColumnName]===void 0&&h.error("Invalid lookup: column "+S.tableColumnName+" in dynamic condition not found.")})),W.length===0&&g()},[s.lookup]),r.useEffect(()=>{var p,O;if(Object.keys(W).length>0){const S=Array.isArray((p=s.lookup)==null?void 0:p.dynamicConditions)?(O=s.lookup)==null?void 0:O.dynamicConditions.map(R=>({columnName:R.lookupColumnName,columnValue:k[R.tableColumnName]??""})):[];if(h.debug(S),!M(W,S)){const R={};S.length>0&&S.map(T=>{R[T.columnName]=T.columnValue}),h.debug("reloading dynamic lookup",d,S),g(R),K(S)}}},[k]);const g=(p={})=>{var O,S;N(v,(i==null?void 0:i.useRform)===!0?J.RFORM:J.FORM,d,((O=s.lookup)==null?void 0:O.key)??"",((S=s.lookup)==null?void 0:S.value)??"",p,{},R=>{var T,w,B;if(h.debug(R.data),!((T=s.lookup)!=null&&T.value.includes(",")))z(R.data);else{const X=(w=s.lookup)==null?void 0:w.value.split(","),G=[];for(let F=0;F<R.data.length;F++){const Y=X.map(Z=>R.data[F][Z]).join(((B=s.lookup)==null?void 0:B.delimiter)??"");G.push({key:R.data[F].key,value:Y})}z(G)}},R=>{h.error(R)})},Q=r.useMemo(()=>A.filter(p=>p.key===j)[0]??null,[j,A]);return _.jsx(I,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:A,getOptionLabel:p=>Array.isArray(p.value)?p.value[0]:p.value,value:Q,onChange:(p,O)=>{O!==null?L(d,O==null?void 0:O.key):L(d,null)},disabled:y===H.VIEW||y===H.UPDATE&&i.primary_key.includes(d),renderInput:p=>_.jsx(V,{label:e.formLabel,required:e.is_nullable==="NO",...p,className:s.classNames,inputProps:{...p.inputProps,autoComplete:"new-password"},variant:u(),helperText:c(s,x.selectEnum),disabled:y===H.VIEW||y===H.UPDATE&&i.primary_key.includes(d)})})},n=r.lazy(()=>b(()=>import("./FieldText-1.0.17-89bad677.js"),["./FieldText-1.0.17-89bad677.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./TargetEnum-1.0.17-1e1ba2c5.js","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./Close-1.0.17-6c546366.js","./InputAdornment-1.0.17-012556cc.js"],import.meta.url)),D=r.lazy(()=>b(()=>import("./FieldTextarea-1.0.17-72d591ec.js"),["./FieldTextarea-1.0.17-72d591ec.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./TargetEnum-1.0.17-1e1ba2c5.js","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./Close-1.0.17-6c546366.js"],import.meta.url)),l=r.lazy(()=>b(()=>import("./FieldNumber-1.0.17-ec1b8689.js"),["./FieldNumber-1.0.17-ec1b8689.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./TargetEnum-1.0.17-1e1ba2c5.js","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./Close-1.0.17-6c546366.js"],import.meta.url)),o=r.lazy(()=>b(()=>import("./FieldSet-1.0.17-be45a28a.js"),["./FieldSet-1.0.17-be45a28a.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./MenuItem-1.0.17-ed8ab45a.js"],import.meta.url)),m=r.lazy(()=>b(()=>import("./FieldEnum-1.0.17-7e8c5f1f.js"),["./FieldEnum-1.0.17-7e8c5f1f.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./MenuItem-1.0.17-ed8ab45a.js","./EnumTypeEnum-1.0.17-7ffcf33a.js","./RadioGroup-1.0.17-46153993.js","./Radio-1.0.17-2bbb6717.js","./FormControlLabel-1.0.17-cc31d0c1.js"],import.meta.url)),a=r.lazy(()=>b(()=>import("./FieldDate-1.0.17-68b33689.js"),["./FieldDate-1.0.17-68b33689.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./FormContainer-1.0.17-c419c351.js","./useScreenSize-1.0.17-44173319.js","./ActionsDml-1.0.17-9041b8e8.js","./useStoreTable-1.0.17-fdcf1717.js","./CardActions-1.0.17-7e33ba01.js","./FormContainer-1.0.17-5da27d24.css","./useMobilePicker-1.0.17-7c45344d.js","./DialogContent-1.0.17-9628df83.js","./Menu-1.0.17-09126381.js","./InputAdornment-1.0.17-012556cc.js","./Select-1.0.17-745624d0.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./TargetEnum-1.0.17-1e1ba2c5.js","./Close-1.0.17-6c546366.js","./AdapterDayjs-1.0.17-df1d96b0.js","./DatePicker-1.0.17-e7f585a0.js","./dateViewRenderers-1.0.17-d51d277e.js"],import.meta.url)),ii=r.lazy(()=>b(()=>import("./FieldDatetime-1.0.17-1f7f24fb.js"),["./FieldDatetime-1.0.17-1f7f24fb.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./FormContainer-1.0.17-c419c351.js","./useScreenSize-1.0.17-44173319.js","./ActionsDml-1.0.17-9041b8e8.js","./useStoreTable-1.0.17-fdcf1717.js","./CardActions-1.0.17-7e33ba01.js","./FormContainer-1.0.17-5da27d24.css","./useMobilePicker-1.0.17-7c45344d.js","./DialogContent-1.0.17-9628df83.js","./Menu-1.0.17-09126381.js","./InputAdornment-1.0.17-012556cc.js","./Select-1.0.17-745624d0.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./TargetEnum-1.0.17-1e1ba2c5.js","./Close-1.0.17-6c546366.js","./AdapterDayjs-1.0.17-df1d96b0.js","./DateTimePicker-1.0.17-88f02f82.js","./Tabs-1.0.17-a2a1c721.js","./date-time-utils-1.0.17-c30caadb.js","./MenuItem-1.0.17-ed8ab45a.js","./dateViewRenderers-1.0.17-d51d277e.js"],import.meta.url)),si=r.lazy(()=>b(()=>import("./FieldTime-1.0.17-42f0434c.js"),["./FieldTime-1.0.17-42f0434c.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./FormContainer-1.0.17-c419c351.js","./useScreenSize-1.0.17-44173319.js","./ActionsDml-1.0.17-9041b8e8.js","./useStoreTable-1.0.17-fdcf1717.js","./CardActions-1.0.17-7e33ba01.js","./FormContainer-1.0.17-5da27d24.css","./useMobilePicker-1.0.17-7c45344d.js","./DialogContent-1.0.17-9628df83.js","./Menu-1.0.17-09126381.js","./InputAdornment-1.0.17-012556cc.js","./Select-1.0.17-745624d0.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./TargetEnum-1.0.17-1e1ba2c5.js","./Close-1.0.17-6c546366.js","./AdapterDayjs-1.0.17-df1d96b0.js","./TimePicker-1.0.17-43c48cfc.js","./date-time-utils-1.0.17-c30caadb.js","./MenuItem-1.0.17-ed8ab45a.js"],import.meta.url)),ri=r.lazy(()=>b(()=>import("./FieldCheckbox-1.0.17-fb65d496.js"),["./FieldCheckbox-1.0.17-fb65d496.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./FormControlLabel-1.0.17-cc31d0c1.js","./Checkbox-1.0.17-3dddd4e7.js"],import.meta.url)),di=r.lazy(()=>b(()=>import("./ColumnWpMedia-1.0.17-55ab5872.js"),["./ColumnWpMedia-1.0.17-55ab5872.js","./main-1.0.17.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./index.esm-1.0.17-78a91bbf.js","./index.esm-1.0.17-3107c6b2.js","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useScreenSize-1.0.17-44173319.js"],import.meta.url)),_i=r.lazy(()=>b(()=>import("./ColumnHyperlink-1.0.17-acf5dcc3.js"),["./ColumnHyperlink-1.0.17-acf5dcc3.js","./main-1.0.17.js","./usePrepareStore-1.0.17-a8be8b2f.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./TargetEnum-1.0.17-1e1ba2c5.js","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./Close-1.0.17-6c546366.js","./FormControlLabel-1.0.17-cc31d0c1.js","./Checkbox-1.0.17-3dddd4e7.js"],import.meta.url)),fi=({appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})=>{if(h.debug(v,d,j,P,e,s,i,E,y,x,z),i!=null&&i.media[d]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(i==null?void 0:i.media[d]))return _.jsx(r.Suspense,{children:_.jsx(di,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z,columnMedia:E==null?void 0:E.media[d],mediaType:i==null?void 0:i.media[d]})});if((i==null?void 0:i.media[d])==="HyperlinkObject")return _.jsx(r.Suspense,{children:_.jsx(_i,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})})}else{if(e.column_type.toLowerCase()==="tinyint(1)")return _.jsx(r.Suspense,{children:_.jsx(ri,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});if(s.lookup!==void 0)return _.jsx(C,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})}switch(e.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return _.jsx(r.Suspense,{children:_.jsx(l,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"enum":return _.jsx(r.Suspense,{children:_.jsx(m,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"set":return _.jsx(r.Suspense,{children:_.jsx(o,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});case"time":return _.jsx(r.Suspense,{children:_.jsx(si,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"date":return _.jsx(r.Suspense,{children:_.jsx(a,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"datetime":case"timestamp":return _.jsx(r.Suspense,{children:_.jsx(ii,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A,language:z})});case"tinytext":case"text":case"mediumtext":case"longtext":return _.jsx(r.Suspense,{children:_.jsx(D,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})});default:return _.jsx(r.Suspense,{children:_.jsx(n,{appId:v,columnName:d,columnValue:j,columnInitialValue:P,columnMetaData:e,storeColumn:s,columnValidation:f,onColumnChange:L,metaData:i,context:E,storeTable:y,storeForm:x,formMode:k,locale:A})})}};export{fi as default};
