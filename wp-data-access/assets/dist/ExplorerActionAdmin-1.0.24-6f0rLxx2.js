const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsActions-1.0.24-jlPtUbLf.js","./cm-1.0.24-lBsX3THK.js","./redux-1.0.24-Bx8jJ3ee.js","./vendor-1.0.24-BmpNFhoq.js","./RestApi-1.0.24-BCmVwqnT.js","./lib-1.0.24-up-HxGpi.js","./loglevel-1.0.24-BZ7XahX3.js","./lodash-1.0.24-CC2RnyUh.js","./moment-1.0.24-C5S46NFB.js","./ActionsAdmin-1.0.24-COUjpFzW.js","./notistack-1.0.24-EH6RgmCJ.js","./ConfirmDialog-1.0.24-5s_WiKiN.js","./AdminTheme-1.0.24-DxOFSSNd.js","./Typography-1.0.24-DtpcakL_.js","./DialogContent-1.0.24-o2zFJd9S.js","./index-1.0.24-CyelUMLZ.js","./iconBase-1.0.24-C7lJg7VQ.js","./Menu-1.0.24-Bmzze4W5.js","./ThemeProvider-1.0.24-koXQmW7k.js","./CardContent-1.0.24-DpYcLPhl.js","./ConfirmDialog-1.0.24--D4jr2go.css","./Spinner-1.0.24-DzEoy0TD.js","./index-1.0.24-DqBQ5tn0.js","./index-1.0.24-Cm6is9nS.js","./useExplorer-1.0.24-Cts7Zoll.js","./FormHelperText-1.0.24-dIoAVumM.js","./useFormControl-1.0.24-BVJe4wXv.js","./TextField-1.0.24-CX3Aj71c.js","./FormLabel-1.0.24-DNrTGbzF.js","./useControlled-1.0.24-DnsqB4VW.js","./createSvgIcon-1.0.24-BKX7HR5-.js","./MenuItem-1.0.24-cnqjqUCU.js","./FormControlLabel-1.0.24-jTuSRk-Y.js","./Switch-1.0.24-BzowSg2t.js","./SwitchBase-1.0.24-k3CO2XxE.js","./Tooltip-1.0.24-C0iSk1Jx.js","./Popper-1.0.24-pV6SBss6.js","./SettingsTable-1.0.24-BQdqAeYN.js","./Accordion-1.0.24-uvRe3lte.js","./Collapse-1.0.24-Xb_bb7om.js","./AccordionSummary-1.0.24-B564M2Bj.js","./AccordionDetails-1.0.24-DwKVwnKj.js","./RadioGroup-1.0.24-C4yZZRVK.js","./Radio-1.0.24-DPbrWB-2.js","./main-1.0.24.js","./TabPanel-1.0.24-DAjZ0-bn.js","./ActionsExplorer-1.0.24-C9nnL7_n.js","./index-1.0.24-B9zHNwKy.js","./settings-1.0.24-CtEnxau0.js","./settings-1.0.24-Bx2jvYL6.css","./ActionsDml-1.0.24-BgEAxcii.js","./ExplorerActionEnum-1.0.24-eclZgKpy.js","./useUiExplorerAction-1.0.24-DqHIrYIX.js","./SettingsColumn-1.0.24-BB_AS9d5.js","./SettingsRestApi-1.0.24-C0HBtBse.js","./index-1.0.24-vo0tC6xY.js","./Autocomplete-1.0.24-C17x-b9y.js","./Close-1.0.24-16O9KsVp.js","./main-1.0.24-DdBzJTGm.css","./SettingsReset-1.0.24-BOlIfuTt.js","./ActionsSettings-1.0.24-Cyf5k2fb.js","./TargetEnum-1.0.24-DPFnTxiX.js","./ScopeEnum-1.0.24-B4DDvIDj.js","./ResizableDrawer-1.0.24-Do6nC7lH.js","./useScreenSize-1.0.24-18t2sPqy.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.24-lBsX3THK.js";import{_ as m}from"./main-1.0.24.js";import{r as s}from"./redux-1.0.24-Bx8jJ3ee.js";import{B as se,a as oe,T as re,b as B}from"./TabPanel-1.0.24-DAjZ0-bn.js";import{T as j,C as ae}from"./ConfirmDialog-1.0.24-5s_WiKiN.js";import{A as ie,T as ne,M as le}from"./index-1.0.24-CyelUMLZ.js";import{u as ce,a as me}from"./RestApi-1.0.24-BCmVwqnT.js";import{l,b6 as P,S as O,aA as pe,T as w,Q as N,P as ue,a as V,b as p,b7 as de,s as ge}from"./lib-1.0.24-up-HxGpi.js";import{A as G}from"./AdminTheme-1.0.24-DxOFSSNd.js";import{S as f,B as _}from"./Spinner-1.0.24-DzEoy0TD.js";import{s as xe}from"./ActionsExplorer-1.0.24-C9nnL7_n.js";import{e as u}from"./notistack-1.0.24-EH6RgmCJ.js";import{f as fe,i as Se}from"./index-1.0.24-B9zHNwKy.js";import{B as he}from"./settings-1.0.24-CtEnxau0.js";import{g as je}from"./ActionsDml-1.0.24-BgEAxcii.js";import{T as F}from"./Typography-1.0.24-DtpcakL_.js";import{I as A}from"./iconBase-1.0.24-C7lJg7VQ.js";import{C as U,a as H,B as E}from"./CardContent-1.0.24-DpYcLPhl.js";import{E as _e}from"./ExplorerActionEnum-1.0.24-eclZgKpy.js";import{u as Ae}from"./useUiExplorerAction-1.0.24-DqHIrYIX.js";const Ee=()=>{const t=ce(i=>i.manager.settings);return l.debug("managerSettings",t),t},be=s.lazy(()=>m(()=>import("./SettingsActions-1.0.24-jlPtUbLf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]),import.meta.url)),ve=s.lazy(()=>m(()=>import("./SettingsTable-1.0.24-BQdqAeYN.js"),__vite__mapDeps([37,1,2,3,15,13,5,6,7,8,16,10,4,38,17,18,29,39,40,41,25,26,28,42,43,34,30,44,45,14,11,12,19,20,21,46,47,48,31,49,50,51,52]),import.meta.url)),Te=s.lazy(()=>m(()=>import("./SettingsColumn-1.0.24-BB_AS9d5.js"),__vite__mapDeps([53,1,2,3,15,13,5,6,7,8,16,10,4,38,17,18,29,39,40,41,25,26,21,27,28,30,31,44,45,14,11,12,19,20,46,47,48,49,50,51,52]),import.meta.url)),Ce=s.lazy(()=>m(()=>import("./SettingsRestApi-1.0.24-C0HBtBse.js"),__vite__mapDeps([54,1,2,3,15,13,5,6,7,8,16,10,4,55,38,17,18,29,39,40,41,21,28,26,32,33,34,25,42,43,30,56,27,57,36,24,44,45,14,11,12,19,20,46,47,48,31,49,50,51,52,58]),import.meta.url)),De=s.lazy(()=>m(()=>import("./SettingsReset-1.0.24-BOlIfuTt.js"),__vite__mapDeps([59,1,2,3,15,13,5,6,7,8,16,10,60,4,61,62,11,12,14,17,18,19,20,38,29,39,40,41,25,26]),import.meta.url)),Me=s.lazy(()=>m(()=>import("./ResizableDrawer-1.0.24-Do6nC7lH.js"),__vite__mapDeps([63,1,2,3,64,5,6,7,8,4,13,18,16,17,15,10]),import.meta.url)),ke=({dbs:t,tbl:i,typ:S})=>{var R,z;l.debug(t,i,S);const c=me(),[q,K]=s.useState(P.getSelectors().selectManagerSettings(O.getState().manager));l.debug(q);const[d,b]=s.useState(""),[v,Q]=s.useState(!1),[T,W]=s.useState({}),[C,g]=s.useState(!1),[X,D]=s.useState(!1);s.useEffect(()=>{v||Y()},[t,i]);const Y=()=>{je(t,i,!0,a=>{var o,I;const r=a==null?void 0:a.data;if(l.debug("response data",t,i,r),(o=r==null?void 0:r.access)!=null&&o.select&&Array.isArray(r.access.select)&&r.access.select.includes("POST")){const n={...r.settings};n.list_labels={...r.table_labels},n.form_labels={...r.form_labels},n.column_media={...r.wp_media},delete n.hyperlinks,delete n.ui,delete n.wp;const L={...r};W(L),c(de({settings:n,metaData:L})),Q(!0)}else{let n=p.contactSupport;(I=a==null?void 0:a.data)!=null&&I.message&&(n=a.data.message+" - check console for more information"),l.error(n),b(n)}},a=>{l.error("error",a),b(a??p.contactSupport)})};s.useEffect(()=>{d!==""&&(c(pe({error:d})),c(w({})),c(N({})))},[d]);const $=Ee(),J=((R=G)==null?void 0:R.palette.mode)===ue.LIGHT?(z=G)==null?void 0:z.palette.primary.main:"",M=a=>{c(ge({anchor:a}))},x=()=>{c(N({})),c(w({}))},h=()=>{C?D(!0):x()},k=()=>{const a={...$};let r=!1;xe(t,i,a,o=>{if(o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":u(o.message,{variant:"success"});break;case"info":u(o.message,{variant:"info"});break;default:l.error(o),u(o.message??p.contactSupport,{variant:"error"}),r=!0}else l.error(o),u(p.contactSupport,{variant:"error"}),r=!0},o=>{l.error(o),u(o??p.contactSupport,{variant:"error"}),r=!0}),r||K(P.getSelectors().selectManagerSettings(O.getState().manager)),g(!1)},Z=()=>{C?(k(),setTimeout(()=>{x()},1e3)):x()},[y,ee]=s.useState(0),te=s.useMemo(()=>[{title:"Actions",icon:e.jsx(fe,{})},{title:"Settings",icon:e.jsx(Se,{})}],[]);return d!==""?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Me,{closeDrawer:h,children:[e.jsxs(ie,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ne,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(_,{sx:{flexGrow:1},children:[e.jsx(F,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(F,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[t," - ",i]})]}),e.jsx(j,{title:"Dock to left",position:"bottom",children:e.jsx(A,{onClick:()=>{M(V.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(se,{})})}),e.jsx(j,{title:"Dock to right",position:"bottom",children:e.jsx(A,{onClick:()=>{M(V.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(oe,{})})}),e.jsx(j,{title:"Close",position:"bottom",children:e.jsx(A,{onClick:h,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(le,{})})})]}),e.jsx(he,{menuItems:te,menuIndex:y,setMenu:ee})]}),e.jsx(U,{className:"pp-settings-container",children:e.jsx(H,{sx:{padding:0,margin:0},children:v?e.jsx(re,{value:y,children:e.jsxs(_,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(B,{value:0,children:e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(be,{dbs:t,tbl:i,typ:S,metaData:T})})}),e.jsx(B,{value:1,children:e.jsxs(s.Suspense,{fallback:e.jsx(f,{}),children:[e.jsx(ve,{dbs:t,tbl:i,setIsUpdated:g}),e.jsx(Te,{dbs:t,tbl:i,setIsUpdated:g}),e.jsx(Ce,{dbs:t,tbl:i,typ:S,metaData:T,setIsUpdated:g}),e.jsx(De,{dbs:t,tbl:i})]})})]})}):e.jsx(_,{sx:{padding:"30px"},children:e.jsx(f,{title:"Loading data..."})})})}),e.jsx(U,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:J},children:e.jsxs(H,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(E,{variant:"outlined",className:"footer_action_button_apply",onClick:k,children:"Apply"}),e.jsx(E,{variant:"outlined",className:"footer_action_button",onClick:Z,children:"OK"}),e.jsx(E,{variant:"outlined",className:"footer_action_button",onClick:h,children:"Cancel"})]})})]})}),e.jsx(ae,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:X,setOpen:D,onConfirm:()=>{x()}})]})},ye=()=>{const t=Ae();return e.jsx(e.Fragment,{children:t!==void 0&&t.action===_e.MANAGE&&e.jsx(ke,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},$e=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{$e as E,Ee as u};
