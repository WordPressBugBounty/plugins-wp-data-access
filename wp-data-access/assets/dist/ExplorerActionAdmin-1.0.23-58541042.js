import{r as o,_ as m,l,bH as _,S as w,aI as oe,Z as B,Y as N,P as ae,j as e,A as O,C as p,bI as re,s as ie,e as d}from"./main-1.0.23.js";import{B as ne,a as le,T as ce,b as me,c as V}from"./TabPanel-1.0.23-ecd53346.js";import{T as S,C as pe}from"./ConfirmDialog-1.0.23-f318040f.js";import{A as de,T as ue,M as xe}from"./index.esm-1.0.23-ba0465a2.js";import{a as ge,u as fe}from"./RestApi-1.0.23-cc179eb9.js";import{A as G}from"./AdminTheme-1.0.23-7044caf5.js";import{S as f,B as b}from"./Spinner-1.0.23-90ab83ff.js";import{s as he}from"./ActionsExplorer-1.0.23-02905de3.js";import{g as je}from"./ActionsDml-1.0.23-e3901c9d.js";/* empty css                        */import{T as W}from"./Typography-1.0.23-19a0fd3e.js";import{I as v}from"./iconBase-1.0.23-43ac6f06.js";import{C as F,a as H,B as T}from"./CardContent-1.0.23-cd3f2c87.js";import{T as U}from"./Tabs-1.0.23-d047285a.js";import{E as _e}from"./ExplorerActionEnum-1.0.23-304129ea.js";import{u as Se}from"./useExplorerAction-1.0.23-e3dff7f6.js";import"./DialogContent-1.0.23-79893b13.js";import"./Modal-1.0.23-3fe42627.js";import"./ThemeProvider-1.0.23-f3e5cbc1.js";import"./createSvgIcon-1.0.23-f9410a01.js";const be=o.lazy(()=>m(()=>import("./SettingsActions-1.0.23-ed9aed8e.js"),["./SettingsActions-1.0.23-ed9aed8e.js","./main-1.0.23.js","./RestApi-1.0.23-cc179eb9.js","./ActionsAdmin-1.0.23-4f708194.js","./ConfirmDialog-1.0.23-f318040f.js","./AdminTheme-1.0.23-7044caf5.js","./Typography-1.0.23-19a0fd3e.js","./DialogContent-1.0.23-79893b13.js","./index.esm-1.0.23-ba0465a2.js","./iconBase-1.0.23-43ac6f06.js","./Modal-1.0.23-3fe42627.js","./CardContent-1.0.23-cd3f2c87.js","./ConfirmDialog-1.0.23-9bff3a93.css","./Spinner-1.0.23-90ab83ff.js","./index.esm-1.0.23-da98f1a9.js","./index-1.0.23-75b15946.js","./FormHelperText-1.0.23-83597bdf.js","./useFormControl-1.0.23-a0ae6ce7.js","./TextField-1.0.23-1657e9d4.js","./FormLabel-1.0.23-71a056b2.js","./Menu-1.0.23-e889464a.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popover-1.0.23-6c9c65a6.js","./Grow-1.0.23-40b2ff68.js","./useControlled-1.0.23-1e71c28b.js","./createSvgIcon-1.0.23-f9410a01.js","./MenuItem-1.0.23-0a5da249.js","./FormControlLabel-1.0.23-1ad68af6.js","./createStyled-1.0.23-528f26c2.js","./Switch-1.0.23-86b06b05.js","./SwitchBase-1.0.23-adccc77c.js","./index-1.0.23-9af490ae.js","./Tooltip-1.0.23-1b58a848.js","./Popper-1.0.23-4a0d0616.js"],import.meta.url)),ve=o.lazy(()=>m(()=>import("./SettingsTable-1.0.23-94e32b9c.js"),["./SettingsTable-1.0.23-94e32b9c.js","./main-1.0.23.js","./index.esm-1.0.23-ba0465a2.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./RestApi-1.0.23-cc179eb9.js","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./useControlled-1.0.23-1e71c28b.js","./Collapse-1.0.23-a92fc278.js","./AccordionDetails-1.0.23-ad785ba6.js","./FormHelperText-1.0.23-83597bdf.js","./useFormControl-1.0.23-a0ae6ce7.js","./FormLabel-1.0.23-71a056b2.js","./RadioGroup-1.0.23-053476ee.js","./Radio-1.0.23-7006053b.js","./SwitchBase-1.0.23-adccc77c.js","./createSvgIcon-1.0.23-f9410a01.js","./Modal-1.0.23-3fe42627.js"],import.meta.url)),Te=o.lazy(()=>m(()=>import("./SettingsColumn-1.0.23-75e19ab8.js"),["./SettingsColumn-1.0.23-75e19ab8.js","./main-1.0.23.js","./index.esm-1.0.23-ba0465a2.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./RestApi-1.0.23-cc179eb9.js","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./useControlled-1.0.23-1e71c28b.js","./Collapse-1.0.23-a92fc278.js","./AccordionDetails-1.0.23-ad785ba6.js","./FormHelperText-1.0.23-83597bdf.js","./useFormControl-1.0.23-a0ae6ce7.js","./Spinner-1.0.23-90ab83ff.js","./TextField-1.0.23-1657e9d4.js","./FormLabel-1.0.23-71a056b2.js","./Menu-1.0.23-e889464a.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popover-1.0.23-6c9c65a6.js","./Modal-1.0.23-3fe42627.js","./Grow-1.0.23-40b2ff68.js","./createSvgIcon-1.0.23-f9410a01.js","./MenuItem-1.0.23-0a5da249.js"],import.meta.url)),Ae=o.lazy(()=>m(()=>import("./SettingsRestApi-1.0.23-b2afd096.js"),["./SettingsRestApi-1.0.23-b2afd096.js","./main-1.0.23.js","./index.esm-1.0.23-ba0465a2.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./RestApi-1.0.23-cc179eb9.js","./index-1.0.23-fea3ac27.js","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./useControlled-1.0.23-1e71c28b.js","./Collapse-1.0.23-a92fc278.js","./AccordionDetails-1.0.23-ad785ba6.js","./Spinner-1.0.23-90ab83ff.js","./FormLabel-1.0.23-71a056b2.js","./useFormControl-1.0.23-a0ae6ce7.js","./FormControlLabel-1.0.23-1ad68af6.js","./createStyled-1.0.23-528f26c2.js","./Switch-1.0.23-86b06b05.js","./SwitchBase-1.0.23-adccc77c.js","./FormHelperText-1.0.23-83597bdf.js","./RadioGroup-1.0.23-053476ee.js","./Radio-1.0.23-7006053b.js","./createSvgIcon-1.0.23-f9410a01.js","./Modal-1.0.23-3fe42627.js","./Autocomplete-1.0.23-a5bc1209.js","./TextField-1.0.23-1657e9d4.js","./Menu-1.0.23-e889464a.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popover-1.0.23-6c9c65a6.js","./Grow-1.0.23-40b2ff68.js","./Close-1.0.23-ea28bfa6.js","./Popper-1.0.23-4a0d0616.js","./main-1.0.23-5f42aabb.css"],import.meta.url)),Ee=o.lazy(()=>m(()=>import("./SettingsReset-1.0.23-1c0072d3.js"),["./SettingsReset-1.0.23-1c0072d3.js","./main-1.0.23.js","./index.esm-1.0.23-ba0465a2.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./ActionsSettings-1.0.23-a601e9bf.js","./RestApi-1.0.23-cc179eb9.js","./TargetEnum-1.0.23-b82380d5.js","./ScopeEnum-1.0.23-7caf102d.js","./ConfirmDialog-1.0.23-f318040f.js","./AdminTheme-1.0.23-7044caf5.js","./DialogContent-1.0.23-79893b13.js","./Modal-1.0.23-3fe42627.js","./CardContent-1.0.23-cd3f2c87.js","./ConfirmDialog-1.0.23-9bff3a93.css","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./useControlled-1.0.23-1e71c28b.js","./Collapse-1.0.23-a92fc278.js","./AccordionDetails-1.0.23-ad785ba6.js","./FormHelperText-1.0.23-83597bdf.js","./useFormControl-1.0.23-a0ae6ce7.js"],import.meta.url)),Ce=o.lazy(()=>m(()=>import("./ResizableDrawer-1.0.23-5dc28853.js"),["./ResizableDrawer-1.0.23-5dc28853.js","./main-1.0.23.js","./RestApi-1.0.23-cc179eb9.js","./useScreenSize-1.0.23-b1e8b94a.js","./Typography-1.0.23-19a0fd3e.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./index.esm-1.0.23-ba0465a2.js","./iconBase-1.0.23-43ac6f06.js","./Modal-1.0.23-3fe42627.js"],import.meta.url)),De=({dbs:a,tbl:i,typ:h})=>{var L,R;l.debug(a,i,h);const c=ge(),[Y,q]=o.useState(_(w.getState()));l.debug(Y);const[u,A]=o.useState(""),[E,K]=o.useState(!1),[C,X]=o.useState({}),[D,x]=o.useState(!1),[Z,k]=o.useState(!1);o.useEffect(()=>{E||J()},[a,i]);const J=()=>{je(a,i,!0,r=>{var s,I;const t=r==null?void 0:r.data;if(l.debug("response data",a,i,t),(s=t==null?void 0:t.access)!=null&&s.select&&Array.isArray(t.access.select)&&t.access.select.includes("POST")){const n={...t.settings};n.list_labels={...t.table_labels},n.form_labels={...t.form_labels},n.column_media={...t.wp_media},delete n.hyperlinks,delete n.ui,delete n.wp;const P={...t};X(P),c(re({settings:n,metaData:P})),K(!0)}else{let n=p.contactSupport;(I=r==null?void 0:r.data)!=null&&I.message&&(n=r.data.message+" - check console for more information"),l.error(n),A(n)}},r=>{l.error("error",r),A(r??p.contactSupport)})};o.useEffect(()=>{u!==""&&(c(oe({error:u})),c(B({})),c(N({})))},[u]);const M=fe(r=>_(r));l.debug(M);const Q=((L=G)==null?void 0:L.palette.mode)===ae.LIGHT?(R=G)==null?void 0:R.palette.primary.main:"",y=r=>{c(ie({anchor:r}))},g=()=>{c(N({})),c(B({}))},j=()=>{D?k(!0):g()},z=()=>{const r={...M};let t=!1;he(a,i,r,s=>{if(s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":d(s.message,{variant:"success"});break;case"info":d(s.message,{variant:"info"});break;default:l.error(s),d(s.message??p.contactSupport,{variant:"error"}),t=!0}else l.error(s),d(p.contactSupport,{variant:"error"}),t=!0},s=>{l.error(s),d(s??p.contactSupport,{variant:"error"}),t=!0}),t||q(_(w.getState())),x(!1)},$=()=>{D?(z(),setTimeout(()=>{g()},1e3)):g()},[ee,te]=o.useState("1"),se=(r,t)=>{te(t)};return u!==""?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Ce,{closeDrawer:j,children:[e.jsx(de,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(ue,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(b,{sx:{flexGrow:1},children:[e.jsx(W,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(W,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[a," - ",i]})]}),e.jsx(S,{title:"Dock to left",position:"bottom",children:e.jsx(v,{onClick:()=>{y(O.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ne,{})})}),e.jsx(S,{title:"Dock to right",position:"bottom",children:e.jsx(v,{onClick:()=>{y(O.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(le,{})})}),e.jsx(S,{title:"Close",position:"bottom",children:e.jsx(v,{onClick:j,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(xe,{})})})]})}),e.jsx(F,{className:"pp-settings-container",children:e.jsx(H,{sx:{padding:0,margin:0},children:E?e.jsxs(ce,{value:ee,children:[e.jsxs(me,{variant:"fullWidth",textColor:"primary",onChange:se,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(U,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(U,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(b,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(V,{value:"1",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(be,{dbs:a,tbl:i,typ:h,metaData:C})})}),e.jsx(V,{value:"2",children:e.jsxs(o.Suspense,{fallback:e.jsx(f,{}),children:[e.jsx(ve,{dbs:a,tbl:i,setIsUpdated:x}),e.jsx(Te,{dbs:a,tbl:i,setIsUpdated:x}),e.jsx(Ae,{dbs:a,tbl:i,typ:h,metaData:C,setIsUpdated:x}),e.jsx(Ee,{dbs:a,tbl:i})]})})]})]}):e.jsx(b,{sx:{padding:"30px"},children:e.jsx(f,{title:"Loading data..."})})})}),e.jsx(F,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:Q},children:e.jsxs(H,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(T,{variant:"outlined",className:"footer_action_button_apply",onClick:z,children:"Apply"}),e.jsx(T,{variant:"outlined",className:"footer_action_button",onClick:$,children:"OK"}),e.jsx(T,{variant:"outlined",className:"footer_action_button",onClick:j,children:"Cancel"})]})})]})}),e.jsx(pe,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:Z,setOpen:k,onConfirm:()=>{g()}})]})},Ke=()=>{const a=Se();return e.jsx(e.Fragment,{children:a!==void 0&&a.action===_e.MANAGE&&e.jsx(De,{dbs:a.dbs,tbl:a.tbl,typ:a.typ})})};export{Ke as default};
