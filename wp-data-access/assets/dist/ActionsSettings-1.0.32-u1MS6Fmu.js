import{l as c,C as d,bm as m,N as C,S as p,as as b,b as u,a2 as T,ar as h}from"./lib-1.0.32-CBsDffd2.js";import{R as f}from"./RestApi-1.0.32-Bp_RRidr.js";import{T as l}from"./TargetEnum-1.0.32-DPFnTxiX.js";const _=(t,n,o,i,s,e,a,g=!1)=>{c.debug(t,n,o,i,s),f(d.appUrlSettings,{action:"admin_settings",dbs:o,tbl:i,settings:JSON.stringify({scope:t,target:n,data:s})},e,a,g)},y=(t,n,o,i,s,e,a,g,r=!1)=>{const S={app_id:t,cnt_id:n,target:o,settings:JSON.stringify(i),theme:JSON.stringify(e)};s!==void 0&&(S.chart=JSON.stringify(s)),f(d.appUrlAppSettings,S,a,g,r)},N=(t,n,o,i,s=!1)=>{const e=m(t);c.debug(e);const{state:a,...g}=T.getSelectors().selectTableById(p.getState().tables,t);if(c.debug(a,g),e.app_id){const r={...h.getSelectors().selectChart(p.getState().charts,t)};delete r.data,c.debug(r);const{...S}=b.getSelectors().selectThemeById(p.getState().themes,t);c.debug(S),y(e.app_id,e.cnt_id,l.TABLE,g,r,S,o,i,s)}else e.dbs.trim()!==""&&e.tbl.trim()!==""?_(n,l.TABLE,e.dbs,e.tbl,g,o,i,s):(c.error("error","Missing data source"),i(u.contactSupport))},v=(t,n,o,i,s,e=!1)=>{const a=m(t);c.debug(a);const{state:g,...r}=C.getSelectors().selectForm(p.getState().forms,t);if(c.debug(g,r),a.app_id){const{...S}=b.getSelectors().selectThemeById(p.getState().themes,t);c.debug(S),y(a.app_id,a.cnt_id,o,r,void 0,S,i,s,e)}else a.dbs.trim()!==""&&a.tbl.trim()!==""?_(n,o,a.dbs,a.tbl,r,i,s,e):(c.error("error","Missing data source"),s(u.contactSupport))},J=(t,n,o,i=!1)=>{const s=m(t);c.debug(s,t);const e=s.app_id,a=s.cnt_id,g=h.getSelectors().selectChart(p.getState().charts,t);c.debug(g);const{...r}=b.getSelectors().selectThemeById(p.getState().themes,t);c.debug(r),f(d.appUrlAppSettings,{app_id:e,cnt_id:a,target:l.CHART,settings:JSON.stringify(g),theme:JSON.stringify(r)},n,o,i)};export{J as a,N as b,v as c,_ as d,y as s};
