import{a1 as Z,l as c,r,_ as R,a2 as H,S as k,a3 as ee,a4 as se,a as w,j as t,a5 as te,a6 as oe,a7 as le,f as re,a8 as ae,a9 as ne,aa as ie,ab as ce,ac as de,ad as ue}from"./main-1.0.18.js";import{u as A,a as pe}from"./RestApi-1.0.18-cb72bd79.js";import{R as Te,C as be,u as ge,a as fe,b as xe,D as i,c as me,B as Ee,d as he,e as Se,f as je,g as ve,A as _e}from"./useTheme-1.0.18-c1f3f722.js";import{A as Ce,T as ye,e as Pe,M as Re}from"./index.esm-1.0.18-12f13c4a.js";import{F as y}from"./FallbackSpinner-1.0.18-e10446f4.js";import{B as S}from"./Spinner-1.0.18-de8df990.js";import{T as V}from"./Tooltip-1.0.18-5f32f0fd.js";import{I as W}from"./iconBase-1.0.18-3c21f5e2.js";import{T as Ae}from"./ThemeProvider-1.0.18-247b72cc.js";var P=(e=>(e[e.SELECT=0]="SELECT",e[e.INSERT=1]="INSERT",e[e.UPDATE=2]="UPDATE",e[e.DELETE=3]="DELETE",e[e.EXPORT=4]="EXPORT",e[e.IMPORT=5]="IMPORT",e[e.VIEW=6]="VIEW",e))(P||{}),b=(e=>(e[e.INSERT=0]="INSERT",e[e.UPDATE=1]="UPDATE",e[e.VIEW=2]="VIEW",e))(b||{}),Be=(e=>(e[e.INSERT=0]="INSERT",e[e.UPDATE=1]="UPDATE",e[e.VIEW=2]="VIEW",e))(Be||{});const De=e=>{const a=A(u=>Z());return c.debug("elevation",a),a},Le=r.lazy(()=>R(()=>import("./TableContainer-1.0.18-20cdfb1b.js").then(e=>e.T),["./TableContainer-1.0.18-20cdfb1b.js","./main-1.0.18.js","./AdminTheme-1.0.18-73e13a4f.js","./Typography-1.0.18-dc3c0740.js","./FallbackSpinner-1.0.18-e10446f4.js","./Spinner-1.0.18-de8df990.js","./RestApi-1.0.18-cb72bd79.js","./ActionsSettings-1.0.18-41fd8841.js","./TargetEnum-1.0.18-b82380d5.js","./ConfirmDialog-1.0.18-eb1f3988.js","./DialogContent-1.0.18-5570cba4.js","./index.esm-1.0.18-12f13c4a.js","./iconBase-1.0.18-3c21f5e2.js","./Modal-1.0.18-870f459d.js","./CardContent-1.0.18-3d5e5525.js","./ConfirmDialog-1.0.18-9bff3a93.css","./TabPanel-1.0.18-2d718e76.js","./useScreenSize-1.0.18-62aeb4c4.js","./ThemeProvider-1.0.18-247b72cc.js","./Tabs-1.0.18-d7d53c1e.js","./createSvgIcon-1.0.18-dcf0276e.js","./ScopeEnum-1.0.18-7caf102d.js","./useTheme-1.0.18-c1f3f722.js","./colorManipulator-1.0.18-95bf61ec.js","./settings-1.0.18-871bbe9f.css"],import.meta.url)),I=r.lazy(()=>R(()=>import("./FormContainer-1.0.18-00c740a4.js").then(e=>e.F),["./FormContainer-1.0.18-00c740a4.js","./main-1.0.18.js","./Spinner-1.0.18-de8df990.js","./Typography-1.0.18-dc3c0740.js","./AdminTheme-1.0.18-73e13a4f.js","./RestApi-1.0.18-cb72bd79.js","./ActionsDml-1.0.18-7e1a74e9.js","./useTheme-1.0.18-c1f3f722.js","./colorManipulator-1.0.18-95bf61ec.js","./iconBase-1.0.18-3c21f5e2.js","./index.esm-1.0.18-12f13c4a.js","./useScreenSize-1.0.18-62aeb4c4.js","./useStoreTable-1.0.18-8a593f98.js","./purify.es-1.0.18-68816782.js","./dayjs.min-1.0.18-7ea54188.js","./FallbackSpinner-1.0.18-e10446f4.js","./CardContent-1.0.18-3d5e5525.js","./CardActions-1.0.18-9693078a.js","./ThemeProvider-1.0.18-247b72cc.js","./FormContainer-1.0.18-5da27d24.css"],import.meta.url)),U=r.lazy(()=>R(()=>import("./TableChartDock-1.0.18-41baea01.js"),["./TableChartDock-1.0.18-41baea01.js","./main-1.0.18.js","./Chart-1.0.18-142bb265.js","./useTheme-1.0.18-c1f3f722.js","./RestApi-1.0.18-cb72bd79.js","./Typography-1.0.18-dc3c0740.js","./colorManipulator-1.0.18-95bf61ec.js","./iconBase-1.0.18-3c21f5e2.js","./Spinner-1.0.18-de8df990.js","./index.esm-1.0.18-12f13c4a.js","./Tooltip-1.0.18-5f32f0fd.js","./ThemeProvider-1.0.18-247b72cc.js","./Popper-1.0.18-20544c9b.js","./useControlled-1.0.18-12a74006.js","./Grow-1.0.18-4ebc2ce8.js"],import.meta.url)),z=({appId:e})=>{var F,M;c.debug(e);const a=pe(),u=Te(),g=be(),f=De(),j=ge(e),l=fe(e),p=xe(e),x="pp-remove-body-vertical-scrollbar",s=r.useMemo(()=>H(k.getState(),e),[]),h=r.useMemo(()=>{var o,n,m,E,N;return(o=s==null?void 0:s.src)!=null&&o.app_id&&((m=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:m.app_title)!==""?s.app.app[0].app_title:(E=s==null?void 0:s.src)!=null&&E.dbs&&((N=s==null?void 0:s.src)!=null&&N.tbl)?s.src.dbs+" - "+s.src.tbl:"WP Data Access"},[]),d=A(o=>ee(o,e));c.debug("fullScreen",d),r.useEffect(()=>(c.debug(d),()=>{var o;(o=window.document.getElementById(x))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen")}),[d]);const B=r.useMemo(()=>se(k.getState(),e),[e]);c.debug("tableExploring",B);const[T,G]=r.useState(((M=(F=s==null?void 0:s.app)==null?void 0:F.app[0])==null?void 0:M.app_type)==w.REGISTRATION?i.FORM:i.TABLE),[D,$]=r.useState(!1),v=o=>{a(ie({appId:e})),a(ce({appId:e,mode:o})),G(o)};r.useEffect(()=>{window.ppShowForm=function(o){c.debug(o),O(o),v(i.FORM)}},[e]);const X=(o,n)=>{c.debug(o,n),de(e)&&(g(e),n!==void 0&&(u(n),g(n))),o&&$(!D),v(i.TABLE)},[L,O]=r.useState(null),[q,_]=r.useState(b.VIEW),C=(o,n)=>{switch(c.debug(o,n),n){case P.INSERT:_(b.INSERT);break;case P.UPDATE:_(b.UPDATE);break;default:_(b.VIEW)}O(o),v(i.FORM)};let J={};me(e);const K=()=>null,Q=()=>t.jsx(r.Suspense,{fallback:t.jsx(y,{title:p.loadingForm}),children:t.jsx(I,{appId:e,primaryKey:L,formMode:b.INSERT,showTable:()=>{},showForm:C,metaData:s})}),Y=()=>{var o,n,m,E;return((n=(o=s==null?void 0:s.app)==null?void 0:o.app[0])==null?void 0:n.app_type)==w.REGISTRATION?Q():t.jsxs(t.Fragment,{children:[t.jsxs(r.Suspense,{fallback:t.jsx(y,{title:p.loadingTable}),children:[T===i.TABLE&&(l==null?void 0:l.docked)==="top"&&((m=l==null?void 0:l.data)==null?void 0:m.length)>0&&t.jsx(U,{appId:e}),t.jsx(Le,{appId:e,display:T===i.TABLE,refresh:D,showForm:C,metaData:s}),T===i.TABLE&&(l==null?void 0:l.docked)==="bottom"&&((E=l==null?void 0:l.data)==null?void 0:E.length)>0&&t.jsx(S,{sx:{marginTop:"5px"},children:t.jsx(U,{appId:e})})]}),T===i.FORM&&t.jsx(r.Suspense,{fallback:t.jsx(y,{title:p.loadingForm}),children:t.jsx(I,{appId:e,primaryKey:L,formMode:q,showTable:X,showForm:C,metaData:s})})]})};return t.jsxs(S,{className:"pp-component",sx:d?J:{},children:[t.jsx(Ce,{className:"pp-header",elevation:f,position:"relative",sx:{margin:"0 0 5px 0"},children:t.jsxs(ye,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(S,{sx:{display:"block",whiteSpace:"nowrap",fontSize:"18px",lineHeight:"18px",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",marginRight:"10px"},children:h}),t.jsxs(S,{sx:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center"},children:[te(s)&&t.jsx(V,{title:t.jsx(Ee,{details:j,mode:T}),className:"pp-builder-button",children:t.jsx(W,{sx:{color:"inherit",padding:0},onClick:()=>{T===i.FORM?a(oe({appId:e})):a(le({appId:e}))},children:t.jsx(Pe,{})})}),K(),B&&t.jsx(V,{title:p.close,children:t.jsx(W,{sx:{color:"inherit",padding:0},onClick:()=>{var o;(o=window.document.getElementById(x))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen"),s.src.app_id?a(re({isActive:!1,appDbId:0})):a(ae({})),g(e),u(e),a(ne({}))},children:t.jsx(Re,{})})})]})]})}),Y()]})},Oe=e=>{const a=A(u=>ue(u,e));return c.debug("globalCode",a),a},Fe=({appId:e})=>{c.debug(e);const a=he(e),u=Se(e),g=je(e),f=ve(e),j=_e(g,a,u),l=Oe(e),p=`pp-global-code-${e}`;return r.useEffect(()=>{var x,s,h;if(l!==void 0){(x=window.document.getElementById(p))==null||x.remove();const d=window.document.createElement("script");d.id=p,d.innerHTML=((s=l.global)==null?void 0:s.code)??"",(h=window.document.getElementById(`pp-app-${e}`))==null||h.appendChild(d)}},[l]),(f==null?void 0:f.appRootId)!==void 0?t.jsx(z,{appId:e}):t.jsx(Ae,{theme:j,children:t.jsx(z,{appId:e})})},Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{b as F,P as R,Ge as T,Be as a,Oe as b,De as u};
