import{r as i,bP as it,l as S,j as t,bQ as lt,bR as ct,_ as k,P as ht,z as $,bS as dt,bT as ut,bU as pt}from"./main-1.0.17.js";import{u as X,B as f,a as H,A as Z,g as tt,h as et,T as L,W as V,j as gt,k as mt,S as Ct,s as ft,v as vt}from"./main-1.0.17-54ffa424.js";import{b as xt,c as bt,d as jt,e as yt,f as St,g as wt,h as Tt,F as Dt}from"./index.esm-1.0.17-78a91bbf.js";import{C as q,a as U,B as P,A as Q,b as zt}from"./useScreenSize-1.0.17-44173319.js";import{C as Et}from"./CardHeader-1.0.17-aafd2d21.js";import{F as R,I as At,S as Ft,a as It}from"./Select-1.0.17-745624d0.js";import{F as Lt}from"./FormControlLabel-1.0.17-cc31d0c1.js";import{S as Pt,R as _t,T as M,B as kt,a as Wt,b as Rt,c as Mt,d as B,C as Bt}from"./TabPanel-1.0.17-3c2dbf14.js";import{T as Ot,a as A}from"./ToggleButtonGroup-1.0.17-d85b41b5.js";import{C as Nt}from"./CardActions-1.0.17-7e33ba01.js";import{M as qt}from"./MenuItem-1.0.17-ed8ab45a.js";import{L as Ut}from"./ListItemIcon-1.0.17-21c8997f.js";import{T as rt,P as Ht,I as D}from"./iconBase-1.0.17-8d991e6c.js";import{S as Gt}from"./SanitizeComponent-1.0.17-b68e53d1.js";import{a as $t}from"./Menu-1.0.17-09126381.js";import{S as Vt}from"./Slider-1.0.17-27606716.js";import{T as O}from"./Tabs-1.0.17-a2a1c721.js";function Qt(a,n,e){i.useEffect(()=>{if(!document)return;const r=document.querySelector('script[src="'.concat(a,'"]'));if(r!=null&&r.dataset.loaded){n==null||n();return}const s=r||document.createElement("script");r||(s.src=a);const o=()=>{s.dataset.loaded="1",n==null||n()};return s.addEventListener("load",o),e&&s.addEventListener("error",e),r||document.head.append(s),()=>{s.removeEventListener("load",o),e&&s.removeEventListener("error",e)}},[])}function Kt(a){let{chartVersion:n="current",chartPackages:e=["corechart","controls"],chartLanguage:r="en",mapsApiKey:s}=a;const[o,l]=i.useState(null),[u,d]=i.useState(!1);return Qt("https://www.gstatic.com/charts/loader.js",()=>{const c=window==null?void 0:window.google;c&&(c.charts.load(n,{packages:e,language:r,mapsApiKey:s}),c.charts.setOnLoadCallback(()=>{l(c)}))},()=>{d(!0)}),[o,u]}function Yt(a){let{onLoad:n,onError:e,...r}=a;const[s,o]=Kt(r);return i.useEffect(()=>{s&&n&&n(s)},[s]),i.useEffect(()=>{o&&e&&e()},[o]),null}const ot={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let K=0;const Jt=()=>(K+=1,"reactgooglegraph-".concat(K)),Xt=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],Zt=async function(a,n){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,s)=>{const o="".concat(e.headers?"headers=".concat(e.headers):"headers=0"),l="".concat(e.query?"&tq=".concat(encodeURIComponent(e.query)):""),u="".concat(e.gid?"&gid=".concat(e.gid):""),d="".concat(e.sheet?"&sheet=".concat(e.sheet):""),c="".concat(e.access_token?"&access_token=".concat(e.access_token):""),p="".concat(o).concat(u).concat(d).concat(l).concat(c),m="".concat(n,"/gviz/tq?").concat(p);new a.visualization.Query(m).send(j=>{j.isError()?s("Error in query:  ".concat(j.getMessage()," ").concat(j.getDetailedMessage())):r(j.getDataTable())})})},{Provider:te,Consumer:ee}=i.createContext(ot),re=a=>{let{children:n,value:e}=a;return i.createElement(te,{value:e},n)},st=a=>{let{render:n}=a;return i.createElement(ee,null,e=>n(e))},oe="#CCCCCC";class se extends i.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:n,googleChartWrapper:e}=this.props;window.removeEventListener("resize",this.onResize),n.visualization.events.removeAllListeners(e),e.getChartType()==="Timeline"&&e.getChart()&&e.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...n){super(...n),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:e,googleChartWrapper:r}=this.props;e.visualization.events.addListener(r,"select",()=>{const o=r.getChart().getSelection(),l=r.getDataTable();if(o.length===0||o[0].row||!l)return;const u=o[0].column,d=this.getColumnID(l,u);this.state.hiddenColumns.includes(d)?this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns.filter(p=>p!==d)]})):this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns,d]}))})},this.applyFormatters=(e,r)=>{const{google:s}=this.props;for(let o of r)switch(o.type){case"ArrowFormat":{new s.visualization.ArrowFormat(o.options).format(e,o.column);break}case"BarFormat":{new s.visualization.BarFormat(o.options).format(e,o.column);break}case"ColorFormat":{const l=new s.visualization.ColorFormat(o.options),{ranges:u}=o;for(let d of u)l.addRange(...d);l.format(e,o.column);break}case"DateFormat":{new s.visualization.DateFormat(o.options).format(e,o.column);break}case"NumberFormat":{new s.visualization.NumberFormat(o.options).format(e,o.column);break}case"PatternFormat":{new s.visualization.PatternFormat(o.options).format(e,o.column);break}}},this.getColumnID=(e,r)=>e.getColumnId(r)||e.getColumnLabel(r),this.draw=async e=>{let{data:r,diffdata:s,rows:o,columns:l,options:u,legend_toggle:d,legendToggle:c,chartType:p,formatters:m,spreadSheetUrl:v,spreadSheetQueryParameters:j}=e;const{google:x,googleChartWrapper:C}=this.props;let g,w=null;if(s){const b=x.visualization.arrayToDataTable(s.old),E=x.visualization.arrayToDataTable(s.new);w=x.visualization[p].prototype.computeDiff(b,E)}r!==null?Array.isArray(r)?g=x.visualization.arrayToDataTable(r):g=new x.visualization.DataTable(r):o&&l?g=x.visualization.arrayToDataTable([l,...o]):v?g=await Zt(x,v,j):g=x.visualization.arrayToDataTable([]);const y=g.getNumberOfColumns();for(let b=0;b<y;b+=1){const E=this.getColumnID(g,b);if(this.state.hiddenColumns.includes(E)){const W=g.getColumnLabel(b),F=g.getColumnId(b),I=g.getColumnType(b);g.removeColumn(b),g.addColumn({label:W,id:F,type:I})}}const z=C.getChart();C.getChartType()==="Timeline"&&z&&z.clearChart(),C.setChartType(p),C.setOptions(u||{}),C.setDataTable(g),C.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(g),w&&(C.setDataTable(w),C.draw()),m&&(this.applyFormatters(g,m),C.setDataTable(g),C.draw()),(c===!0||d===!0)&&this.grayOutHiddenColumns({options:u})},this.grayOutHiddenColumns=e=>{let{options:r}=e;const{googleChartWrapper:s}=this.props,o=s.getDataTable();if(!o)return;const l=o.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const d=Array.from({length:l-1}).map((c,p)=>{const m=this.getColumnID(o,p+1);return this.state.hiddenColumns.includes(m)?oe:r&&r.colors?r.colors[p]:Xt[p]});s.setOptions({...r,colors:d}),s.draw()},this.onResize=()=>{const{googleChartWrapper:e}=this.props;e.draw()}}}class ne extends i.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:n,googleChartWrapper:e,googleChartDashboard:r}=this.props;return i.createElement(st,{render:s=>i.createElement(se,Object.assign({},s,{google:n,googleChartWrapper:e,googleChartDashboard:r}))})}}class ae extends i.Component{shouldComponentUpdate(){return!1}listenToEvents(n){let{chartEvents:e,google:r,googleChartWrapper:s}=n;if(e){r.visualization.events.removeAllListeners(s);for(let l of e){var o=this;const{eventName:u,callback:d}=l;r.visualization.events.addListener(s,u,function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];d({chartWrapper:s,props:o.props,google:r,eventArgs:p})})}}}componentDidMount(){var n;const{google:e,googleChartWrapper:r}=this.props;this.listenToEvents({chartEvents:((n=this.propsFromContext)===null||n===void 0?void 0:n.chartEvents)||null,google:e,googleChartWrapper:r})}render(){return this.props,i.createElement(st,{render:n=>(this.propsFromContext=n,null)})}constructor(n){super(n),this.propsFromContext=null}}let Y=0;class ie extends i.Component{componentDidMount(){const{options:n,google:e,chartType:r,chartWrapperParams:s,toolbarItems:o,getChartEditor:l,getChartWrapper:u}=this.props,d={chartType:r,options:n,containerId:this.getGraphID(),...s},c=new e.visualization.ChartWrapper(d);c.setOptions(n||{}),u&&u(c,e);const p=new e.visualization.Dashboard(this.dashboard_ref),m=this.addControls(c,p);o&&e.visualization.drawToolbar(this.toolbar_ref.current,o);let v=null;l&&(v=new e.visualization.ChartEditor,l({chartEditor:v,chartWrapper:c,google:e})),this.setState({googleChartEditor:v,googleChartControls:m,googleChartDashboard:p,googleChartWrapper:c,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:n}=this.props;if(n)for(let e=0;e<n.length;e+=1){const{controlType:r,options:s,controlWrapperParams:o}=n[e];o&&"state"in o&&this.state.googleChartControls[e].control.setState(o.state),this.state.googleChartControls[e].control.setOptions(s),this.state.googleChartControls[e].control.setControlType(r)}}shouldComponentUpdate(n,e){return this.state.isReady!==e.isReady||n.controls!==this.props.controls}render(){const{width:n,height:e,options:r,style:s}=this.props,o={height:e||r&&r.height,width:n||r&&r.width,...s};return this.props.render?i.createElement("div",{ref:this.dashboard_ref,style:o},i.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):i.createElement("div",{ref:this.dashboard_ref,style:o},this.renderControl(l=>{let{controlProp:u}=l;return u.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(l=>{let{controlProp:u}=l;return u.controlPosition==="bottom"}),this.renderToolBar())}constructor(...n){var e;super(...n),e=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=i.createRef(),this.toolbar_ref=i.createRef(),this.getGraphID=()=>{const{graphID:r,graph_id:s}=this.props;let o;return!r&&!s?this.graphID?o=this.graphID:o=Jt():r&&!s?o=r:s&&!r?o=s:o=r,this.graphID=o,this.graphID},this.getControlID=(r,s)=>{Y+=1;let o;return typeof r>"u"?o="googlechart-control-".concat(s,"-").concat(Y):o=r,o},this.addControls=(r,s)=>{const{google:o,controls:l}=this.props,u=l?l.map((c,p)=>{const{controlID:m,controlType:v,options:j,controlWrapperParams:x}=c,C=this.getControlID(m,p);return{controlProp:c,control:new o.visualization.ControlWrapper({containerId:C,controlType:v,options:j,...x})}}):null;if(!u)return null;s.bind(u.map(c=>{let{control:p}=c;return p}),r);for(let c of u){const{control:p,controlProp:m}=c,{controlEvents:v=[]}=m;for(let j of v){var d=this;const{callback:x,eventName:C}=j;o.visualization.events.removeListener(p,C,x),o.visualization.events.addListener(p,C,function(){for(var g=arguments.length,w=new Array(g),y=0;y<g;y++)w[y]=arguments[y];x({chartWrapper:r,controlWrapper:p,props:d.props,google:o,eventArgs:w})})}}return u},this.renderChart=()=>{const{width:r,height:s,options:o,style:l,className:u,rootProps:d,google:c}=this.props,p={height:s||o&&o.height,width:r||o&&o.width,...l};return i.createElement("div",Object.assign({id:this.getGraphID(),style:p,className:u},d),this.state.isReady&&this.state.googleChartWrapper!==null?i.createElement(i.Fragment,null,i.createElement(ne,{googleChartWrapper:this.state.googleChartWrapper,google:c,googleChartDashboard:this.state.googleChartDashboard}),i.createElement(ae,{googleChartWrapper:this.state.googleChartWrapper,google:c})):null)},this.renderControl=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s=>!0;return e.state.isReady&&e.state.googleChartControls!==null?i.createElement(i.Fragment,null,e.state.googleChartControls.filter(s=>{let{controlProp:o,control:l}=s;return r({control:l,controlProp:o})}).map(s=>{let{control:o,controlProp:l}=s;return i.createElement("div",{key:o.getContainerId(),id:o.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?i.createElement("div",{ref:this.toolbar_ref}):null}}class nt extends i.Component{render(){const{chartLanguage:n,chartPackages:e,chartVersion:r,mapsApiKey:s,loader:o,errorElement:l}=this.props;return i.createElement(re,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?i.createElement(ie,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&l?l:o,i.createElement(Yt,{chartLanguage:n,chartPackages:e,chartVersion:r,mapsApiKey:s,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(n){const{controls:e,toolbarItems:r,getChartEditor:s}=this.props;return n&&n.visualization&&n.visualization.ChartWrapper&&n.visualization.Dashboard&&(!e||n.visualization.ChartWrapper)&&(!s||n.visualization.ChartEditor)&&(!r||n.visualization.drawToolbar)}constructor(...n){super(...n),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=e=>{if(this.props.onLoad&&this.props.onLoad(e),this.isFullyLoaded(e))this.onSuccess(e);else{const r=setInterval(()=>{const s=window.google;this._isMounted?s&&this.isFullyLoaded(s)&&(clearInterval(r),this.onSuccess(s)):clearInterval(r)},1e3)}},this.onSuccess=e=>{this.setState({loadingStatus:"ready",google:e})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}nt.defaultProps=ot;var J;(function(a){a.annotation="annotation",a.annotationText="annotationText",a.certainty="certainty",a.emphasis="emphasis",a.interval="interval",a.scope="scope",a.style="style",a.tooltip="tooltip",a.domain="domain"})(J||(J={}));const at=a=>{const n=X(e=>it(e,a));return S.debug("chartSettings",n),n},_={BarChart:xt,ColumnChart:bt,Histogram:jt,LineChart:yt,AreaChart:St,PieChart:wt,Gauge:Tt,Table:Dt,AnnotationChart:void 0,BubbleChart:void 0,Calendar:void 0,CandlestickChart:void 0,ComboChart:void 0,DiffChart:void 0,DonutChart:void 0,Gantt:void 0,GeoChart:void 0,Map:void 0,OrgChart:void 0,Sankey:void 0,ScatterChart:void 0,Scatter:void 0,SteppedAreaChart:void 0,Timeline:void 0,TreeMap:void 0,WaterfallChart:void 0,WordTree:void 0,Bar:void 0,Line:void 0};Object.freeze(_);const le=({setShowSelection:a,chartType:n,setChartType:e,isStacked:r,setIsStacked:s,legendPosition:o,setLegendPosition:l})=>{S.debug(n,r,o);const u=(d,c)=>t.jsxs(qt,{value:d,sx:{"& .MuiListItemIcon-root":{minWidth:"0%",marginRight:"5px"}},children:[t.jsx(Ut,{children:c}),t.jsx(rt,{component:"span",children:d.replace("Chart"," Chart")})]},d);return t.jsxs(q,{sx:{position:"absolute",top:"5em",right:"12px",width:"400px",zIndex:9999999},children:[t.jsx(Et,{title:"Chart Settings",sx:{textAlign:"center"}}),t.jsx(U,{sx:{textAlign:"center",padding:"2em",borderTop:"1px solid #eee",borderBottom:"1px solid #eee"},children:t.jsxs(f,{children:[t.jsxs(R,{fullWidth:!0,children:[t.jsx(At,{variant:"outlined",children:"Chart Type"}),t.jsx(Ft,{MenuProps:{id:"pp-select-chart"},value:n,label:"Chart Type",variant:"outlined",onChange:d=>{e(d.target.value)},sx:{margin:0,backgroundColor:"white",textAlign:"left","& .MuiListItemIcon-root":{minWidth:"0%",marginLeft:"2px",marginRight:"5px"}},children:Object.keys(_).map(d=>{if(_[d]!==void 0){const c=_[d];return u(d,t.jsx(c,{fontSize:"small"}))}})})]}),t.jsx(f,{sx:{display:"grid",gridTemplateColumns:"auto",justifyContent:"space-evenly",alignItems:"center",margin:"20px 0"},children:t.jsx(R,{fullWidth:!0,children:t.jsx(Lt,{control:t.jsx(Pt,{checked:r,disabled:!1,onChange:d=>{s(!r),d.stopPropagation()}}),label:"Stacked"})})}),t.jsxs(R,{fullWidth:!0,children:[t.jsxs(Ot,{color:"primary",exclusive:!0,fullWidth:!0,value:l,onChange:(d,c)=>{l(c??"none")},children:[t.jsx(A,{value:"none",children:"none"}),t.jsx(A,{value:"left",children:"left"}),t.jsx(A,{value:"top",children:"top"}),t.jsx(A,{value:"right",children:"right"}),t.jsx(A,{value:"bottom",children:"bottom"})]}),t.jsx(It,{children:"Legend position."})]})]})}),t.jsxs(Nt,{sx:{display:"grid",gridTemplateColumns:"1fr 150px"},children:[t.jsx(f,{}),t.jsx(P,{variant:"contained",onClick:()=>{a(!1)},children:"OK"})]})]})};const ce=({appId:a,isBuilderEnabled:n})=>{var F,I,G;const e=H(),r=at(a);S.error(r);const[s,o]=i.useState(),[l,u]=i.useState("BarChart"),[d,c]=i.useState(!1),[p,m]=i.useState(!1),[v,j]=i.useState("none"),[x,C]=i.useState(!1),[g,w]=i.useState(0),y=i.useRef(null),z=()=>{var T;const h=window.open("","print");h==null||h.document.write("<html><head><title>"+document.title+"</title>"),h==null||h.document.write("</head><body >"),h==null||h.document.write("<h1>"+document.title+"</h1>"),h==null||h.document.write(((T=y.current)==null?void 0:T.innerHTML)??""),h==null||h.document.write("</body></html>"),h==null||h.document.close(),h==null||h.focus(),h==null||h.print(),h==null||h.close()},b=()=>{var h;try{return((h=s==null?void 0:s.getChart())==null?void 0:h.getImageURI())??""}catch(T){return S.error(T),""}},E=()=>{const h=window.document.querySelector(`#pp-chart-${a} div div`);if(h===null)return null;const T=h==null?void 0:h.cloneNode(!0);return T&&T.removeAttribute("id"),t.jsx(f,{className:"pp-print-container",children:t.jsx(Gt,{html:T.innerHTML})})},W=()=>t.jsxs(f,{sx:{display:"grid",gridTemplateColumns:"auto auto auto",justifyContent:"end",alignItems:"center",gap:"0"},children:[t.jsx(f,{children:n&&t.jsx(L,{title:"Chart Builder",children:t.jsx(D,{sx:{color:"inherit"},onClick:()=>{e(lt({appId:a}))},children:t.jsx(gt,{})})})}),t.jsx(f,{children:t.jsx(L,{title:"Print",children:t.jsx(D,{sx:{color:"inherit"},onClick:()=>{var h;w(((h=window.document.querySelector(`#pp-chart-${a} svg`))==null?void 0:h.clientWidth)??0),C(!0),c(!1)},children:t.jsx(V,{})})})}),t.jsxs(f,{children:[t.jsx(L,{title:"Chart Settings",children:t.jsx(D,{sx:{color:"inherit"},onClick:h=>{c(!d),h.preventDefault(),h.stopPropagation()},children:t.jsx(mt,{})})}),d&&t.jsx(le,{setShowSelection:c,chartType:l,setChartType:u,legendPosition:v,setLegendPosition:j,isStacked:p,setIsStacked:m})]})]});return t.jsxs(t.Fragment,{children:[t.jsx(Z,{position:"static",elevation:4,sx:{borderRadius:"4px",marginBottom:"5px"},children:t.jsxs(tt,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",marginRight:"-12px",position:"relative"},children:[t.jsx(f,{sx:{whiteSpace:"nowrap",fontSize:"18px",lineHeight:"18px",fontWeight:"bold",minWidth:0,textOverflow:"ellipsis",marginRight:"10px"},children:"Population of Largest U.S. Cities"}),t.jsx(f,{children:W()})]})}),t.jsx(Ht,{id:"pp-chart-"+a,elevation:4,sx:{width:"100%",height:"400px",backgroundColor:"white",borderRadius:"4px","& div, & svg":{borderRadius:"4px"},"& div.google-visualization-table":{width:"100%"},"& table.google-visualization-table-table":{width:"100%"}},children:t.jsx(nt,{chartType:l,data:r==null?void 0:r.data,options:r==null?void 0:r.options,width:"100%",height:"400px",style:{overflow:"hidden"},getChartWrapper:h=>o(h)})}),t.jsx($t,{open:x,onClose:()=>C(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsx(f,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"1px solid #eee",boxShadow:24,p:4,borderRadius:"4px",width:window.document.querySelectorAll(`#pp-chart-${a} svg`).length===1?(F=window.document.querySelector(`#pp-chart-${a} svg`))==null?void 0:F.clientWidth:"auto",height:window.document.querySelectorAll(`#pp-chart-${a} svg`).length===1?(((I=window.document.querySelector(`#pp-chart-${a} svg`))==null?void 0:I.clientHeight)??0)+70:"auto"},children:t.jsxs(f,{sx:{position:"relative",display:"grid",gridTemplateRows:"1fr",height:"-webkit-fill-available"},children:[t.jsx(D,{onClick:()=>C(!1),sx:{position:"absolute",right:0},children:t.jsx(et,{})}),t.jsxs(f,{sx:{display:"grid",gridTemplateRows:window.document.querySelectorAll(`#pp-chart-${a} svg`).length===1?"1fr 60px":"1fr 40px",height:"-webkit-fill-available"},children:[t.jsx(f,{ref:y,sx:{alignSelf:"center",textAlign:"center"},children:window.document.querySelectorAll(`#pp-chart-${a} svg`).length===1?t.jsx("img",{src:b(),style:{width:g}}):E()}),t.jsxs(f,{sx:{display:"grid",gridTemplateColumns:"1fr auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(f,{children:window.document.querySelectorAll(`#pp-chart-${a} svg`).length===1&&t.jsx(Vt,{value:g,min:1,max:(G=window.document.querySelector(`#pp-chart-${a} svg`))==null?void 0:G.clientWidth,step:1,valueLabelDisplay:"on",disabled:!0,onChange:(h,T)=>{S.debug(h,T)},sx:{width:"calc(100% - 40px)",margin:"20px"}})}),t.jsx(L,{title:"Print",children:t.jsx(D,{color:"primary",onClick:()=>{z()},children:t.jsx(V,{})})})]})]})]})})})]})},he=a=>{const n=X(e=>ct(e,a));return S.debug("chartSettingsVisible",n),n},de=i.lazy(()=>k(()=>import("./SettingsQuery-1.0.17-c3adbe32.js"),["./SettingsQuery-1.0.17-c3adbe32.js","./main-1.0.17.js"],import.meta.url)),ue=i.lazy(()=>k(()=>import("./SettingsChart-1.0.17-e4f59055.js"),["./SettingsChart-1.0.17-e4f59055.js","./main-1.0.17.js","./main-1.0.17-54ffa424.js","./iconBase-1.0.17-8d991e6c.js","./main-1.0.17-f52cb0d7.css","./AccordionSummary-1.0.17-276b7b2a.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Collapse-1.0.17-faa698ed.js","./AccordionDetails-1.0.17-7b8437b0.js","./Select-1.0.17-745624d0.js","./Menu-1.0.17-09126381.js","./FormControlLabel-1.0.17-cc31d0c1.js","./TabPanel-1.0.17-3c2dbf14.js","./useScreenSize-1.0.17-44173319.js","./DialogContent-1.0.17-9628df83.js","./Tabs-1.0.17-a2a1c721.js","./TabPanel-1.0.17-9bff3a93.css","./MenuItem-1.0.17-ed8ab45a.js","./ListItemIcon-1.0.17-21c8997f.js","./PremiumFeature-1.0.17-12e324e9.js","./index.esm-1.0.17-78a91bbf.js","./CardHeader-1.0.17-aafd2d21.js","./ToggleButtonGroup-1.0.17-d85b41b5.js","./CardActions-1.0.17-7e33ba01.js","./SanitizeComponent-1.0.17-b68e53d1.js","./Slider-1.0.17-27606716.js"],import.meta.url)),pe=i.lazy(()=>k(()=>import("./SettingsCaching-1.0.17-45456aef.js"),["./SettingsCaching-1.0.17-45456aef.js","./main-1.0.17.js"],import.meta.url)),ge=({appId:a})=>{var y,z;const n=H(),e=at(a),r=he(a),[s,o]=i.useState(!1);S.error(s);const[l,u]=i.useState(!1),[d,c]=i.useState("1"),p=(b,E)=>{c(E)},m=()=>{n(dt({appId:a}))},v=b=>{S.debug(b),n(ut({appId:a,property:b})),o(!0)},j=b=>{throw S.error(b),new Error("Function not implemented.")},x=()=>{throw new Error("Function not implemented.")},C=()=>{throw new Error("Function not implemented.")},g=()=>{throw new Error("Function not implemented.")},w=((y=Q)==null?void 0:y.palette.mode)===ht.LIGHT?(z=Q)==null?void 0:z.palette.primary.main:"";return t.jsx(t.Fragment,{children:r&&t.jsxs(t.Fragment,{children:[t.jsxs(_t,{closeDrawer:m,children:[t.jsx(Z,{position:"static",elevation:4,sx:{borderRadius:0},children:t.jsxs(tt,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[t.jsx(rt,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Chart Builder"}),t.jsx(M,{title:"Dock to left",position:"bottom",children:t.jsx(D,{onClick:()=>{j($.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:t.jsx(kt,{})})}),t.jsx(M,{title:"Dock to right",position:"bottom",children:t.jsx(D,{onClick:()=>{j($.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:t.jsx(Wt,{})})}),t.jsx(M,{title:"Close",position:"bottom",children:t.jsx(D,{onClick:m,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:t.jsx(et,{})})})]})}),t.jsx(q,{className:"pp-settings-container",children:t.jsx(U,{sx:{padding:0,margin:0},children:t.jsxs(Rt,{value:d,children:[t.jsxs(Mt,{variant:"fullWidth",textColor:"primary",onChange:p,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[t.jsx(O,{label:"Query",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),t.jsx(O,{label:"Chart",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),t.jsx(O,{label:"Caching",value:"3",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),t.jsxs(f,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[t.jsx(B,{value:"1",children:t.jsx(i.Suspense,{fallback:t.jsx(f,{sx:{padding:"30px"},children:t.jsx(Ct,{title:"Loading Chart Builder..."})}),children:t.jsx(de,{appId:a,chartSettings:e,updateSettings:v})})}),t.jsx(B,{value:"2",children:t.jsx(i.Suspense,{children:t.jsx(ue,{appId:a,chartSettings:e,updateSettings:v})})}),t.jsx(B,{value:"3",children:t.jsx(i.Suspense,{children:t.jsx(pe,{appId:a,chartSettings:e,updateSettings:v})})})]})]})})}),t.jsx(q,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:t.jsxs(U,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[t.jsx(P,{variant:"outlined",className:"footer_action_button_apply",onClick:C,children:"Apply"}),t.jsx(P,{variant:"outlined",className:"footer_action_button",onClick:g,children:"OK"}),t.jsx(P,{variant:"outlined",className:"footer_action_button",onClick:m,children:"Cancel"})]})})]}),t.jsx(Bt,{title:"Close Chart Builder?",message:"All uncommitted changes will be lost!",open:l,setOpen:u,onConfirm:()=>{x(),close()},onKeep:()=>{close()}})]})})},me=({appId:a,appDbId:n})=>{S.debug(a,n);const e=H(),r=()=>{e(pt({appId:a,chartState:{data:[["City","2010 Population","2000 Population"],["New York City, NY",8175e3,8008e3],["Los Angeles, CA",3792e3,3694e3],["Chicago, IL",2695e3,2896e3],["Houston, TX",2099e3,1953e3],["Philadelphia, PA",1526e3,1517e3]]}}))};i.useEffect(()=>{r()},[]);const s=i.useMemo(()=>!0,[]),o=i.useMemo(()=>zt(),[]);return t.jsxs(t.Fragment,{children:[t.jsx(ce,{appId:a,isBuilderEnabled:s}),s&&t.jsx(ft,{theme:o,children:t.jsx(ge,{appId:a})})]})},N=i.lazy(()=>k(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Ce=({dataSource:a})=>{S.debug(a);let n;try{let e={};try{e=JSON.parse(a.replaceAll("'",'"'))}catch(r){return console.error("JSON parse error"),S.error(r),t.jsx(i.Suspense,{children:t.jsx(N,{severity:"error",message:"Invalid arguments - check console for more information",close:!1})})}if(e.id&&!isNaN(e.id))n=e.id;else return console.error("Invalid arguments"),t.jsx(i.Suspense,{children:t.jsx(N,{severity:"error",message:"Invalid arguments - check console for more information",close:!1})})}catch(e){return console.error("Invalid arguments",e),t.jsx(i.Suspense,{children:t.jsx(N,{severity:"error",message:"Invalid arguments - check console for more information",close:!1})})}return t.jsx(me,{appId:vt(),appDbId:n})},_e=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"}));export{_ as C,_e as a};
