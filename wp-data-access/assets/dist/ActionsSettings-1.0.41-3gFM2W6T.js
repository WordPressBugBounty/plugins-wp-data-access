import{C as m,bF as b,l as c,a1 as h,S,a2 as f,bL as _,bn as J,b as y,bd as N}from"./lib-1.0.41-DFdWuh_n.js";import{R as u}from"./RestApi-1.0.41-CZ_yORv3.js";import{T as l}from"./TargetEnum-1.0.41-CIW1jlU5.js";const I=(t,r,g,n,e,s,a,o=!1)=>{c.debug(t,r,g,n,e),u(m.appUrlSettings,{action:"admin_settings",dbs:g,tbl:n,settings:JSON.stringify({scope:t,target:r,data:e})},s,a,o)},A=(t,r,g,n,e,s,a,o,i,p=!1)=>{const d={app_id:t,cnt_id:r,target:g,settings:JSON.stringify(n),theme:JSON.stringify(a)};e!==void 0&&(d.chart=JSON.stringify(e)),s!==void 0&&(d.map=JSON.stringify(s)),u(m.appUrlAppSettings,d,o,i,p)},C=(t,r,g,n,e=!1)=>{const s=b(t);c.debug(s);const{state:a,...o}=J.getSelectors().selectTableById(S.getState().tables,t);if(c.debug(a,o),s.app_id){const i={...h.getSelectors().selectChart(S.getState().charts,t)};delete i.data,c.debug(i);const p={..._.getSelectors().selectMap(S.getState().maps,t)};delete p.state,c.debug(p);const{...d}=f.getSelectors().selectThemeById(S.getState().themes,t);c.debug(d),A(s.app_id,s.cnt_id,l.TABLE,o,i,p,d,g,n,e)}else s.dbs.trim()!==""&&s.tbl.trim()!==""?I(r,l.TABLE,s.dbs,s.tbl,o,g,n,e):(c.error("error","Missing data source"),n(y.contactSupport))},M=(t,r,g,n,e,s=!1)=>{const a=b(t);c.debug(a);const{state:o,...i}=N.getSelectors().selectForm(S.getState().forms,t);if(c.debug(o,i),a.app_id){const{...p}=f.getSelectors().selectThemeById(S.getState().themes,t);c.debug(p),A(a.app_id,a.cnt_id,g,i,void 0,void 0,p,n,e,s)}else a.dbs.trim()!==""&&a.tbl.trim()!==""?I(r,g,a.dbs,a.tbl,i,n,e,s):(c.error("error","Missing data source"),e(y.contactSupport))},v=(t,r,g,n=!1)=>{const e=b(t);c.debug(e,t);const s=e.app_id,a=e.cnt_id,o=h.getSelectors().selectChart(S.getState().charts,t);c.debug(o);const{...i}=f.getSelectors().selectThemeById(S.getState().themes,t);c.debug(i),u(m.appUrlAppSettings,{app_id:s,cnt_id:a,target:l.CHART,settings:JSON.stringify(o),theme:JSON.stringify(i)},r,g,n)},U=(t,r,g,n=!1)=>{const e=b(t);c.debug(e,t);const s=e.app_id,a=e.cnt_id,{state:o,...i}=_.getSelectors().selectMap(S.getState().maps,t);c.debug(i);const{...p}=f.getSelectors().selectThemeById(S.getState().themes,t);c.debug(p),u(m.appUrlAppSettings,{app_id:s,cnt_id:a,target:l.MAP,settings:JSON.stringify(i),theme:JSON.stringify(p)},r,g,n)};export{v as a,U as b,I as c,C as d,M as e,A as s};
