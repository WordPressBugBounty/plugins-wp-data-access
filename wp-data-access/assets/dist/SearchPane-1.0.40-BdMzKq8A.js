import{j as d}from"./cm-1.0.40-DO7MoydR.js";import{l as w,n as S}from"./lib-1.0.40-CJM-IO_o.js";import{B as F}from"./Spinner-1.0.40-Bmn0_C4u.js";import{F as V}from"./FormLabel-1.0.40-DLOepjQ0.js";import{L as k,a as A}from"./Menu-1.0.40-BKp7UqHL.js";import{g as E,l as I,L as G}from"./ListItem-1.0.40-C82esTyu.js";import{r as B}from"./redux-1.0.40-W_04YL6Z.js";import{i as P,j as T,c as R,l as U,r as D,m as M,o as O}from"./Typography-1.0.40-oRKYqE3b.js";import{u as W}from"./useEnhancedEffect-1.0.40-DvrM_gBo.js";import{a as q,B as z}from"./iconBase-1.0.40-CH6TO7hF.js";import{L as K}from"./ListItemIcon-1.0.40-B1zY5Zqz.js";import{C as H}from"./Checkbox-1.0.40-DtDfmlS5.js";import{L as J}from"./ListItemText-1.0.40-CQVEK3_D.js";import"./vendor-1.0.40-CN03Eozo.js";import"./loglevel-1.0.40-BZ7XahX3.js";import"./lodash-1.0.40-yZQKpWII.js";import"./moment-1.0.40-C5S46NFB.js";import"./useFormControl-1.0.40-BL8koKXQ.js";import"./ThemeProvider-1.0.40-D9QtC9zH.js";import"./index-1.0.40-DmMQghWt.js";import"./notistack-1.0.40-HUa4vT_u.js";import"./FormHelperText-1.0.40-D6buAdoc.js";import"./utils-1.0.40-iop7lDec.js";import"./MenuItem-1.0.40-UKMJrtYZ.js";import"./SwitchBase-1.0.40-BQrnL2Sx.js";import"./useControlled-1.0.40-B7yPDtn1.js";import"./createSvgIcon-1.0.40-DryBVjDb.js";const Q=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},X=t=>{const{alignItems:e,classes:n,dense:u,disabled:r,disableGutters:p,divider:v,selected:g}=t,f=U({root:["root",u&&"dense",!p&&"gutters",v&&"divider",r&&"disabled",e==="flex-start"&&"alignItemsFlexStart",g&&"selected"]},E,n);return{...n,...f}},Y=T(z,{shouldForwardProp:t=>D(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Q})(M(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${I.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${I.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:O(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:O(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${I.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${I.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),Z=B.forwardRef(function(e,n){const u=P({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:p=!1,component:v="div",children:g,dense:C=!1,disableGutters:f=!1,divider:$=!1,focusVisibleClassName:b,selected:j=!1,className:h,...x}=u,L=B.useContext(k),o=B.useMemo(()=>({dense:C||L.dense||!1,alignItems:r,disableGutters:f}),[r,L.dense,C,f]),a=B.useRef(null);W(()=>{p&&a.current&&a.current.focus()},[p]);const i={...u,alignItems:r,dense:o.dense,disableGutters:f,divider:$,selected:j},s=X(i),m=q(a,n);return d.jsx(k.Provider,{value:o,children:d.jsx(Y,{ref:m,href:x.href||x.to,component:(x.href||x.to)&&v==="div"?"button":v,focusVisibleClassName:R(s.focusVisible,b),ownerState:i,className:R(s.root,h),...x,classes:s,children:g})})}),Ot=({column:t,columnName:e,columnLabel:n,lov:u,lookups:r,columnFilters:p,setColumnFilters:v,setCurrentFilterColumnName:g,css:C,clientSideProcessing:f,tableColumns:$})=>{w.debug(e,u,p);let b=[];p.map(o=>{o.id===e&&Array.isArray(o.value)&&(b=o.value)}),w.debug(b);const j={...C(),margin:"10px 0 0 0",padding:0,height:"180px",overflow:"auto"},h=o=>d.jsxs(A,{sx:j,children:[...o.map(a=>{const i=f?a.key:a.value,s=a.value;return d.jsx(G,{sx:{margin:0,padding:0},children:d.jsxs(Z,{selected:b.includes(i),sx:{padding:"0 8px 0 0"},onClick:()=>{const m=[...p].filter(y=>y.id===e),l=m.length===0?[]:m[0].value;if(!l.includes(i))l.push(i);else{const y=l.indexOf(i);y!==-1&&l.splice(y,1)}const c=[...p].filter(y=>y.id!==e);l.length>0&&c.push({id:e,value:l}),l.length===0&&g(""),v(c)},onFocus:()=>{g(e)},onBlur:()=>{g("")},children:[d.jsx(K,{sx:{minWidth:0},children:d.jsx(H,{checked:b.includes(i)})}),d.jsx(J,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:S(s)})]})})})]}),x=()=>{const o=[],a=$.filter(i=>i.columnName===e)[0];return t.getFacetedUniqueValues().forEach((i,s)=>{var m,l;if(s)if(r&&r[e]&&((m=a==null?void 0:a.lookup)==null?void 0:m.loadOnStartup)!==!0){if(r[e][s]&&typeof r[e][s]=="string"){const c=r[e][s]+" ("+i+")";c!==""&&o.push({key:s,value:c})}else if(r[e][s]&&Array.isArray(r[e][s])){const c=r[e][s].join((l=a==null?void 0:a.lookup)==null?void 0:l.delimiter)+" ("+i+")";c!==""&&o.push({key:s,value:c})}}else{const c=s+" ("+i+")";o.push({key:s,value:c})}}),h(o)},L=()=>h(u??[]);return d.jsxs(F,{className:"pp-column-search-field",sx:{margin:0,padding:0},children:[d.jsx(V,{children:n}),f?x():L()]})};export{Ot as default};
