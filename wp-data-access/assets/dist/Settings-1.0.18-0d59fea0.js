import{dW as Z,l as r,r as o,_ as m,c5 as $,S as a,dK as y,ay as J,P as Q,dX as I,j as e,A as E,dT as ee,b as te,dY as se,dZ as oe,d_ as re,d$ as ie,e as c,C as h,e0 as ne}from"./main-1.0.18.js";import{u as O,a as ae}from"./RestApi-1.0.18-cb72bd79.js";import{A as B}from"./AdminTheme-1.0.18-73e13a4f.js";import{R as le,B as ce,a as me,T as ue,b as de,c as g}from"./TabPanel-1.0.18-2d718e76.js";import{d as pe}from"./ActionsSettings-1.0.18-41fd8841.js";import{S as he}from"./ScopeEnum-1.0.18-7caf102d.js";import{T as x,C as ge}from"./ConfirmDialog-1.0.18-eb1f3988.js";import{A as xe,T as fe,M as Se}from"./index.esm-1.0.18-12f13c4a.js";import{u as be}from"./useFormStore-1.0.18-a2e1b6cf.js";import{B as je,S as f}from"./Spinner-1.0.18-de8df990.js";import{D as Te}from"./useTheme-1.0.18-c1f3f722.js";/* empty css                        */import{T as D}from"./TargetEnum-1.0.18-b82380d5.js";import{T as ve}from"./Typography-1.0.18-dc3c0740.js";import{I as S}from"./iconBase-1.0.18-3c21f5e2.js";import{C as z,a as L,B as b}from"./CardContent-1.0.18-3d5e5525.js";import{T as j}from"./Tabs-1.0.18-d7d53c1e.js";import"./useScreenSize-1.0.18-62aeb4c4.js";import"./ThemeProvider-1.0.18-247b72cc.js";import"./Modal-1.0.18-870f459d.js";import"./DialogContent-1.0.18-5570cba4.js";import"./colorManipulator-1.0.18-95bf61ec.js";import"./createSvgIcon-1.0.18-dcf0276e.js";const _e=()=>{const t=O(n=>Z(n));return r.debug("hideThemeSetting",t),t},Ce=o.lazy(()=>m(()=>import("./SettingsColumns-1.0.18-9b95bf1c.js"),["./SettingsColumns-1.0.18-9b95bf1c.js","./main-1.0.18.js","./RestApi-1.0.18-cb72bd79.js","./Typography-1.0.18-dc3c0740.js","./useMetadataColumns-1.0.18-3cad9c2e.js","./index.esm-1.0.18-12f13c4a.js","./iconBase-1.0.18-3c21f5e2.js","./useTheme-1.0.18-c1f3f722.js","./colorManipulator-1.0.18-95bf61ec.js","./useStoreTable-1.0.18-8a593f98.js","./useFormStore-1.0.18-a2e1b6cf.js","./Spinner-1.0.18-de8df990.js","./CardContent-1.0.18-3d5e5525.js","./AdminTheme-1.0.18-73e13a4f.js","./index.esm-1.0.18-1950fc28.js","./ActionsDml-1.0.18-7e1a74e9.js","./index.esm-1.0.18-32f5cee0.js","./TextField-1.0.18-cf148b4e.js","./FormHelperText-1.0.18-8b4ce85f.js","./useFormControl-1.0.18-87a8487d.js","./FormLabel-1.0.18-47dbe87d.js","./Menu-1.0.18-e8cb0649.js","./ThemeProvider-1.0.18-247b72cc.js","./Popover-1.0.18-54868205.js","./Modal-1.0.18-870f459d.js","./Grow-1.0.18-4ebc2ce8.js","./useControlled-1.0.18-12a74006.js","./createSvgIcon-1.0.18-dcf0276e.js","./MenuItem-1.0.18-0088f2a2.js","./index-1.0.18-bd94b546.js","./useTableUpdater-1.0.18-089ef7f9.js","./Stepper-1.0.18-05ecefbc.js","./StepContent-1.0.18-147bdc81.js","./Collapse-1.0.18-8e581380.js","./FormControlLabel-1.0.18-2840e084.js","./createStyled-1.0.18-b238c9ff.js","./Checkbox-1.0.18-3ed60478.js","./SwitchBase-1.0.18-e2aa3211.js","./ConfirmDialog-1.0.18-eb1f3988.js","./DialogContent-1.0.18-5570cba4.js","./ConfirmDialog-1.0.18-9bff3a93.css","./Link-1.0.18-41cc6055.js","./AccordionSummary-1.0.18-f9e114cf.js","./index-1.0.18-ff546563.js","./useSlot-1.0.18-71f9e7ae.js","./AccordionDetails-1.0.18-2900e110.js","./Switch-1.0.18-cbb6329b.js","./useFormUpdates-1.0.18-2d7a3227.js","./PremiumFeature-1.0.18-2f6283b7.js","./EnumTypeEnum-1.0.18-7ffcf33a.js","./Slider-1.0.18-32b00bb2.js","./RadioGroup-1.0.18-4960e4a8.js","./Radio-1.0.18-210e4079.js"],import.meta.url)),Fe=o.lazy(()=>m(()=>import("./SettingsForm-1.0.18-c76c1d0f.js"),["./SettingsForm-1.0.18-c76c1d0f.js","./main-1.0.18.js","./RestApi-1.0.18-cb72bd79.js","./Typography-1.0.18-dc3c0740.js","./useFormUpdates-1.0.18-2d7a3227.js","./PremiumFeature-1.0.18-2f6283b7.js","./index.esm-1.0.18-32f5cee0.js","./iconBase-1.0.18-3c21f5e2.js","./AdminTheme-1.0.18-73e13a4f.js","./FormLabel-1.0.18-47dbe87d.js","./useFormControl-1.0.18-87a8487d.js","./index.esm-1.0.18-12f13c4a.js","./AccordionSummary-1.0.18-f9e114cf.js","./index-1.0.18-ff546563.js","./useSlot-1.0.18-71f9e7ae.js","./useControlled-1.0.18-12a74006.js","./Collapse-1.0.18-8e581380.js","./AccordionDetails-1.0.18-2900e110.js","./FormHelperText-1.0.18-8b4ce85f.js","./RadioGroup-1.0.18-4960e4a8.js","./Radio-1.0.18-210e4079.js","./SwitchBase-1.0.18-e2aa3211.js","./createSvgIcon-1.0.18-dcf0276e.js","./Modal-1.0.18-870f459d.js","./FormControlLabel-1.0.18-2840e084.js","./createStyled-1.0.18-b238c9ff.js","./Switch-1.0.18-cbb6329b.js","./CssUnitTextField-1.0.18-6aa39ec4.js","./TextField-1.0.18-cf148b4e.js","./Menu-1.0.18-e8cb0649.js","./ThemeProvider-1.0.18-247b72cc.js","./Popover-1.0.18-54868205.js","./Grow-1.0.18-4ebc2ce8.js","./Spinner-1.0.18-de8df990.js","./CardContent-1.0.18-3d5e5525.js","./Link-1.0.18-41cc6055.js","./useTheme-1.0.18-c1f3f722.js","./colorManipulator-1.0.18-95bf61ec.js","./SettingsFormRelationships-1.0.18-d863356f.js","./ComponentColumn-1.0.18-5c48b102.js","./ActionsExplorer-1.0.18-ae07c36b.js","./Autocomplete-1.0.18-a264f80a.js","./Close-1.0.18-d90e9fa7.js","./Popper-1.0.18-20544c9b.js","./ActionsApp-1.0.18-0ab2bedd.js","./Checkbox-1.0.18-3ed60478.js","./Tooltip-1.0.18-5f32f0fd.js","./MenuItem-1.0.18-0088f2a2.js","./FallbackSpinner-1.0.18-e10446f4.js","./ToggleButtonGroup-1.0.18-02ae4565.js","./Stepper-1.0.18-05ecefbc.js","./StepContent-1.0.18-147bdc81.js","./ConfirmDialog-1.0.18-eb1f3988.js","./DialogContent-1.0.18-5570cba4.js","./ConfirmDialog-1.0.18-9bff3a93.css","./index-1.0.18-bd94b546.js"],import.meta.url)),ke=o.lazy(()=>m(()=>import("./ThemeSettings-1.0.18-a19ba407.js"),["./ThemeSettings-1.0.18-a19ba407.js","./main-1.0.18.js","./RestApi-1.0.18-cb72bd79.js","./Typography-1.0.18-dc3c0740.js","./useTheme-1.0.18-c1f3f722.js","./colorManipulator-1.0.18-95bf61ec.js","./iconBase-1.0.18-3c21f5e2.js","./PremiumFeature-1.0.18-2f6283b7.js","./index.esm-1.0.18-32f5cee0.js","./AdminTheme-1.0.18-73e13a4f.js","./FormLabel-1.0.18-47dbe87d.js","./useFormControl-1.0.18-87a8487d.js","./index.esm-1.0.18-12f13c4a.js","./index-1.0.18-e1774a35.js","./Spinner-1.0.18-de8df990.js","./FormHelperText-1.0.18-8b4ce85f.js","./Switch-1.0.18-cbb6329b.js","./SwitchBase-1.0.18-e2aa3211.js","./useControlled-1.0.18-12a74006.js","./index-1.0.18-ff546563.js","./FormControlLabel-1.0.18-2840e084.js","./createStyled-1.0.18-b238c9ff.js","./Slider-1.0.18-32b00bb2.js","./ThemeProvider-1.0.18-247b72cc.js","./Link-1.0.18-41cc6055.js","./RadioGroup-1.0.18-4960e4a8.js","./Radio-1.0.18-210e4079.js","./createSvgIcon-1.0.18-dcf0276e.js","./Modal-1.0.18-870f459d.js","./CssUnitTextField-1.0.18-6aa39ec4.js","./TextField-1.0.18-cf148b4e.js","./Menu-1.0.18-e8cb0649.js","./Popover-1.0.18-54868205.js","./Grow-1.0.18-4ebc2ce8.js","./CardContent-1.0.18-3d5e5525.js","./AccordionSummary-1.0.18-f9e114cf.js","./useSlot-1.0.18-71f9e7ae.js","./Collapse-1.0.18-8e581380.js","./AccordionDetails-1.0.18-2900e110.js"],import.meta.url));o.lazy(()=>m(()=>import("./SettingsFormCode-1.0.18-b61ed026.js"),["./SettingsFormCode-1.0.18-b61ed026.js","./main-1.0.18.js","./index-1.0.18-d0588796.js","./DialogContent-1.0.18-5570cba4.js","./Typography-1.0.18-dc3c0740.js","./index.esm-1.0.18-12f13c4a.js","./iconBase-1.0.18-3c21f5e2.js","./Modal-1.0.18-870f459d.js","./ConfirmDialog-1.0.18-eb1f3988.js","./AdminTheme-1.0.18-73e13a4f.js","./CardContent-1.0.18-3d5e5525.js","./ConfirmDialog-1.0.18-9bff3a93.css","./index.esm-1.0.18-bb69b89a.js","./TreeItem2-1.0.18-e1e8cc6e.js","./createStyled-1.0.18-b238c9ff.js","./TreeItem2Provider-1.0.18-a27a86e4.js","./createSvgIcon-1.0.18-dcf0276e.js","./Collapse-1.0.18-8e581380.js","./colorManipulator-1.0.18-95bf61ec.js","./RestApi-1.0.18-cb72bd79.js","./Tooltip-1.0.18-5f32f0fd.js","./ThemeProvider-1.0.18-247b72cc.js","./Popper-1.0.18-20544c9b.js","./useControlled-1.0.18-12a74006.js","./Grow-1.0.18-4ebc2ce8.js","./Spinner-1.0.18-de8df990.js","./PremiumFeature-1.0.18-2f6283b7.js","./index.esm-1.0.18-32f5cee0.js","./FormLabel-1.0.18-47dbe87d.js","./useFormControl-1.0.18-87a8487d.js","./ThemeContainer-1.0.18-fbd92e13.js","./useTheme-1.0.18-c1f3f722.js","./FallbackSpinner-1.0.18-e10446f4.js","./FormContainer-1.0.18-00c740a4.js","./ActionsDml-1.0.18-7e1a74e9.js","./useScreenSize-1.0.18-62aeb4c4.js","./useStoreTable-1.0.18-8a593f98.js","./purify.es-1.0.18-68816782.js","./dayjs.min-1.0.18-7ea54188.js","./CardActions-1.0.18-9693078a.js","./FormContainer-1.0.18-5da27d24.css","./AccordionSummary-1.0.18-f9e114cf.js","./index-1.0.18-ff546563.js","./useSlot-1.0.18-71f9e7ae.js","./Popover-1.0.18-54868205.js"],import.meta.url));const Je=({appId:t})=>{var R,A;r.debug(t);const n=ae(),T=_e(),[w]=o.useState($(a.getState(),t));r.debug(w);const[u,N]=o.useState(y(a.getState(),t));r.debug(u);const P=be(t),[M,Re]=o.useState(J(a.getState(),t));r.debug(M);const v=()=>ie(a.getState(),t),d=i=>{n(ee({appId:t,isUpdated:i}))},[W,_]=o.useState(!1),U=((R=B)==null?void 0:R.palette.mode)===Q.LIGHT?(A=B)==null?void 0:A.palette.primary.main:"",C=i=>{n(te({anchor:i}))},F=()=>{u!==void 0&&n(se({appId:t,formState:u}))},l=()=>{n(oe({})),d(!1)},p=()=>{v()?_(!0):(F(),l())},k=()=>{{const i=re(a.getState());pe(t,he.GLOBAL,i.isRelationTable===!0?D.RFORM:D.FORM,s=>{if(r.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":N(y(a.getState(),t)),c(s.message,{variant:"success"}),P.columns.map((Y,q)=>{Y.lookup!==void 0&&n(ne({appId:t,index:q}))});break;case"info":c(s.message,{variant:"info"});break;default:r.error(s),c(s.message??h.contactSupport,{variant:"error"})}else r.error(s),c(h.contactSupport,{variant:"error"})},s=>{r.error("error",s),c(s??h.contactSupport,{variant:"error"})}),d(!1)}},V=()=>{v()?(k(),setTimeout(()=>{l()},1e3)):l()},[G,H]=o.useState("1"),K=(i,s)=>{H(s)},X=O(i=>I(i,t));return e.jsx(e.Fragment,{children:X&&e.jsxs(e.Fragment,{children:[e.jsxs(le,{closeDrawer:p,children:[e.jsx(xe,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(fe,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(ve,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(x,{title:"Dock to left",position:"bottom",children:e.jsx(S,{onClick:()=>{C(E.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ce,{})})}),e.jsx(x,{title:"Dock to right",position:"bottom",children:e.jsx(S,{onClick:()=>{C(E.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(me,{})})}),e.jsx(x,{title:"Close",position:"bottom",children:e.jsx(S,{onClick:p,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Se,{})})})]})}),e.jsx(z,{className:"pp-settings-container",children:e.jsx(L,{sx:{padding:0,margin:0},children:e.jsxs(ue,{value:G,children:[e.jsxs(de,{variant:"fullWidth",textColor:"primary",onChange:K,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(j,{label:"Form",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(j,{label:"Columns",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),!1,T!==!0&&e.jsx(j,{label:"Theme",value:"4",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(je,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(g,{value:"1",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Fe,{appId:t})})}),e.jsx(g,{value:"2",className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Ce,{appId:t})})}),!1,T!==!0&&e.jsx(g,{value:"4",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ke,{appId:t,source:Te.FORM,setIsUpdated:d})})})]})]})})}),e.jsx(z,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:U},children:e.jsxs(L,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(b,{variant:"outlined",className:"footer_action_button_apply",onClick:k,children:"Apply"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:V,children:"OK"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:p,children:"Cancel"})]})})]}),e.jsx(ge,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:W,setOpen:_,onConfirm:()=>{F(),l()},onKeep:()=>{l()}})]})})};export{Je as default};
