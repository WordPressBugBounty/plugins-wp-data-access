const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.31-D228Ou6z.js","./cm-1.0.31-BzgG35ZX.js","./redux-1.0.31-CuzmJMK6.js","./vendor-1.0.31-BmpNFhoq.js","./useMetadataColumns-1.0.31-CiEAB2Ka.js","./cjs-1.0.31-B-_HdexB.js","./Typography-1.0.31-BdhCS1KD.js","./lib-1.0.31-BbX3jq4e.js","./loglevel-1.0.31-BZ7XahX3.js","./lodash-1.0.31-BtCjXqrS.js","./moment-1.0.31-C5S46NFB.js","./iconBase-1.0.31-C37NsRUm.js","./notistack-1.0.31-CuGQWCbt.js","./useTheme-1.0.31-BXg8i2QZ.js","./RestApi-1.0.31-C4KxgDIV.js","./index-1.0.31-DboOrfK9.js","./useStoreTable-1.0.31-CksmwD3u.js","./useFormStore-1.0.31-DLiNtGR5.js","./Spinner-1.0.31-Be7r01J6.js","./AdminTheme-1.0.31-QbwKcRV7.js","./index-1.0.31-iZtMk8xz.js","./ActionsDml-1.0.31-DnIQKtBi.js","./index-1.0.31-C_6FsHsh.js","./TextField-1.0.31-TtMrk-_t.js","./FormHelperText-1.0.31-CQcG9a5q.js","./useFormControl-1.0.31-2YJOQA8g.js","./FormLabel-1.0.31-7Vju-x1c.js","./Menu-1.0.31-BOTBPSPr.js","./useControlled-1.0.31-27-LkxG9.js","./createSvgIcon-1.0.31-BC4iq9Gi.js","./MenuItem-1.0.31-CTowyoSp.js","./index-1.0.31-DPuH5k6e.js","./useTableUpdater-1.0.31-BVeL37Z7.js","./Stepper-1.0.31-CLZGpluU.js","./StepContent-1.0.31-BF2cnxnO.js","./Collapse-1.0.31-CkBm-DA4.js","./FormControlLabel-1.0.31-VNfgE3Oe.js","./Checkbox-1.0.31-vMcA9dS9.js","./SwitchBase-1.0.31-AIM_3--O.js","./ConfirmDialog-1.0.31-bZDmgpd0.js","./DialogContent-1.0.31-_6ykng6a.js","./ConfirmDialog-1.0.31--D4jr2go.css","./Link-1.0.31-ae0Alyop.js","./Accordion-1.0.31-CHSmI5oX.js","./AccordionSummary-1.0.31-DgKGWjRF.js","./AccordionDetails-1.0.31-DX5dPS4j.js","./Switch-1.0.31-LPOyRUXk.js","./main-1.0.31.js","./useFormUpdater-1.0.31-DkQqeUhN.js","./PremiumFeature-1.0.31-B1Kns6o6.js","./Slider-1.0.31-BDZ4XVru.js","./visuallyHidden-1.0.31-Dan1xhjv.js","./RadioGroup-1.0.31-1v754ceS.js","./Radio-1.0.31-DbEe8Ljo.js","./EnumTypeEnum-1.0.31-Ws4BsaYD.js","./react-number-format.es-1.0.31-BqNlp_-j.js","./ResizableDrawer-1.0.31-Bry8nGEd.js","./useScreenSize-1.0.31-DKas25yF.js","./SettingsForm-1.0.31-vEdNhl5B.js","./CssUnitTextField-1.0.31-DtyzTfQS.js","./SettingsFormRelationships-1.0.31-BJYItN0I.js","./ComponentColumn-1.0.31-CsaJiww1.js","./ActionsExplorer-1.0.31-COYUrYlM.js","./Autocomplete-1.0.31-DLbMViDM.js","./Close-1.0.31-BTPwVQpD.js","./Popper-1.0.31-QmfursjS.js","./ActionsApp-1.0.31-UHtVyR0L.js","./Tooltip-1.0.31-crORCg22.js","./ToggleButtonGroup-1.0.31-CFN9Fx2p.js","./ThemeSettings-1.0.31-DhXG_x5i.js","./index-1.0.31-C4m7fjwq.js","./Stack-1.0.31-Bz9nXUZB.js","./SettingsFormCode-1.0.31-NqUHCAnj.js","./index-1.0.31-CARe8LQx.js","./index-1.0.31-545nqCBP.js","./index-1.0.31-ujFQUobk.js","./TreeItem2-1.0.31-CX9p1qxK.js","./TreeItem2Provider-1.0.31-CzoUg0V9.js","./ThemeContainer-1.0.31-D01zq5BI.js","./dompurify-1.0.31-CCJo14B2.js","./FallbackSpinner-1.0.31-B4qqxHwC.js","./ThemeContainer-1.0.31-DR7D6eET.css"])))=>i.map(i=>d[i]);
import{_ as d}from"./main-1.0.31.js";import{j as e}from"./cm-1.0.31-BzgG35ZX.js";import{r as o}from"./redux-1.0.31-CuzmJMK6.js";import{l as i,a1 as W,S as c,N as D,ar as X,P as Y,a as y,bo as J,s as Q,bp as Z,bq as $,b as S,br as ee}from"./lib-1.0.31-BbX3jq4e.js";import{u as T,a as te}from"./RestApi-1.0.31-C4KxgDIV.js";import{A as L}from"./AdminTheme-1.0.31-QbwKcRV7.js";import{c as se}from"./ActionsSettings-1.0.31-Cf56Toxs.js";import{S as oe}from"./ScopeEnum-1.0.31-B4DDvIDj.js";import{e as u}from"./notistack-1.0.31-CuGQWCbt.js";import{T as h,C as z,a as O,b as re}from"./ConfirmDialog-1.0.31-bZDmgpd0.js";import{m as ie,j as ne,f as le,l as ae}from"./index-1.0.31-ujFQUobk.js";import{A as me,T as ce,M as ue,B as b}from"./cjs-1.0.31-B-_HdexB.js";import{B as de,a as pe,T as fe,b as j}from"./TabPanel-1.0.31-CQFpWPRX.js";import{u as ge}from"./useFormStore-1.0.31-DLiNtGR5.js";import{T as P}from"./TargetEnum-1.0.31-DPFnTxiX.js";import{S as f,B as xe}from"./Spinner-1.0.31-Be7r01J6.js";import{B as Se}from"./settings-1.0.31-zyRrYuee.js";import{D as he}from"./useTheme-1.0.31-BXg8i2QZ.js";import{T as be}from"./Typography-1.0.31-BdhCS1KD.js";import{I as _}from"./iconBase-1.0.31-C37NsRUm.js";import"./vendor-1.0.31-BmpNFhoq.js";import"./loglevel-1.0.31-BZ7XahX3.js";import"./lodash-1.0.31-BtCjXqrS.js";import"./moment-1.0.31-C5S46NFB.js";import"./DialogContent-1.0.31-_6ykng6a.js";import"./Menu-1.0.31-BOTBPSPr.js";import"./MenuItem-1.0.31-CTowyoSp.js";import"./index-1.0.31-DboOrfK9.js";const je=t=>{const r=T(n=>n.ui.formSettings.isOpen&&n.ui.formSettings.appId===t);return i.debug(t,r),r},_e=()=>{const t=T(r=>r.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},Te=t=>{const r=T(n=>{var p,a;return(a=(p=n.forms[t])==null?void 0:p.state)==null?void 0:a.isUpdated});return i.debug("isUpdated",r),r},ve=o.lazy(()=>d(()=>import("./SettingsColumns-1.0.31-D228Ou6z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]),import.meta.url)),Ce=o.lazy(()=>d(()=>import("./ResizableDrawer-1.0.31-Bry8nGEd.js"),__vite__mapDeps([56,1,2,3,57,7,8,9,10,14,6,19,11,5,12,27]),import.meta.url)),Fe=o.lazy(()=>d(()=>import("./SettingsForm-1.0.31-vEdNhl5B.js"),__vite__mapDeps([58,1,2,3,7,8,9,10,14,48,49,22,11,6,19,26,25,5,12,43,27,28,35,44,45,24,52,53,38,29,36,46,59,23,18,42,13,15,60,61,62,63,64,65,66,37,67,30,68,33,34,39,40,41,31]),import.meta.url)),ke=o.lazy(()=>d(()=>import("./ThemeSettings-1.0.31-DhXG_x5i.js"),__vite__mapDeps([69,1,2,3,14,7,8,9,10,13,15,6,5,11,12,49,22,19,26,25,70,18,24,46,38,28,71,40,50,51,27,36,42,52,53,29,59,23,43,35,44,45]),import.meta.url));o.lazy(()=>d(()=>import("./SettingsFormCode-1.0.31-NqUHCAnj.js"),__vite__mapDeps([72,1,2,3,73,74,5,6,7,8,9,10,11,12,39,19,40,41,75,14,67,65,28,18,76,77,29,35,37,38,25,49,22,26,78,47,16,21,13,15,57,79,80,81,43,27,44]),import.meta.url));const ot=({appId:t})=>{var R,A;i.debug(t);const r=te(),n=_e(),[p]=o.useState(W.getSelectors().selectTableById(c.getState().tables,t));i.debug(p);const[a,M]=o.useState(D.getSelectors().selectForm(c.getState().forms,t));i.debug(a);const N=ge(t),[U,Be]=o.useState(X.getSelectors().selectThemeById(c.getState().themes,t));i.debug(U);const v=Te(t),g=l=>{r(J({appId:t,isUpdated:l}))},[V,C]=o.useState(!1),w=((R=L)==null?void 0:R.palette.mode)===Y.LIGHT?(A=L)==null?void 0:A.palette.primary.main:"",F=l=>{r(Q({anchor:l}))},k=()=>{a!==void 0&&r(Z({appId:t,formState:a}))},m=()=>{r($({})),g(!1)},x=()=>{v?C(!0):(k(),m())},B=()=>{{const l=c.getState().ui.formSettings;se(t,oe.GLOBAL,l.isRelationTable===!0?P.RFORM:P.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":M(D.getSelectors().selectForm(c.getState().forms,t)),u(s.message,{variant:"success"}),N.columns.map((I,K)=>{I.lookup!==void 0&&r(ee({appId:t,index:K}))});break;case"info":u(s.message,{variant:"info"});break;default:i.error(s),u(s.message??S.contactSupport,{variant:"error"})}else i.error(s),u(S.contactSupport,{variant:"error"})},s=>{i.error("error",s),u(s??S.contactSupport,{variant:"error"})}),g(!1)}},G=()=>{v?(B(),setTimeout(()=>{m()},1e3)):m()},[E,H]=o.useState(0),q=o.useMemo(()=>{const l=[{title:"Form",icon:e.jsx(ie,{})},{title:"Columns",icon:e.jsx(ne,{})},{title:"Hooks",icon:e.jsx(le,{})},{title:"Theme",icon:e.jsx(ae,{})}];return n?l.splice(0,3):l},[n]);return je(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Ce,{closeDrawer:x,children:[e.jsxs(me,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ce,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(be,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(h,{title:"Dock to left",position:"bottom",children:e.jsx(_,{onClick:()=>{F(y.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(de,{})})}),e.jsx(h,{title:"Dock to right",position:"bottom",children:e.jsx(_,{onClick:()=>{F(y.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(pe,{})})}),e.jsx(h,{title:"Close",position:"bottom",children:e.jsx(_,{onClick:x,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ue,{})})})]}),e.jsx(Se,{menuItems:q,menuIndex:E,setMenu:H,hide:[2]})]}),e.jsx(z,{className:"pp-settings-container",children:e.jsx(O,{sx:{padding:0,margin:0},children:e.jsx(fe,{value:E,children:e.jsxs(xe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(j,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Fe,{appId:t})})}),e.jsx(j,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ve,{appId:t})})}),!1,n!==!0&&e.jsx(j,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ke,{appId:t,source:he.FORM,setIsUpdated:g})})})]})})})}),e.jsx(z,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(O,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(b,{variant:"outlined",className:"footer_action_button_apply",onClick:B,children:"Apply"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:G,children:"OK"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:x,children:"Cancel"})]})})]})}),e.jsx(re,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:V,setOpen:C,onConfirm:()=>{k(),m()},onKeep:()=>{m()}})]})};export{ot as default};
