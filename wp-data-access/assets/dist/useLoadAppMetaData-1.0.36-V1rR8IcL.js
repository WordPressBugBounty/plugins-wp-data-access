import{r as y}from"./redux-1.0.36-Dw38apwx.js";import{R as n}from"./RestApi-1.0.36-XUqEDvWp.js";import{C as o,l as r,B as D,A as i,D as L,E as h,b as f}from"./lib-1.0.36-RK2jtnD_.js";import{e as U}from"./notistack-1.0.36-BWLrSPn1.js";import{u as O,S as v,D as x}from"./StoreTypeEnum-1.0.36-7-S8NaGy.js";import{a as k}from"./hooks-1.0.36-DVpFeylj.js";const G=(p,e,a=!1)=>{n(o.appUrlAppList,{},p,e,a)},K=(p,e,a=!1)=>{n(o.appUrlAppInit,{},p,e,a)},Q=(p,e,a,t=!1)=>{n(o.appUrlAppSetSiteLanguage,{lang:p},e,a,t)},V=(p,e,a,t,l=!1)=>{r.debug(p,e);const A=D(p);p.appType==i.APPCONTAINER?(A.app_apps=p.appApps,delete A.app_dbs,delete A.app_tbl,delete A.app_cls):A.app_table=JSON.stringify(e),r.debug(A),n(p.appType==i.APPCONTAINER?o.appUrlAppCreateApp:o.appUrlAppCreate,A,a,t,l)},W=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppDetails,p,e,a,t)},X=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppRelationshipCreate,p,e,a,t)},Y=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppRelationshipUpdate,p,e,a,t)},Z=(p,e,a,t=!1)=>{r.debug(p);const l=D(p,!0);p.appType==i.APPCONTAINER&&(l.app_apps=p.appApps,delete l.app_dbs,delete l.app_tbl,delete l.app_cls),r.debug(l),n(p.appType==i.APPCONTAINER?o.appUrlAppSaveApp:o.appUrlAppSave,l,e,a,t)},$=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppRemove,{app_id:p},e,a,t)},I=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppCopy,{app_id:p},e,a,t)},pp=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppExport,{app_id:p},e,a,t)},H=(p,e,a,t=!1)=>{r.debug(p),n(o.appUrlAppMeta,{app_id:p},e,a,t)},ep=(p,e,a,t,l,A=!1)=>{r.debug(p,e),n(o.appUrlTableMeta,{dbs:p,tbl:e,waa:a},t,l,A)},ap=(p,e,a,t,l=!1)=>{r.debug(p,e),n(o.appUrlRenameDatabase,{dbs_source:p,dbs_destination:e},a,t,l)},tp=(p,e,a,t,l,A,m,b)=>{const S=k(),{prepareAppStore:P,prepareApp:R}=O(p,v.APP),[E,d]=y.useState(!1),[N,g]=y.useState(),[M,C]=y.useState(""),T=s=>{var c,_;if(r.debug(s),s.app&&s.app.app&&Array.isArray(s.app.app)&&s.app.container&&Array.isArray(s.app.container)&&s.app.apps&&Array.isArray(s.app.apps))if(s.app.app[0].app_type==i.APPCONTAINER)R(s,m),g(i.APPCONTAINER),d(!0);else if(s.app.app[0].app_type==i.CHART){const u={...s};u.src=x(e,(_=(c=s==null?void 0:s.app)==null?void 0:c.container[0])==null?void 0:_.cnt_id),m===!0&&(u.isExploring=!0),b!==void 0&&(u.appRootId=b),S(L({appId:p,metaData:u})),g(i.CHART),d(!0)}else P(e,s,a===!0,void 0,b,()=>{})&&(S(h({appId:p,property:{staticFilter:t,shortcodeArgs:l}})),g(s.app.app[0].app_type),d(!0));else U(f.contactSupport,{variant:"error"}),C(f.contactSupport)};return{loadAppMetaData:()=>{H(e,s=>{const c=s==null?void 0:s.data;r.debug("response data",c),T(c)},s=>{r.error("error",s),U(s??f.contactSupport,{variant:"error"}),C(s??f.contactSupport)})},processMetaData:T,metaDataLoaded:E,loadError:M,appType:N}};export{Z as a,H as b,I as c,pp as d,$ as e,V as f,Q as g,ap as h,G as i,K as j,ep as k,W as l,X as m,Y as n,tp as u};
