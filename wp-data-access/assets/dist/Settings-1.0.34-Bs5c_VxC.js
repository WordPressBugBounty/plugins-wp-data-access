const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.34-BTVHo8aY.js","./cm-1.0.34-jkgb9fqk.js","./redux-1.0.34-BykGtd51.js","./vendor-1.0.34-CN03Eozo.js","./useMetadataColumns-1.0.34-DLi-zMFK.js","./cjs-1.0.34-s8JVqkTy.js","./Typography-1.0.34-CPcqRq0L.js","./lib-1.0.34-CKToGW0d.js","./loglevel-1.0.34-BZ7XahX3.js","./lodash-1.0.34-Bq_dBoMp.js","./moment-1.0.34-C5S46NFB.js","./iconBase-1.0.34-CNhS-hAm.js","./useEnhancedEffect-1.0.34-BO4gRPLZ.js","./notistack-1.0.34-CSyPb4yh.js","./useTheme-1.0.34-Dw3pdMXg.js","./RestApi-1.0.34-BxEfvjo_.js","./index-1.0.34-DYDf2euy.js","./useStoreTable-1.0.34-BdrzT-QA.js","./useFormStore-1.0.34-DKJCi3HA.js","./Spinner-1.0.34-Co4td_et.js","./AdminTheme-1.0.34-9phfEwG6.js","./index-1.0.34-Cp4wrJ-G.js","./ActionsDml-1.0.34-JQvmPQlJ.js","./index-1.0.34-BrUfr5b2.js","./TextField-1.0.34-CRuVZ2IL.js","./useFormControl-1.0.34-DpRVCPB9.js","./Menu-1.0.34-BOIQgOXy.js","./FormHelperText-1.0.34-DgFI7tJ8.js","./FormLabel-1.0.34-f0a-atWV.js","./useControlled-1.0.34-CU9helXh.js","./createSvgIcon-1.0.34-oaLYTlaR.js","./MenuItem-1.0.34-B8z32nyF.js","./index-1.0.34-lslFWrRx.js","./useTableUpdater-1.0.34-BLO2sgaU.js","./Stepper-1.0.34-mB2if67t.js","./StepContent-1.0.34-C4gQTgBx.js","./Collapse-1.0.34-BSZnzI45.js","./FormControlLabel-1.0.34-BSZPBg3u.js","./Checkbox-1.0.34-d5tAuq8A.js","./SwitchBase-1.0.34-ptE6Q_pF.js","./ConfirmDialog-1.0.34-DWUfUq0S.js","./DialogContent-1.0.34-BpZCA1LJ.js","./ConfirmDialog-1.0.34--D4jr2go.css","./Link-1.0.34-DYvSaOHE.js","./AccordionSummary-1.0.34-BSahbgsH.js","./AccordionDetails-1.0.34-_Aajd3cL.js","./Switch-1.0.34-CATLadEc.js","./main-1.0.34.js","./useFormUpdater-1.0.34-D6h39DjR.js","./PremiumFeature-1.0.34-DfZQs3Ud.js","./Slider-1.0.34-DrpZuhM1.js","./visuallyHidden-1.0.34-Dan1xhjv.js","./RadioGroup-1.0.34-DnN3QK5E.js","./Radio-1.0.34-CADP3cAA.js","./EnumTypeEnum-1.0.34-Ws4BsaYD.js","./react-number-format.es-1.0.34-Dcon4ill.js","./ResizableDrawer-1.0.34-BbE34BCl.js","./useScreenSize-1.0.34-BKzZJVVv.js","./SettingsForm-1.0.34-DSIbVncc.js","./CssUnitTextField-1.0.34-6SKhBID2.js","./SettingsFormRelationships-1.0.34-RbWjWA9V.js","./ComponentColumn-1.0.34-Da1Sngcg.js","./ActionsExplorer-1.0.34-CLjfe2ax.js","./Autocomplete-1.0.34-B2v6NqWM.js","./Close-1.0.34-Bguo8ejS.js","./Popper-1.0.34-DHAHquMb.js","./ActionsApp-1.0.34-BRXzkmL7.js","./Tooltip-1.0.34-DVgtOKOZ.js","./ToggleButtonGroup-1.0.34-CAHLUf-u.js","./ThemeSettings-1.0.34-Ca3RNfPy.js","./index-1.0.34-DTAHnKg4.js","./Stack-1.0.34-BGhY5B94.js","./SettingsFormCode-1.0.34-oRoThaJn.js","./index-1.0.34-v76L2xLp.js","./index-1.0.34-CJY587q6.js","./index-1.0.34-BtSBPsUk.js","./TreeItem2-1.0.34-CUQgGzbl.js","./TreeItem2Provider-1.0.34-DXv5kyu_.js","./ThemeContainer-1.0.34-DJBjl5QY.js","./dompurify-1.0.34-DhD2mIk-.js","./FallbackSpinner-1.0.34-CVwfde-i.js","./ThemeContainer-1.0.34-DR7D6eET.css"])))=>i.map(i=>d[i]);
import{_ as u}from"./main-1.0.34.js";import{j as e}from"./cm-1.0.34-jkgb9fqk.js";import{r as o}from"./redux-1.0.34-BykGtd51.js";import{l as i,a2 as X,S as m,N as y,as as Y,P as J,bn as Q,a as L,s as Z,bq as $,br as ee,bs as te,b as h,bt as se}from"./lib-1.0.34-CKToGW0d.js";import{u as C,a as oe}from"./RestApi-1.0.34-BxEfvjo_.js";import{A as z}from"./AdminTheme-1.0.34-9phfEwG6.js";import{c as re}from"./ActionsSettings-1.0.34-D8Qcsc97.js";import{S as ie}from"./ScopeEnum-1.0.34-B4DDvIDj.js";import{e as c}from"./notistack-1.0.34-CSyPb4yh.js";import{T as b,C as M,a as O,b as ne}from"./ConfirmDialog-1.0.34-DWUfUq0S.js";import{m as ae,j as le,f as me,l as ce}from"./index-1.0.34-BtSBPsUk.js";import{A as ue,T as de,M as pe,B as j}from"./cjs-1.0.34-s8JVqkTy.js";import{B as fe,a as ge,T as xe,b as _}from"./TabPanel-1.0.34-CMifEkiN.js";import{u as Se}from"./useFormStore-1.0.34-DKJCi3HA.js";import{T as P}from"./TargetEnum-1.0.34-DPFnTxiX.js";import{B as he,S as f}from"./Spinner-1.0.34-Co4td_et.js";import{B as be}from"./settings-1.0.34-CczHVXWk.js";import{c as je,D as _e}from"./useTheme-1.0.34-Dw3pdMXg.js";import{T as Te}from"./Typography-1.0.34-CPcqRq0L.js";import{I as T}from"./iconBase-1.0.34-CNhS-hAm.js";import"./vendor-1.0.34-CN03Eozo.js";import"./loglevel-1.0.34-BZ7XahX3.js";import"./lodash-1.0.34-Bq_dBoMp.js";import"./moment-1.0.34-C5S46NFB.js";import"./useEnhancedEffect-1.0.34-BO4gRPLZ.js";import"./DialogContent-1.0.34-BpZCA1LJ.js";import"./Menu-1.0.34-BOIQgOXy.js";import"./MenuItem-1.0.34-B8z32nyF.js";import"./index-1.0.34-DYDf2euy.js";const Ce=t=>{const r=C(a=>a.ui.formSettings.isOpen&&a.ui.formSettings.appId===t);return i.debug(t,r),r},Fe=()=>{const t=C(r=>r.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},ke=t=>{const r=C(a=>{var d,p;return(p=(d=a.forms[t])==null?void 0:d.state)==null?void 0:p.isUpdated});return i.debug("isUpdated",r),r},ve=o.lazy(()=>u(()=>import("./SettingsColumns-1.0.34-BTVHo8aY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]),import.meta.url)),Be=o.lazy(()=>u(()=>import("./ResizableDrawer-1.0.34-BbE34BCl.js"),__vite__mapDeps([56,1,2,3,57,7,8,9,10,15,6,20,12,11,5,13,26]),import.meta.url)),Ee=o.lazy(()=>u(()=>import("./SettingsForm-1.0.34-DSIbVncc.js"),__vite__mapDeps([58,1,2,3,7,8,9,10,15,48,49,23,11,6,12,20,28,25,5,13,44,29,36,45,27,52,53,39,30,37,46,59,24,26,19,43,14,16,60,61,62,63,64,65,66,38,67,31,68,34,35,40,41,42,32]),import.meta.url)),De=o.lazy(()=>u(()=>import("./ThemeSettings-1.0.34-Ca3RNfPy.js"),__vite__mapDeps([69,1,2,3,15,7,8,9,10,14,16,6,5,11,12,13,49,23,20,28,25,70,19,27,46,39,29,71,41,50,51,26,37,43,52,53,30,59,24,44,36,45]),import.meta.url));o.lazy(()=>u(()=>import("./SettingsFormCode-1.0.34-oRoThaJn.js"),__vite__mapDeps([72,1,2,3,73,74,5,6,7,8,9,10,11,12,13,40,20,41,42,75,15,19,67,29,65,76,77,30,38,39,25,36,49,23,28,78,47,17,22,14,16,57,79,80,81,44,26]),import.meta.url));const at=({appId:t})=>{var R,A;i.debug(t);const r=oe(),a=Fe(),d=je(t),[p]=o.useState(X.getSelectors().selectTableById(m.getState().tables,t));i.debug(p);const[g,N]=o.useState(y.getSelectors().selectForm(m.getState().forms,t));i.debug(g);const U=Se(t),[V,Re]=o.useState(Y.getSelectors().selectThemeById(m.getState().themes,t));i.debug(V);const F=ke(t),x=n=>{r($({appId:t,isUpdated:n}))},[w,k]=o.useState(!1),G=((R=z)==null?void 0:R.palette.mode)===J.LIGHT?(A=z)==null?void 0:A.palette.primary.main:"",v=n=>{r(Z({anchor:n}))},B=()=>{g!==void 0&&r(te({appId:t,formState:g}))},l=()=>{r(ee({})),x(!1)},S=()=>{F?k(!0):(B(),l())},E=()=>{{const n=m.getState().ui.formSettings;re(t,ie.GLOBAL,n.isRelationTable===!0?P.RFORM:P.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":N(y.getSelectors().selectForm(m.getState().forms,t)),c(s.message,{variant:"success"}),U.columns.map((I,W)=>{I.lookup!==void 0&&r(se({appId:t,index:W}))});break;case"info":c(s.message,{variant:"info"});break;default:i.error(s),c(s.message??h.contactSupport,{variant:"error"})}else i.error(s),c(h.contactSupport,{variant:"error"})},s=>{i.error("error",s),c(s??h.contactSupport,{variant:"error"})}),x(!1)}},H=()=>{F?(E(),setTimeout(()=>{l()},1e3)):l()},[D,q]=o.useState(0),K=o.useMemo(()=>{const n=[{title:"Form",icon:e.jsx(ae,{})},{title:"Columns",icon:e.jsx(le,{})},{title:"Hooks",icon:e.jsx(me,{})},{title:"Theme",icon:e.jsx(ce,{})}];return Q(d)?n.splice(0,2):a?n.splice(0,3):n},[a]);return Ce(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Be,{closeDrawer:S,children:[e.jsxs(ue,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(de,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Te,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(b,{title:"Dock to left",position:"bottom",children:e.jsx(T,{onClick:()=>{v(L.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(fe,{})})}),e.jsx(b,{title:"Dock to right",position:"bottom",children:e.jsx(T,{onClick:()=>{v(L.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ge,{})})}),e.jsx(b,{title:"Close",position:"bottom",children:e.jsx(T,{onClick:S,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(pe,{})})})]}),e.jsx(be,{menuItems:K,menuIndex:D,setMenu:q,hide:[2]})]}),e.jsx(M,{className:"pp-settings-container",children:e.jsx(O,{sx:{padding:0,margin:0},children:e.jsx(xe,{value:D,children:e.jsxs(he,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(_,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Ee,{appId:t})})}),e.jsx(_,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ve,{appId:t})})}),!1,a!==!0&&e.jsx(_,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(De,{appId:t,source:_e.FORM,setIsUpdated:x})})})]})})})}),e.jsx(M,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:G},children:e.jsxs(O,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(j,{variant:"outlined",className:"footer_action_button_apply",onClick:E,children:"Apply"}),e.jsx(j,{variant:"outlined",className:"footer_action_button",onClick:H,children:"OK"}),e.jsx(j,{variant:"outlined",className:"footer_action_button",onClick:S,children:"Cancel"})]})})]})}),e.jsx(ne,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:w,setOpen:k,onConfirm:()=>{B(),l()},onKeep:()=>{l()}})]})};export{at as default};
