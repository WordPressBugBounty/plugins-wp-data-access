const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.24-PmipoGN4.js","./cm-1.0.24-lBsX3THK.js","./redux-1.0.24-Bx8jJ3ee.js","./vendor-1.0.24-BmpNFhoq.js","./useMetadataColumns-1.0.24-CC2X-0cY.js","./index-1.0.24-CyelUMLZ.js","./Typography-1.0.24-DtpcakL_.js","./lib-1.0.24-up-HxGpi.js","./loglevel-1.0.24-BZ7XahX3.js","./lodash-1.0.24-CC2RnyUh.js","./moment-1.0.24-C5S46NFB.js","./iconBase-1.0.24-C7lJg7VQ.js","./notistack-1.0.24-EH6RgmCJ.js","./useTheme-1.0.24-CdGcp-pX.js","./RestApi-1.0.24-BCmVwqnT.js","./index-1.0.24-COcPbr-v.js","./useStoreTable-1.0.24-CCGHEC8d.js","./useFormStore-1.0.24-CeQknkKq.js","./Spinner-1.0.24-DzEoy0TD.js","./CardContent-1.0.24-DpYcLPhl.js","./AdminTheme-1.0.24-DxOFSSNd.js","./index-1.0.24-BtVZ14ow.js","./ActionsDml-1.0.24-BgEAxcii.js","./index-1.0.24-DqBQ5tn0.js","./TextField-1.0.24-CX3Aj71c.js","./FormHelperText-1.0.24-dIoAVumM.js","./useFormControl-1.0.24-BVJe4wXv.js","./FormLabel-1.0.24-DNrTGbzF.js","./Menu-1.0.24-Bmzze4W5.js","./ThemeProvider-1.0.24-koXQmW7k.js","./useControlled-1.0.24-DnsqB4VW.js","./createSvgIcon-1.0.24-BKX7HR5-.js","./MenuItem-1.0.24-cnqjqUCU.js","./index-1.0.24-vo0tC6xY.js","./useTableUpdater-1.0.24-BxXiAeyi.js","./Stepper-1.0.24-gMaRg80L.js","./StepContent-1.0.24-BPpZKR0W.js","./Collapse-1.0.24-Xb_bb7om.js","./FormControlLabel-1.0.24-jTuSRk-Y.js","./Checkbox-1.0.24-CEJQc5ad.js","./SwitchBase-1.0.24-k3CO2XxE.js","./ConfirmDialog-1.0.24-5s_WiKiN.js","./DialogContent-1.0.24-o2zFJd9S.js","./ConfirmDialog-1.0.24--D4jr2go.css","./Link-1.0.24-CcP-iIZr.js","./Accordion-1.0.24-uvRe3lte.js","./AccordionSummary-1.0.24-B564M2Bj.js","./AccordionDetails-1.0.24-DwKVwnKj.js","./Switch-1.0.24-BzowSg2t.js","./main-1.0.24.js","./useFormUpdater-1.0.24-OG4sB2Qw.js","./PremiumFeature-1.0.24-DZWmlncS.js","./Slider-1.0.24-C0QPfEHu.js","./visuallyHidden-1.0.24-Dan1xhjv.js","./RadioGroup-1.0.24-C4yZZRVK.js","./Radio-1.0.24-DPbrWB-2.js","./EnumTypeEnum-1.0.24-Ws4BsaYD.js","./react-number-format.es-1.0.24-DgMJPfXk.js","./ResizableDrawer-1.0.24-Do6nC7lH.js","./useScreenSize-1.0.24-18t2sPqy.js","./SettingsForm-1.0.24-bjC5mpG5.js","./CssUnitTextField-1.0.24-CJffQMHI.js","./SettingsFormRelationships-1.0.24-CrzcQng_.js","./ComponentColumn-1.0.24-BmTb0SOR.js","./ActionsExplorer-1.0.24-C9nnL7_n.js","./Autocomplete-1.0.24-C17x-b9y.js","./Close-1.0.24-16O9KsVp.js","./Popper-1.0.24-pV6SBss6.js","./ActionsApp-1.0.24-CVhliqOT.js","./Tooltip-1.0.24-C0iSk1Jx.js","./ToggleButtonGroup-1.0.24-Dd1FjW0I.js","./ThemeSettings-1.0.24-BbrAbc6r.js","./index-1.0.24-Ddib3Wz4.js","./Stack-1.0.24-BTyd9Rys.js","./SettingsFormCode-1.0.24-CO4PwnHC.js","./index-1.0.24-yBvX-0Wq.js","./index-1.0.24-BVJ1RJGw.js","./index-1.0.24-B9zHNwKy.js","./TreeItem2-1.0.24-D_fDEhFd.js","./TreeItem2Provider-1.0.24-CoOVVVQw.js","./FormContainer-1.0.24-Dle0TZkf.js","./ThemeContainer-1.0.24-C7p5hOM5.js","./FallbackSpinner-1.0.24-CO6nSoMx.js","./dompurify-1.0.24-CCJo14B2.js","./dayjs.min-1.0.24-CNSrml1W.js","./CardActions-1.0.24-BjMbkSaq.js","./FormContainer-1.0.24-DR7D6eET.css"])))=>i.map(i=>d[i]);
import{_ as d}from"./main-1.0.24.js";import{j as e}from"./cm-1.0.24-lBsX3THK.js";import{r as o}from"./redux-1.0.24-Bx8jJ3ee.js";import{l as i,K as W,S as c,av as D,ac as X,P as Y,a as y,bS as $,s as J,b_ as Q,b$ as Z,b as x,c0 as ee}from"./lib-1.0.24-up-HxGpi.js";import{u as T,a as te}from"./RestApi-1.0.24-BCmVwqnT.js";import{A as L}from"./AdminTheme-1.0.24-DxOFSSNd.js";import{d as se}from"./ActionsSettings-1.0.24-Cyf5k2fb.js";import{S as oe}from"./ScopeEnum-1.0.24-B4DDvIDj.js";import{e as u}from"./notistack-1.0.24-EH6RgmCJ.js";import{T as h,C as re}from"./ConfirmDialog-1.0.24-5s_WiKiN.js";import{n as ie,j as ne,f as le,l as ae}from"./index-1.0.24-B9zHNwKy.js";import{A as me,T as ce,M as ue}from"./index-1.0.24-CyelUMLZ.js";import{B as de,a as pe,T as fe,b}from"./TabPanel-1.0.24-DAjZ0-bn.js";import{u as ge}from"./useFormStore-1.0.24-CeQknkKq.js";import{T as z}from"./TargetEnum-1.0.24-DPFnTxiX.js";import{S as f,B as Se}from"./Spinner-1.0.24-DzEoy0TD.js";import{B as xe}from"./settings-1.0.24-CtEnxau0.js";import{D as he}from"./useTheme-1.0.24-CdGcp-pX.js";import{T as be}from"./Typography-1.0.24-DtpcakL_.js";import{I as j}from"./iconBase-1.0.24-C7lJg7VQ.js";import{C as O,a as P,B as _}from"./CardContent-1.0.24-DpYcLPhl.js";import"./vendor-1.0.24-BmpNFhoq.js";import"./loglevel-1.0.24-BZ7XahX3.js";import"./lodash-1.0.24-CC2RnyUh.js";import"./moment-1.0.24-C5S46NFB.js";import"./DialogContent-1.0.24-o2zFJd9S.js";import"./Menu-1.0.24-Bmzze4W5.js";import"./ThemeProvider-1.0.24-koXQmW7k.js";import"./MenuItem-1.0.24-cnqjqUCU.js";import"./index-1.0.24-COcPbr-v.js";const je=t=>{const r=T(n=>{var p,l;return(l=(p=n.forms[t])==null?void 0:p.state)==null?void 0:l.isUpdated});return i.debug("isUpdated",r),r},_e=t=>{const r=T(n=>n.ui.formSettings.isOpen&&n.ui.formSettings.appId===t);return i.debug(t,r),r},Te=()=>{const t=T(r=>r.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},ve=o.lazy(()=>d(()=>import("./SettingsColumns-1.0.24-PmipoGN4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]),import.meta.url)),Ce=o.lazy(()=>d(()=>import("./ResizableDrawer-1.0.24-Do6nC7lH.js"),__vite__mapDeps([58,1,2,3,59,7,8,9,10,14,6,29,11,28,5,12]),import.meta.url)),Fe=o.lazy(()=>d(()=>import("./SettingsForm-1.0.24-bjC5mpG5.js"),__vite__mapDeps([60,1,2,3,7,8,9,10,14,50,51,23,11,6,20,27,26,5,12,45,28,29,30,37,46,47,25,54,55,40,31,38,48,61,24,18,19,44,13,15,62,63,64,65,66,67,68,39,69,32,70,35,36,41,42,43,33]),import.meta.url)),ke=o.lazy(()=>d(()=>import("./ThemeSettings-1.0.24-BbrAbc6r.js"),__vite__mapDeps([71,1,2,3,14,7,8,9,10,13,15,6,5,11,12,51,23,20,27,26,72,18,25,48,40,30,73,42,28,29,52,53,38,44,54,55,31,61,24,19,45,37,46,47]),import.meta.url));o.lazy(()=>d(()=>import("./SettingsFormCode-1.0.24-CO4PwnHC.js"),__vite__mapDeps([74,1,2,3,75,76,42,6,7,8,9,10,5,11,12,28,29,41,20,19,43,77,14,69,67,30,18,78,79,31,37,39,40,26,51,23,27,80,49,22,81,13,15,82,59,16,83,84,85,86,45,46]),import.meta.url));const it=({appId:t})=>{var R,A;i.debug(t);const r=te(),n=Te(),[p]=o.useState(W.getSelectors().selectTableById(c.getState().tables,t));i.debug(p);const[l,M]=o.useState(D.getSelectors().selectForm(c.getState().forms,t));i.debug(l);const U=ge(t),[N,Be]=o.useState(X.getSelectors().selectThemeById(c.getState().themes,t));i.debug(N);const v=je(t),g=m=>{r($({appId:t,isUpdated:m}))},[V,C]=o.useState(!1),w=((R=L)==null?void 0:R.palette.mode)===Y.LIGHT?(A=L)==null?void 0:A.palette.primary.main:"",F=m=>{r(J({anchor:m}))},k=()=>{l!==void 0&&r(Q({appId:t,formState:l}))},a=()=>{r(Z({})),g(!1)},S=()=>{v?C(!0):(k(),a())},B=()=>{{const m=c.getState().ui.formSettings;se(t,oe.GLOBAL,m.isRelationTable===!0?z.RFORM:z.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":M(D.getSelectors().selectForm(c.getState().forms,t)),u(s.message,{variant:"success"}),U.columns.map((q,I)=>{q.lookup!==void 0&&r(ee({appId:t,index:I}))});break;case"info":u(s.message,{variant:"info"});break;default:i.error(s),u(s.message??x.contactSupport,{variant:"error"})}else i.error(s),u(x.contactSupport,{variant:"error"})},s=>{i.error("error",s),u(s??x.contactSupport,{variant:"error"})}),g(!1)}},G=()=>{v?(B(),setTimeout(()=>{a()},1e3)):a()},[E,H]=o.useState(0),K=o.useMemo(()=>[{title:"Form",icon:e.jsx(ie,{})},{title:"Columns",icon:e.jsx(ne,{})},{title:"Hooks",icon:e.jsx(le,{})},{title:"Theme",icon:e.jsx(ae,{})}],[]);return _e(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Ce,{closeDrawer:S,children:[e.jsxs(me,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ce,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(be,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(h,{title:"Dock to left",position:"bottom",children:e.jsx(j,{onClick:()=>{F(y.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(de,{})})}),e.jsx(h,{title:"Dock to right",position:"bottom",children:e.jsx(j,{onClick:()=>{F(y.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(pe,{})})}),e.jsx(h,{title:"Close",position:"bottom",children:e.jsx(j,{onClick:S,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ue,{})})})]}),e.jsx(xe,{menuItems:K,menuIndex:E,setMenu:H,hide:[2]})]}),e.jsx(O,{className:"pp-settings-container",children:e.jsx(P,{sx:{padding:0,margin:0},children:e.jsx(fe,{value:E,children:e.jsxs(Se,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(b,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Fe,{appId:t})})}),e.jsx(b,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ve,{appId:t})})}),!1,n!==!0&&e.jsx(b,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ke,{appId:t,source:he.FORM,setIsUpdated:g})})})]})})})}),e.jsx(O,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(P,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(_,{variant:"outlined",className:"footer_action_button_apply",onClick:B,children:"Apply"}),e.jsx(_,{variant:"outlined",className:"footer_action_button",onClick:G,children:"OK"}),e.jsx(_,{variant:"outlined",className:"footer_action_button",onClick:S,children:"Cancel"})]})})]})}),e.jsx(re,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:V,setOpen:C,onConfirm:()=>{k(),a()},onKeep:()=>{a()}})]})};export{it as default};
