import{_ as w,y as J,j as y}from"./cm-1.0.40-DO7MoydR.js";import{r as E}from"./redux-1.0.40-W_04YL6Z.js";import{u as pe}from"./useThemeProps-1.0.40-CnqSFvnT.js";import{h as W,g as G,j as U,l as ge,n as he,o as be}from"./Typography-1.0.40-oRKYqE3b.js";import{a as Q,d as R}from"./iconBase-1.0.40-CH6TO7hF.js";import{ac as Ee,W as we}from"./index-1.0.40-DmMQghWt.js";import{u as Te}from"./ThemeProvider-1.0.40-D9QtC9zH.js";import{u as xe}from"./useEnhancedEffect-1.0.40-DvrM_gBo.js";import{c as Y}from"./createSvgIcon-1.0.40-DryBVjDb.js";import{P as X}from"./index-1.0.40--1Cd81c-.js";function Me(e){return pe}function Ce(e){return W("MuiSimpleTreeView",e)}G("MuiSimpleTreeView",["root"]);const ye=(e,t)=>{const r=E.useRef({}),[n,l]=E.useState(()=>{const c={};return e.forEach(s=>{s.models&&Object.entries(s.models).forEach(([u,d])=>{r.current[u]={isControlled:t[u]!==void 0,getDefaultValue:d.getDefaultValue},c[u]=d.getDefaultValue(t)})}),c});return Object.fromEntries(Object.entries(r.current).map(([c,s])=>{const u=t[c]??n[c];return[c,{value:u,setControlledValue:d=>{s.isControlled||l(o=>w({},o,{[c]:d}))}}]}))};class Se{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,r,n={}){let l=this.events[t];l||(l={highPriority:new Map,regular:new Map},this.events[t]=l),n.isFirst?l.highPriority.set(r,!0):l.regular.set(r,!0)}removeListener(t,r){this.events[t]&&(this.events[t].regular.delete(r),this.events[t].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(t,...r){const n=this.events[t];if(!n)return;const l=Array.from(n.highPriority.keys()),f=Array.from(n.regular.keys());for(let c=l.length-1;c>=0;c-=1){const s=l[c];n.highPriority.has(s)&&s.apply(this,r)}for(let c=0;c<f.length;c+=1){const s=f[c];n.regular.has(s)&&s.apply(this,r)}}once(t,r){const n=this;this.on(t,function l(...f){n.removeListener(t,l),r.apply(n,f)})}}const Re=e=>e.isPropagationStopped!==void 0,Z=()=>{const[e]=E.useState(()=>new Se),t=E.useCallback((...n)=>{const[l,f,c={}]=n;c.defaultMuiPrevented=!1,!(Re(c)&&c.isPropagationStopped())&&e.emit(l,f,c)},[e]),r=E.useCallback((n,l)=>(e.on(n,l),()=>{e.removeListener(n,l)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:r}}};Z.params={};const H=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};H.params={};let z=0;const Pe=()=>(z+=1,`mui-tree-view-${z}`),N=({id:e,treeId:t="",itemId:r})=>e??`${t}-${r}`,B=({params:e,state:t,setState:r})=>{E.useEffect(()=>{r(l=>l.id.treeId===e.id&&l.id.treeId!==void 0?l:w({},l,{id:w({},l.id,{treeId:e.id??Pe()})}))},[r,e.id]);const n=e.id??t.id.treeId;return{getRootProps:()=>({id:n}),contextValue:{treeId:n}}};B.params={id:!0};B.getInitialState=({id:e})=>({id:{treeId:e??void 0}});const ve=[Z,H,B],Ve=["slots","slotProps","apiRef","experimentalFeatures"],ke=e=>{let{props:{slots:t,slotProps:r,apiRef:n,experimentalFeatures:l},plugins:f}=e,c=J(e.props,Ve);const s={};f.forEach(a=>{Object.assign(s,a.params)});const u={},d={};Object.keys(c).forEach(a=>{const m=c[a];s[a]?u[a]=m:d[a]=m});const o=l??{},i=f.reduce((a,m)=>m.getDefaultizedParams?m.getDefaultizedParams({params:a,experimentalFeatures:o}):a,u);return{apiRef:n,forwardedProps:d,pluginParams:i,slots:t??{},slotProps:r??{},experimentalFeatures:o}},Ae=({plugins:e,instance:t,publicAPI:r,rootRef:n})=>({runItemPlugins:s=>{let u=null,d=null;const o=[],i={};e.forEach(h=>{if(!h.itemPlugin)return;const g=h.itemPlugin({props:s,rootRef:u,contentRef:d});g!=null&&g.rootRef&&(u=g.rootRef),g!=null&&g.contentRef&&(d=g.contentRef),g!=null&&g.propsEnhancers&&(o.push(g.propsEnhancers),Object.keys(g.propsEnhancers).forEach(p=>{i[p]=!0}))});const a=h=>g=>{const p={};return o.forEach(I=>{const b=I[h];b!=null&&Object.assign(p,b(g))}),p},m=Object.fromEntries(Object.keys(i).map(h=>[h,a(h)]));return{contentRef:d,rootRef:u,propsEnhancers:m}},wrapItem:({itemId:s,children:u})=>{let d=u;for(let o=e.length-1;o>=0;o-=1){const i=e[o];i.wrapItem&&(d=i.wrapItem({itemId:s,children:d,instance:t}))}return d},wrapRoot:({children:s})=>{let u=s;for(let d=e.length-1;d>=0;d-=1){const o=e[d];o.wrapRoot&&(u=o.wrapRoot({children:u,instance:t}))}return u},instance:t,rootRef:n,publicAPI:r});function Oe(e){const t=E.useRef({});return e?(e.current==null&&(e.current={}),e.current):t.current}const De=({plugins:e,rootRef:t,props:r})=>{const n=[...ve,...e],{pluginParams:l,forwardedProps:f,apiRef:c,experimentalFeatures:s,slots:u,slotProps:d}=ke({plugins:n,props:r}),o=ye(n,l),a=E.useRef({}).current,m=Oe(c),h=E.useRef(null),g=Q(h,t),p=Ae({plugins:n,instance:a,publicAPI:m,rootRef:h}),[I,b]=E.useState(()=>{const C={};return n.forEach(M=>{M.getInitialState&&Object.assign(C,M.getInitialState(l))}),C}),T=[],x=C=>{const M=C({instance:a,params:l,slots:u,slotProps:d,experimentalFeatures:s,state:I,setState:b,rootRef:h,models:o,plugins:n});M.getRootProps&&T.push(M.getRootProps),M.publicAPI&&Object.assign(m,M.publicAPI),M.instance&&Object.assign(a,M.instance),M.contextValue&&Object.assign(p,M.contextValue)};return n.forEach(x),{getRootProps:(C={})=>{const M=w({role:"tree"},f,C,{ref:g});return T.forEach(fe=>{Object.assign(M,fe(C))}),M},rootRef:g,contextValue:p,instance:a}},ee=E.createContext(null);function Fe(e){const{value:t,children:r}=e;return y.jsx(ee.Provider,{value:t,children:t.wrapRoot({children:r,instance:t.instance})})}const L=()=>{const e=E.useContext(ee);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},te=(e,t,r)=>{e.$$publishEvent(t,r)},P="__TREE_VIEW_ROOT_PARENT_ID__",re=e=>{const t={};return e.forEach((r,n)=>{t[r]=n}),t},F=E.createContext(()=>-1),Le=["children"],ne=({items:e,isItemDisabled:t,getItemLabel:r,getItemId:n})=>{const l={},f={},c={[P]:[]},s=(d,o,i)=>{var g,p;const a=n?n(d):d.id;if(a==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(d)].join(`
`));if(l[a]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${a}"`].join(`
`));const m=r?r(d):d.label;if(m==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(d)].join(`
`));l[a]={id:a,label:m,parentId:i,idAttribute:void 0,expandable:!!((g=d.children)!=null&&g.length),disabled:t?t(d):!1,depth:o},f[a]=d;const h=i??P;c[h]||(c[h]=[]),c[h].push(a),(p=d.children)==null||p.forEach(I=>s(I,o+1,a))};e.forEach(d=>s(d,0,null));const u={};return Object.keys(c).forEach(d=>{u[d]=re(c[d])}),{itemMetaMap:l,itemMap:f,itemOrderedChildrenIds:c,itemChildrenIndexes:u}},V=({instance:e,params:t,state:r,setState:n,experimentalFeatures:l})=>{const f=E.useCallback(I=>r.items.itemMetaMap[I],[r.items.itemMetaMap]),c=E.useCallback(I=>r.items.itemMap[I],[r.items.itemMap]),s=E.useCallback(()=>{const I=b=>{const T=r.items.itemMap[b],x=J(T,Le),S=r.items.itemOrderedChildrenIds[b];return S&&(x.children=S.map(I)),x};return r.items.itemOrderedChildrenIds[P].map(I)},[r.items.itemMap,r.items.itemOrderedChildrenIds]),u=E.useCallback(I=>{if(I==null)return!1;let b=e.getItemMeta(I);if(!b)return!1;if(b.disabled)return!0;for(;b.parentId!=null;)if(b=e.getItemMeta(b.parentId),b.disabled)return!0;return!1},[e]),d=E.useCallback(I=>{const b=e.getItemMeta(I).parentId??P;return r.items.itemChildrenIndexes[b][I]},[e,r.items.itemChildrenIndexes]),o=E.useCallback(I=>r.items.itemOrderedChildrenIds[I??P]??[],[r.items.itemOrderedChildrenIds]),i=I=>{const b=e.getItemMeta(I);return b==null?null:document.getElementById(N({treeId:r.id.treeId,itemId:I,id:b.idAttribute}))},a=I=>t.disabledItemsFocusable?!0:!e.isItemDisabled(I),m=E.useRef(!1),h=E.useCallback(()=>{m.current=!0},[]),g=E.useCallback(()=>m.current,[]);return E.useEffect(()=>{e.areItemUpdatesPrevented()||n(I=>{const b=ne({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel});return Object.values(I.items.itemMetaMap).forEach(T=>{b.itemMetaMap[T.id]||te(e,"removeItem",{id:T.id})}),w({},I,{items:b})})},[e,n,t.items,t.isItemDisabled,t.getItemId,t.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:c,getItemDOMElement:i,getItemTree:s,getItemOrderedChildrenIds:o},instance:{getItemMeta:f,getItem:c,getItemTree:s,getItemsToRender:()=>{const I=b=>{var x;const T=r.items.itemMetaMap[b];return{label:T.label,itemId:T.id,id:T.idAttribute,children:(x=r.items.itemOrderedChildrenIds[b])==null?void 0:x.map(I)}};return r.items.itemOrderedChildrenIds[P].map(I)},getItemIndex:d,getItemDOMElement:i,getItemOrderedChildrenIds:o,isItemDisabled:u,isItemNavigable:a,preventItemUpdates:h,areItemUpdatesPrevented:g},contextValue:{items:{onItemClick:t.onItemClick,disabledItemsFocusable:t.disabledItemsFocusable,indentationAtItemLevel:l.indentationAtItemLevel??!1}}}};V.getInitialState=e=>({items:ne({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});V.getDefaultizedParams=({params:e})=>w({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});V.wrapRoot=({children:e,instance:t})=>y.jsx(F.Provider,{value:r=>{var n;return((n=t.getItemMeta(r))==null?void 0:n.depth)??0},children:e});V.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const j=({instance:e,params:t,models:r})=>{const n=E.useMemo(()=>{const i=new Map;return r.expandedItems.value.forEach(a=>{i.set(a,!0)}),i},[r.expandedItems.value]),l=(i,a)=>{var m;(m=t.onExpandedItemsChange)==null||m.call(t,i,a),r.expandedItems.setControlledValue(a)},f=E.useCallback(i=>n.has(i),[n]),c=E.useCallback(i=>{var a;return!!((a=e.getItemMeta(i))!=null&&a.expandable)},[e]),s=R((i,a)=>{const m=e.isItemExpanded(a);e.setItemExpansion(i,a,!m)}),u=R((i,a,m)=>{if(e.isItemExpanded(a)===m)return;let g;m?g=[a].concat(r.expandedItems.value):g=r.expandedItems.value.filter(p=>p!==a),t.onItemExpansionToggle&&t.onItemExpansionToggle(i,a,m),l(i,g)}),d=(i,a)=>{const m=e.getItemMeta(a),g=e.getItemOrderedChildrenIds(m.parentId).filter(I=>e.isItemExpandable(I)&&!e.isItemExpanded(I)),p=r.expandedItems.value.concat(g);g.length>0&&(t.onItemExpansionToggle&&g.forEach(I=>{t.onItemExpansionToggle(i,I,!0)}),l(i,p))},o=E.useMemo(()=>t.expansionTrigger?t.expansionTrigger:e.isTreeViewEditable?"iconContainer":"content",[t.expansionTrigger,e.isTreeViewEditable]);return{publicAPI:{setItemExpansion:u},instance:{isItemExpanded:f,isItemExpandable:c,setItemExpansion:u,toggleItemExpansion:s,expandAllSiblings:d},contextValue:{expansion:{expansionTrigger:o}}}};j.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const je=[];j.getDefaultizedParams=({params:e})=>w({},e,{defaultExpandedItems:e.defaultExpandedItems??je});j.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const oe=(e,t)=>{let r=t.length-1;for(;r>=0&&!e.isItemNavigable(t[r]);)r-=1;if(r!==-1)return t[r]},ie=(e,t)=>{const r=e.getItemMeta(t),n=e.getItemOrderedChildrenIds(r.parentId),l=e.getItemIndex(t);if(l===0)return r.parentId;let f=l-1;for(;!e.isItemNavigable(n[f])&&f>=0;)f-=1;if(f===-1)return r.parentId==null?null:ie(e,r.parentId);let c=n[f],s=oe(e,e.getItemOrderedChildrenIds(c));for(;e.isItemExpanded(c)&&s!=null;)c=s,s=e.getItemOrderedChildrenIds(c).find(e.isItemNavigable);return c},O=(e,t)=>{if(e.isItemExpanded(t)){const n=e.getItemOrderedChildrenIds(t).find(e.isItemNavigable);if(n!=null)return n}let r=e.getItemMeta(t);for(;r!=null;){const n=e.getItemOrderedChildrenIds(r.parentId),l=e.getItemIndex(r.id);if(l<n.length-1){let f=l+1;for(;!e.isItemNavigable(n[f])&&f<n.length-1;)f+=1;if(e.isItemNavigable(n[f]))return n[f]}r=e.getItemMeta(r.parentId)}return null},se=e=>{let t=null;for(;t==null||e.isItemExpanded(t);){const r=e.getItemOrderedChildrenIds(t),n=oe(e,r);if(n==null)return t;t=n}return t},v=e=>e.getItemOrderedChildrenIds(null).find(e.isItemNavigable),le=(e,t,r)=>{if(t===r)return[t,r];const n=e.getItemMeta(t),l=e.getItemMeta(r);if(n.parentId===l.id||l.parentId===n.id)return l.parentId===n.id?[n.id,l.id]:[l.id,n.id];const f=[n.id],c=[l.id];let s=n.parentId,u=l.parentId,d=c.indexOf(s)!==-1,o=f.indexOf(u)!==-1,i=!0,a=!0;for(;!o&&!d;)i&&(f.push(s),d=c.indexOf(s)!==-1,i=s!==null,!d&&i&&(s=e.getItemMeta(s).parentId)),a&&!d&&(c.push(u),o=f.indexOf(u)!==-1,a=u!==null,!o&&a&&(u=e.getItemMeta(u).parentId));const m=d?s:u,h=e.getItemOrderedChildrenIds(m),g=f[f.indexOf(m)-1],p=c[c.indexOf(m)-1];return h.indexOf(g)<h.indexOf(p)?[t,r]:[r,t]},_e=(e,t,r)=>{const n=u=>{if(e.isItemExpandable(u)&&e.isItemExpanded(u))return e.getItemOrderedChildrenIds(u)[0];let d=e.getItemMeta(u);for(;d!=null;){const o=e.getItemOrderedChildrenIds(d.parentId),i=e.getItemIndex(d.id);if(i<o.length-1)return o[i+1];d=e.getItemMeta(d.parentId)}throw new Error("Invalid range")},[l,f]=le(e,t,r),c=[l];let s=l;for(;s!==f;)s=n(s),e.isItemDisabled(s)||c.push(s);return c},$e=e=>{let t=v(e);const r=[];for(;t!=null;)r.push(t),t=O(e,t);return r},Ue=(e,t)=>t!==e.closest('*[role="treeitem"]'),D=e=>Array.isArray(e)?e:e!=null?[e]:[],$=e=>{const t={};return e.forEach(r=>{t[r]=!0}),t},_=({instance:e,params:t,models:r})=>{const n=E.useRef(null),l=E.useRef({}),f=E.useMemo(()=>{const g=new Map;return Array.isArray(r.selectedItems.value)?r.selectedItems.value.forEach(p=>{g.set(p,!0)}):r.selectedItems.value!=null&&g.set(r.selectedItems.value,!0),g},[r.selectedItems.value]),c=(g,p)=>{if(t.onItemSelectionToggle)if(t.multiSelect){const I=p.filter(T=>!e.isItemSelected(T)),b=r.selectedItems.value.filter(T=>!p.includes(T));I.forEach(T=>{t.onItemSelectionToggle(g,T,!0)}),b.forEach(T=>{t.onItemSelectionToggle(g,T,!1)})}else p!==r.selectedItems.value&&(r.selectedItems.value!=null&&t.onItemSelectionToggle(g,r.selectedItems.value,!1),p!=null&&t.onItemSelectionToggle(g,p,!0));t.onSelectedItemsChange&&t.onSelectedItemsChange(g,p),r.selectedItems.setControlledValue(p)},s=g=>f.has(g),u=({event:g,itemId:p,keepExistingSelection:I=!1,shouldBeSelected:b})=>{if(t.disableSelection)return;let T;if(I){const x=D(r.selectedItems.value),S=e.isItemSelected(p);S&&(b===!1||b==null)?T=x.filter(C=>C!==p):!S&&(b===!0||b==null)?T=[p].concat(x):T=x}else b===!1||b==null&&e.isItemSelected(p)?T=t.multiSelect?[]:null:T=t.multiSelect?[p]:p;c(g,T),n.current=p,l.current={}},d=(g,[p,I])=>{if(t.disableSelection||!t.multiSelect)return;let b=D(r.selectedItems.value).slice();Object.keys(l.current).length>0&&(b=b.filter(C=>!l.current[C]));const T=$(b),x=_e(e,p,I),S=x.filter(C=>!T[C]);b=b.concat(S),c(g,b),l.current=$(x)};return{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{selectItem:u},instance:{isItemSelected:s,selectItem:u,selectAllNavigableItems:g=>{if(t.disableSelection||!t.multiSelect)return;const p=$e(e);c(g,p),l.current=$(p)},expandSelectionRange:(g,p)=>{if(n.current!=null){const[I,b]=le(e,p,n.current);d(g,[I,b])}},selectRangeFromStartToItem:(g,p)=>{d(g,[v(e),p])},selectRangeFromItemToEnd:(g,p)=>{d(g,[p,se(e)])},selectItemFromArrowNavigation:(g,p,I)=>{if(t.disableSelection||!t.multiSelect)return;let b=D(r.selectedItems.value).slice();Object.keys(l.current).length===0?(b.push(I),l.current={[p]:!0,[I]:!0}):(l.current[p]||(l.current={}),l.current[I]?(b=b.filter(T=>T!==p),delete l.current[p]):(b.push(I),l.current[I]=!0)),c(g,b)}},contextValue:{selection:{multiSelect:t.multiSelect,checkboxSelection:t.checkboxSelection,disableSelection:t.disableSelection}}}};_.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const Ne=[];_.getDefaultizedParams=({params:e})=>w({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?Ne:null)});_.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const q=1e3;class Be{constructor(t=q){this.timeouts=new Map,this.cleanupTimeout=q,this.cleanupTimeout=t}register(t,r,n){this.timeouts||(this.timeouts=new Map);const l=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,l)}unregister(t){const r=this.timeouts.get(t.cleanupToken);r&&(this.timeouts.delete(t.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((t,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class Ke{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,r,n){this.registry.register(t,r,n)}unregister(t){this.registry.unregister(t)}reset(){}}class Xe{}function ze(e){let t=0;return function(n,l,f){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new Ke:new Be);const[c]=E.useState(new Xe),s=E.useRef(null),u=E.useRef(void 0);u.current=f;const d=E.useRef(null);if(!s.current&&u.current){const o=(i,a)=>{var m;a.defaultMuiPrevented||(m=u.current)==null||m.call(u,i,a)};s.current=n.$$subscribeEvent(l,o),t+=1,d.current={cleanupToken:t},e.registry.register(c,()=>{var i;(i=s.current)==null||i.call(s),s.current=null,d.current=null},d.current)}else!u.current&&s.current&&(s.current(),s.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));E.useEffect(()=>{if(!s.current&&u.current){const o=(i,a)=>{var m;a.defaultMuiPrevented||(m=u.current)==null||m.call(u,i,a)};s.current=n.$$subscribeEvent(l,o)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var o;(o=s.current)==null||o.call(s),s.current=null}},[n,l])}}const qe={registry:null},Je=ze(qe),ue=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?ue(t.shadowRoot):t:null};function We(e){return e.replace(/["\\]/g,"\\$&")}const Ge=(e,t)=>{let r=D(t).find(n=>{if(!e.isItemNavigable(n))return!1;const l=e.getItemMeta(n);return l&&(l.parentId==null||e.isItemExpanded(l.parentId))});return r==null&&(r=v(e)),r},K=({instance:e,params:t,state:r,setState:n,models:l,rootRef:f})=>{const c=Ge(e,l.selectedItems.value),s=R(p=>{const I=typeof p=="function"?p(r.focusedItemId):p;r.focusedItemId!==I&&n(b=>w({},b,{focusedItemId:I}))}),u=E.useCallback(()=>!!f.current&&f.current.contains(ue(Ee(f.current))),[f]),d=E.useCallback(p=>r.focusedItemId===p&&u(),[r.focusedItemId,u]),o=p=>{const I=e.getItemMeta(p);return I&&(I.parentId==null||e.isItemExpanded(I.parentId))},i=(p,I)=>{const b=e.getItemDOMElement(I);b&&b.focus(),s(I),t.onItemFocus&&t.onItemFocus(p,I)},a=R((p,I)=>{o(I)&&i(p,I)}),m=R(()=>{if(r.focusedItemId==null)return;if(e.getItemMeta(r.focusedItemId)){const I=e.getItemDOMElement(r.focusedItemId);I&&I.blur()}s(null)}),h=p=>p===c;Je(e,"removeItem",({id:p})=>{r.focusedItemId===p&&i(null,c)});const g=p=>I=>{var b;(b=p.onFocus)==null||b.call(p,I),!I.defaultMuiPrevented&&I.target===I.currentTarget&&i(I,c)};return{getRootProps:p=>({onFocus:g(p)}),publicAPI:{focusItem:a},instance:{isItemFocused:d,canItemBeTabbed:h,focusItem:a,removeFocusedItem:m}}};K.getInitialState=()=>({focusedItemId:null});K.params={onItemFocus:!0};const Qe=(e,t)=>e.getAvailablePlugins().has(t),Ye=({props:e})=>{const{instance:t}=L(),{label:r,itemId:n}=e,[l,f]=E.useState(r),c=t.isItemBeingEdited(n);return E.useEffect(()=>{c||f(r)},[c,r]),{propsEnhancers:{labelInput:({externalEventHandlers:s,interactions:u})=>t.isItemEditable(n)?{value:l??"","data-element":"labelInput",onChange:m=>{var h;(h=s.onChange)==null||h.call(s,m),f(m.target.value)},onKeyDown:m=>{var g;if((g=s.onKeyDown)==null||g.call(s,m),m.defaultMuiPrevented)return;const h=m.target;m.key==="Enter"&&h.value?u.handleSaveItemLabel(m,h.value):m.key==="Escape"&&u.handleCancelItemLabelEditing(m)},onBlur:m=>{var h;(h=s.onBlur)==null||h.call(s,m),!m.defaultMuiPrevented&&m.target.value&&u.handleSaveItemLabel(m,m.target.value)},autoFocus:!0,type:"text"}:{}}}},k=({instance:e,state:t,setState:r,params:n})=>{const l=E.useRef(t.editedItemId),f=i=>l.current===i,c=i=>{r(a=>w({},a,{editedItemId:i})),l.current=i},s=i=>i===t.editedItemId,u=!!n.isItemEditable,d=i=>{if(i==null||!u)return!1;const a=e.getItem(i);return a?typeof n.isItemEditable=="function"?n.isItemEditable(a):!!n.isItemEditable:!1},o=(i,a)=>{if(!a)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",i].join(`
`));r(m=>{const h=m.items.itemMetaMap[i];return h.label!==a?w({},m,{items:w({},m.items,{itemMetaMap:w({},m.items.itemMetaMap,{[i]:w({},h,{label:a})})})}):m}),n.onItemLabelChange&&n.onItemLabelChange(i,a)};return{instance:{setEditedItemId:c,isItemBeingEdited:s,updateItemLabel:o,isItemEditable:d,isTreeViewEditable:u,isItemBeingEditedRef:f},publicAPI:{updateItemLabel:o}}};k.itemPlugin=Ye;k.getDefaultizedParams=({params:e,experimentalFeatures:t})=>{const r=t==null?void 0:t.labelEditing;return w({},e,{isItemEditable:r?e.isItemEditable??!1:!1})};k.getInitialState=()=>({editedItemId:null});k.params={onItemLabelChange:!0,isItemEditable:!0};function Ze(e){return!!e&&e.length===1&&!!e.match(/\S/)}const ce=({instance:e,params:t,state:r})=>{const n=Te(),l=E.useRef({}),f=R(o=>{l.current=o(l.current)});E.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const o={},i=a=>{o[a.id]=a.label.substring(0,1).toLowerCase()};Object.values(r.items.itemMetaMap).forEach(i),l.current=o},[r.items.itemMetaMap,t.getItemId,e]);const c=(o,i)=>{const a=i.toLowerCase(),m=I=>{const b=O(e,I);return b===null?v(e):b};let h=null,g=m(o);const p={};for(;h==null&&!p[g];)l.current[g]===a?h=g:(p[g]=!0,g=m(g));return h},s=o=>!t.disableSelection&&!e.isItemDisabled(o),u=o=>!e.isItemDisabled(o)&&e.isItemExpandable(o);return{instance:{updateFirstCharMap:f,handleItemKeyDown:(o,i)=>{if(o.defaultMuiPrevented||o.altKey||Ue(o.target,o.currentTarget))return;const a=o.ctrlKey||o.metaKey,m=o.key;switch(!0){case(m===" "&&s(i)):{o.preventDefault(),t.multiSelect&&o.shiftKey?e.expandSelectionRange(o,i):e.selectItem({event:o,itemId:i,keepExistingSelection:t.multiSelect,shouldBeSelected:t.multiSelect?void 0:!0});break}case m==="Enter":{Qe(e,k)&&e.isItemEditable(i)&&!e.isItemBeingEdited(i)?e.setEditedItemId(i):u(i)?(e.toggleItemExpansion(o,i),o.preventDefault()):s(i)&&(t.multiSelect?(o.preventDefault(),e.selectItem({event:o,itemId:i,keepExistingSelection:!0})):e.isItemSelected(i)||(e.selectItem({event:o,itemId:i}),o.preventDefault()));break}case m==="ArrowDown":{const h=O(e,i);h&&(o.preventDefault(),e.focusItem(o,h),t.multiSelect&&o.shiftKey&&s(h)&&e.selectItemFromArrowNavigation(o,i,h));break}case m==="ArrowUp":{const h=ie(e,i);h&&(o.preventDefault(),e.focusItem(o,h),t.multiSelect&&o.shiftKey&&s(h)&&e.selectItemFromArrowNavigation(o,i,h));break}case(m==="ArrowRight"&&!n||m==="ArrowLeft"&&n):{if(a)return;if(e.isItemExpanded(i)){const h=O(e,i);h&&(e.focusItem(o,h),o.preventDefault())}else u(i)&&(e.toggleItemExpansion(o,i),o.preventDefault());break}case(m==="ArrowLeft"&&!n||m==="ArrowRight"&&n):{if(a)return;if(u(i)&&e.isItemExpanded(i))e.toggleItemExpansion(o,i),o.preventDefault();else{const h=e.getItemMeta(i).parentId;h&&(e.focusItem(o,h),o.preventDefault())}break}case m==="Home":{s(i)&&t.multiSelect&&a&&o.shiftKey?e.selectRangeFromStartToItem(o,i):e.focusItem(o,v(e)),o.preventDefault();break}case m==="End":{s(i)&&t.multiSelect&&a&&o.shiftKey?e.selectRangeFromItemToEnd(o,i):e.focusItem(o,se(e)),o.preventDefault();break}case m==="*":{e.expandAllSiblings(o,i),o.preventDefault();break}case(String.fromCharCode(o.keyCode)==="A"&&a&&t.multiSelect&&!t.disableSelection):{e.selectAllNavigableItems(o),o.preventDefault();break}case(!a&&!o.shiftKey&&Ze(m)):{const h=c(i,m);h!=null&&(e.focusItem(o,h),o.preventDefault());break}}}}}};ce.params={};const ae=({slots:e,slotProps:t})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon}}}});ae.params={};const de=E.createContext(null);function me(e){const{children:t,itemId:r=null}=e,{instance:n,treeId:l,rootRef:f}=L(),c=E.useRef(new Map);E.useEffect(()=>{if(!f.current)return;let u=null;if(r==null)u=f.current.id;else{const h=n.getItemMeta(r);h!==void 0&&(u=N({itemId:r,treeId:l,id:h.idAttribute}))}if(u==null)return;const d=n.getItemOrderedChildrenIds(r??null)??[],o=We(u),i=f.current.querySelectorAll(`${r==null?"":`*[id="${o}"] `}[role="treeitem"]:not(*[id="${o}"] [role="treeitem"] [role="treeitem"])`),a=Array.from(i).map(h=>c.current.get(h.id));(a.length!==d.length||a.some((h,g)=>h!==d[g]))&&n.setJSXItemsOrderedChildrenIds(r??null,a)});const s=E.useMemo(()=>({registerChild:(u,d)=>c.current.set(u,d),unregisterChild:u=>c.current.delete(u),parentId:r}),[r]);return y.jsx(de.Provider,{value:s,children:t})}const A=({instance:e,setState:t})=>{e.preventItemUpdates();const r=R(f=>(t(c=>{if(c.items.itemMetaMap[f.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${f.id}"`].join(`
`));return w({},c,{items:w({},c.items,{itemMetaMap:w({},c.items.itemMetaMap,{[f.id]:f}),itemMap:w({},c.items.itemMap,{[f.id]:{id:f.id,label:f.label}})})})}),()=>{t(c=>{const s=w({},c.items.itemMetaMap),u=w({},c.items.itemMap);return delete s[f.id],delete u[f.id],w({},c,{items:w({},c.items,{itemMetaMap:s,itemMap:u})})}),te(e,"removeItem",{id:f.id})})),n=(f,c)=>{const s=f??P;t(u=>w({},u,{items:w({},u.items,{itemOrderedChildrenIds:w({},u.items.itemOrderedChildrenIds,{[s]:c}),itemChildrenIndexes:w({},u.items.itemChildrenIndexes,{[s]:re(c)})})}))},l=R((f,c)=>(e.updateFirstCharMap(s=>(s[f]=c,s)),()=>{e.updateFirstCharMap(s=>{const u=w({},s);return delete u[f],u})}));return{instance:{insertJSXItem:r,setJSXItemsOrderedChildrenIds:n,mapFirstCharFromJSX:l}}},Ie=e=>Array.isArray(e)?e.length>0&&e.some(Ie):!!e,He=({props:e,rootRef:t,contentRef:r})=>{const{instance:n,treeId:l}=L(),{children:f,disabled:c=!1,label:s,itemId:u,id:d}=e,o=E.useContext(de);if(o==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:i,unregisterChild:a,parentId:m}=o,h=Ie(f),g=E.useRef(null),p=Q(g,r);return xe(()=>{const I=N({itemId:u,treeId:l,id:d});return i(I,u),()=>{a(I)}},[i,a,u,d,l]),E.useEffect(()=>n.insertJSXItem({id:u,idAttribute:d,parentId:m,expandable:h,disabled:c}),[n,m,u,h,c,d]),E.useEffect(()=>{var I;if(s)return n.mapFirstCharFromJSX(u,(((I=g.current)==null?void 0:I.textContent)??"").substring(0,1).toLowerCase())},[n,u,s]),{contentRef:p,rootRef:t}};A.itemPlugin=He;A.wrapItem=({children:e,itemId:t})=>{const r=E.useContext(F);return y.jsx(me,{itemId:t,children:y.jsx(F.Provider,{value:r+1,children:e})})};A.wrapRoot=({children:e})=>y.jsx(me,{children:y.jsx(F.Provider,{value:0,children:e})});A.params={};const et=[V,j,_,K,ce,ae,A],tt=Me(),rt=e=>{const{classes:t}=e;return ge({root:["root"]},Ce,t)},nt=U("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),ot=[],ht=E.forwardRef(function(t,r){const n=tt({props:t,name:"MuiSimpleTreeView"}),l=n,{getRootProps:f,contextValue:c}=De({plugins:et,rootRef:r,props:w({},n,{items:ot})}),{slots:s,slotProps:u}=n,d=rt(n),o=(s==null?void 0:s.root)??nt,i=we({elementType:o,externalSlotProps:u==null?void 0:u.root,className:d.root,getSlotProps:f,ownerState:l});return y.jsx(Fe,{value:c,children:y.jsx(o,w({},i))})}),it=U("div",{name:"MuiTreeItem2DragAndDropOverlay",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>he(e)&&e!=="action"})(({theme:e})=>({position:"absolute",left:0,display:"flex",top:0,bottom:0,right:0,pointerEvents:"none",variants:[{props:{action:"make-child"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderRadius:e.shape.borderRadius,backgroundColor:e.vars?`rgba(${e.vars.palette.primary.darkChannel} / ${e.vars.palette.action.focusOpacity})`:be(e.palette.primary.dark,e.palette.action.focusOpacity)}},{props:{action:"reorder-above"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderTop:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"reorder-below"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"move-to-parent"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * calc(var(--TreeView-itemDepth) - 1))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}}]}));function bt(e){return e.action==null?null:y.jsx(it,w({},e))}const Et=U("input",{name:"MuiTreeItem2",slot:"LabelInput",overridesResolver:(e,t)=>t.labelInput})(({theme:e})=>w({},e.typography.body1,{width:"100%",backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,border:"none",padding:"0 2px",boxSizing:"border-box","&:focus":{outline:`1px solid ${e.palette.primary.main}`}}));function wt(e){return W("MuiTreeItem",e)}const Tt=G("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox","labelInput","editable","editing","dragAndDropOverlay"]),xt=Y(y.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Mt=Y(y.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function st(e){const{children:t,itemId:r}=e,{wrapItem:n,instance:l}=L();return n({children:t,itemId:r,instance:l})}st.propTypes={children:X.node,itemId:X.string.isRequired};export{ht as S,Et as T,k as a,bt as b,F as c,Me as d,Mt as e,xt as f,st as g,Qe as h,N as i,wt as j,Ue as k,Tt as t,L as u};
