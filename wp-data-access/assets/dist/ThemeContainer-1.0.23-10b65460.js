import{O as K,l as c,r,_ as R,Q as H,S as k,T as ee,U as se,a as w,j as t,V as te,W as oe,X as le,d as re,Y as ne,Z as ae,$ as ie,a0 as ce,a1 as de,a2 as ue}from"./main-1.0.23.js";import{u as A,a as pe}from"./RestApi-1.0.23-cc179eb9.js";import{R as Te,C as be,u as ge,a as xe,b as fe,D as i,c as me,B as Ee,d as he,e as Se,f as je,g as ve,A as _e}from"./useTheme-1.0.23-55aea9bb.js";import{A as Ce,T as ye,e as Pe,M as Re}from"./index.esm-1.0.23-ba0465a2.js";import{F as y}from"./FallbackSpinner-1.0.23-96931408.js";import{B as S}from"./Spinner-1.0.23-90ab83ff.js";import{T as V}from"./Tooltip-1.0.23-1b58a848.js";import{I as W}from"./iconBase-1.0.23-43ac6f06.js";import{T as Ae}from"./ThemeProvider-1.0.23-f3e5cbc1.js";var P=(e=>(e[e.SELECT=0]="SELECT",e[e.INSERT=1]="INSERT",e[e.UPDATE=2]="UPDATE",e[e.DELETE=3]="DELETE",e[e.EXPORT=4]="EXPORT",e[e.IMPORT=5]="IMPORT",e[e.VIEW=6]="VIEW",e))(P||{}),b=(e=>(e[e.INSERT=0]="INSERT",e[e.UPDATE=1]="UPDATE",e[e.VIEW=2]="VIEW",e))(b||{}),Be=(e=>(e[e.INSERT=0]="INSERT",e[e.UPDATE=1]="UPDATE",e[e.VIEW=2]="VIEW",e))(Be||{});const Oe=e=>{const n=A(u=>K());return c.debug("elevation",n),n},De=r.lazy(()=>R(()=>import("./TableContainer-1.0.23-55f87dc7.js").then(e=>e.T),["./TableContainer-1.0.23-55f87dc7.js","./main-1.0.23.js","./AdminTheme-1.0.23-7044caf5.js","./Typography-1.0.23-19a0fd3e.js","./FallbackSpinner-1.0.23-96931408.js","./Spinner-1.0.23-90ab83ff.js","./RestApi-1.0.23-cc179eb9.js","./ActionsSettings-1.0.23-a601e9bf.js","./TargetEnum-1.0.23-b82380d5.js","./ConfirmDialog-1.0.23-f318040f.js","./DialogContent-1.0.23-79893b13.js","./index.esm-1.0.23-ba0465a2.js","./iconBase-1.0.23-43ac6f06.js","./Modal-1.0.23-3fe42627.js","./CardContent-1.0.23-cd3f2c87.js","./ConfirmDialog-1.0.23-9bff3a93.css","./ScopeEnum-1.0.23-7caf102d.js","./TabPanel-1.0.23-ecd53346.js","./Tabs-1.0.23-d047285a.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./createSvgIcon-1.0.23-f9410a01.js","./useTheme-1.0.23-55aea9bb.js","./colorManipulator-1.0.23-e382be1d.js","./settings-1.0.23-871bbe9f.css"],import.meta.url)),I=r.lazy(()=>R(()=>import("./FormContainer-1.0.23-d69e9502.js").then(e=>e.F),["./FormContainer-1.0.23-d69e9502.js","./main-1.0.23.js","./Spinner-1.0.23-90ab83ff.js","./Typography-1.0.23-19a0fd3e.js","./AdminTheme-1.0.23-7044caf5.js","./RestApi-1.0.23-cc179eb9.js","./ActionsDml-1.0.23-e3901c9d.js","./useTheme-1.0.23-55aea9bb.js","./colorManipulator-1.0.23-e382be1d.js","./iconBase-1.0.23-43ac6f06.js","./index.esm-1.0.23-ba0465a2.js","./useScreenSize-1.0.23-b1e8b94a.js","./useStoreTable-1.0.23-508477d7.js","./purify.es-1.0.23-68816782.js","./dayjs.min-1.0.23-c3dddbc3.js","./FallbackSpinner-1.0.23-96931408.js","./CardContent-1.0.23-cd3f2c87.js","./CardActions-1.0.23-6c452d3f.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./FormContainer-1.0.23-5da27d24.css"],import.meta.url)),U=r.lazy(()=>R(()=>import("./TableChartDock-1.0.23-46c38a73.js"),["./TableChartDock-1.0.23-46c38a73.js","./main-1.0.23.js","./Chart-1.0.23-06cce95d.js","./useTheme-1.0.23-55aea9bb.js","./RestApi-1.0.23-cc179eb9.js","./colorManipulator-1.0.23-e382be1d.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./Spinner-1.0.23-90ab83ff.js","./index.esm-1.0.23-ba0465a2.js","./Tooltip-1.0.23-1b58a848.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popper-1.0.23-4a0d0616.js","./useControlled-1.0.23-1e71c28b.js","./Grow-1.0.23-40b2ff68.js"],import.meta.url)),z=({appId:e})=>{var F,M;c.debug(e);const n=pe(),u=Te(),g=be(),x=Oe(),j=ge(e),l=xe(e),p=fe(e),f="pp-remove-body-vertical-scrollbar",s=r.useMemo(()=>H(k.getState(),e),[]),h=r.useMemo(()=>{var o,a,m,E,N;return(o=s==null?void 0:s.src)!=null&&o.app_id&&((m=(a=s==null?void 0:s.app)==null?void 0:a.app[0])==null?void 0:m.app_title)!==""?s.app.app[0].app_title:(E=s==null?void 0:s.src)!=null&&E.dbs&&((N=s==null?void 0:s.src)!=null&&N.tbl)?s.src.dbs+" - "+s.src.tbl:"WP Data Access"},[]),d=A(o=>ee(o,e));c.debug("fullScreen",d),r.useEffect(()=>(c.debug(d),()=>{var o;(o=window.document.getElementById(f))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen")}),[d]);const B=r.useMemo(()=>se(k.getState(),e),[e]);c.debug("tableExploring",B);const[T,G]=r.useState(((M=(F=s==null?void 0:s.app)==null?void 0:F.app[0])==null?void 0:M.app_type)==w.REGISTRATION?i.FORM:i.TABLE),[O,$]=r.useState(!1),v=o=>{n(ie({appId:e})),n(ce({appId:e,mode:o})),G(o)};r.useEffect(()=>{window.ppShowForm=function(o){c.debug(o),L(o),v(i.FORM)}},[e]);const X=(o,a)=>{c.debug(o,a),de(e)&&(g(e),a!==void 0&&(u(a),g(a))),o&&$(!O),v(i.TABLE)},[D,L]=r.useState(null),[Q,_]=r.useState(b.VIEW),C=(o,a)=>{switch(c.debug(o,a),a){case P.INSERT:_(b.INSERT);break;case P.UPDATE:_(b.UPDATE);break;default:_(b.VIEW)}L(o),v(i.FORM)};let Y={};me(e);const Z=()=>null,q=()=>t.jsx(r.Suspense,{fallback:t.jsx(y,{title:p.loadingForm}),children:t.jsx(I,{appId:e,primaryKey:D,formMode:b.INSERT,showTable:()=>{},showForm:C,metaData:s})}),J=()=>{var o,a,m,E;return((a=(o=s==null?void 0:s.app)==null?void 0:o.app[0])==null?void 0:a.app_type)==w.REGISTRATION?q():t.jsxs(t.Fragment,{children:[t.jsxs(r.Suspense,{fallback:t.jsx(y,{title:p.loadingTable}),children:[T===i.TABLE&&(l==null?void 0:l.docked)==="top"&&((m=l==null?void 0:l.data)==null?void 0:m.length)>0&&t.jsx(U,{appId:e}),t.jsx(De,{appId:e,display:T===i.TABLE,refresh:O,showForm:C,metaData:s}),T===i.TABLE&&(l==null?void 0:l.docked)==="bottom"&&((E=l==null?void 0:l.data)==null?void 0:E.length)>0&&t.jsx(S,{sx:{marginTop:"5px"},children:t.jsx(U,{appId:e})})]}),T===i.FORM&&t.jsx(r.Suspense,{fallback:t.jsx(y,{title:p.loadingForm}),children:t.jsx(I,{appId:e,primaryKey:D,formMode:Q,showTable:X,showForm:C,metaData:s})})]})};return t.jsxs(S,{className:"pp-component",sx:d?Y:{},children:[t.jsx(Ce,{className:"pp-header",elevation:x,position:"relative",sx:{margin:"0 0 5px 0"},children:t.jsxs(ye,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(S,{sx:{display:"block",whiteSpace:"nowrap",fontSize:"18px",lineHeight:"18px",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",marginRight:"10px"},children:h}),t.jsxs(S,{sx:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center"},children:[te(s)&&t.jsx(V,{title:t.jsx(Ee,{details:j,mode:T}),className:"pp-builder-button",children:t.jsx(W,{sx:{color:"inherit",padding:0},onClick:()=>{T===i.FORM?n(oe({appId:e})):n(le({appId:e}))},children:t.jsx(Pe,{})})}),Z(),B&&t.jsx(V,{title:p.close,children:t.jsx(W,{sx:{color:"inherit",padding:0},onClick:()=>{var o;(o=window.document.getElementById(f))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen"),s.src.app_id?n(re({isActive:!1,appDbId:0})):n(ne({})),g(e),u(e),n(ae({}))},children:t.jsx(Re,{})})})]})]})}),J()]})},Le=e=>{const n=A(u=>ue(u,e));return c.debug("globalCode",n),n},Fe=({appId:e})=>{c.debug(e);const n=he(e),u=Se(e),g=je(e),x=ve(e),j=_e(g,n,u),l=Le(e),p=`pp-global-code-${e}`;return r.useEffect(()=>{var f,s,h;if(l!==void 0){(f=window.document.getElementById(p))==null||f.remove();const d=window.document.createElement("script");d.id=p,d.innerHTML=((s=l.global)==null?void 0:s.code)??"",(h=window.document.getElementById(`pp-app-${e}`))==null||h.appendChild(d)}},[l]),(x==null?void 0:x.appRootId)!==void 0?t.jsx(z,{appId:e}):t.jsx(Ae,{theme:j,children:t.jsx(z,{appId:e})})},Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{b as F,P as R,Ge as T,Be as a,Le as b,Oe as u};
