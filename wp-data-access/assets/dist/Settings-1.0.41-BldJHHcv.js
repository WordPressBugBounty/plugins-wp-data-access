const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ResizableDrawer-1.0.41-C0gZVvMH.js","./cm-1.0.41-DxZ4itL_.js","./redux-1.0.41-DJjpZqD1.js","./vendor-1.0.41-CN03Eozo.js","./useScreenSize-1.0.41-B3FN-Ith.js","./lib-1.0.41-DFdWuh_n.js","./loglevel-1.0.41-BZ7XahX3.js","./lodash-1.0.41-Cd8grAqB.js","./moment-1.0.41-C5S46NFB.js","./hooks-1.0.41-sDnKeMy7.js","./Typography-1.0.41-BIN1Ddvh.js","./ThemeProvider-1.0.41-D1lNQgXT.js","./useEnhancedEffect-1.0.41-BVsyj6AW.js","./iconBase-1.0.41-BNQFQdHp.js","./index-1.0.41-CpXj521P.js","./notistack-1.0.41-Bq-EKqc7.js","./Menu-1.0.41-DBfdBNVU.js","./ThemeSettings-1.0.41-DH6PwwOS.js","./AppTheme-1.0.41-BMrYDtWL.js","./index-1.0.41-zQwWCc96.js","./getThemeProps-1.0.41-BXG_2HDV.js","./PremiumFeature-1.0.41-CNKLpmFu.js","./index-1.0.41-B2jO0d0P.js","./AdminTheme-1.0.41-4tiUoVeb.js","./FormLabel-1.0.41-CgxisugM.js","./useFormControl-1.0.41-1E9QEnRo.js","./index-1.0.41-CAqb3AfW.js","./Spinner-1.0.41-fWZy8imI.js","./FormHelperText-1.0.41-BPSj83yP.js","./utils-1.0.41-iop7lDec.js","./Switch-1.0.41-BrkxB2Jy.js","./SwitchBase-1.0.41-C_lqznV-.js","./useControlled-1.0.41-BEhJe3xs.js","./Stack-1.0.41-g2eT-h-q.js","./useThemeProps-1.0.41-BJkkrkB6.js","./Slider-1.0.41-eJAQRlhH.js","./visuallyHidden-1.0.41-Dan1xhjv.js","./FormControlLabel-1.0.41-OBCouq3I.js","./Link-1.0.41-yhMF_PSg.js","./RadioGroup-1.0.41-BzP_AWOa.js","./Radio-1.0.41-S-npPzGQ.js","./createSvgIcon-1.0.41-0lRWzB2Q.js","./CssUnitTextField-1.0.41-DumeFWVt.js","./TextField-1.0.41-CGPjmVeQ.js","./Select-1.0.41-aTzlc-HZ.js","./ConfirmDialog-1.0.41-NKESMhfW.js","./DynamicModeEnum-1.0.41-BXuL5kgA.js","./AccordionSummary-1.0.41-CY9CEWZQ.js","./Collapse-1.0.41-QlMDtjRk.js","./AccordionDetails-1.0.41-DlUbOAS0.js","./SettingsMap-1.0.41-DJabgDYM.js","./SettingsMapMarkers-1.0.41-BAfgAkW1.js","./useMapUpdater-1.0.41-Dr_1GfF5.js","./main-1.0.41.js","./react-number-format.es-1.0.41-KmyU8zGo.js","./DefaultWhere-1.0.41-N2_c0GSQ.js","./useMetadata-1.0.41-DKmF8A3i.js","./SanitizeComponent-1.0.41-B18z6eJi.js","./dompurify-1.0.41-DhD2mIk-.js","./Tooltip-1.0.41-g4uuOuci.js","./Popper-1.0.41-Dl4_0sfD.js"])))=>i.map(i=>d[i]);
import{_ as S}from"./main-1.0.41.js";import{j as e}from"./cm-1.0.41-DxZ4itL_.js";import{r}from"./redux-1.0.41-DJjpZqD1.js";import{u as L,a as F}from"./hooks-1.0.41-sDnKeMy7.js";import{l as n,bL as d,S as c,a2 as G,P as H,a as A,s as K,bM as q,ae as I,F as B,b as D}from"./lib-1.0.41-DFdWuh_n.js";import{B as W,a as X,b as Y}from"./BuilderMenu-1.0.41-CI6mFW4W.js";import{d as J,A as Q,T as Z,M as $}from"./index-1.0.41-CpXj521P.js";import{B as x,C as ee}from"./ConfirmDialog-1.0.41-NKESMhfW.js";import{T as f}from"./Tooltip-1.0.41-BQBkdKQ5.js";import{A as y}from"./AdminTheme-1.0.41-4tiUoVeb.js";import{e as m}from"./notistack-1.0.41-Bq-EKqc7.js";import{b as te}from"./ActionsSettings-1.0.41-3gFM2W6T.js";import{u as se}from"./useMapUpdater-1.0.41-Dr_1GfF5.js";import{B as oe,S as g}from"./Spinner-1.0.41-fWZy8imI.js";/* empty css                        */import{f as re}from"./index-1.0.41-DGYaemnA.js";import{D as ie}from"./DynamicModeEnum-1.0.41-BXuL5kgA.js";import{T as ne}from"./Typography-1.0.41-BIN1Ddvh.js";import{I as h}from"./iconBase-1.0.41-BNQFQdHp.js";import{C as E,a as R}from"./CardContent-1.0.41-Cwtu331C.js";import{T as ae,a as z}from"./TabPanel-1.0.41-BJuUpIHA.js";import"./vendor-1.0.41-CN03Eozo.js";import"./loglevel-1.0.41-BZ7XahX3.js";import"./lodash-1.0.41-Cd8grAqB.js";import"./moment-1.0.41-C5S46NFB.js";import"./Menu-1.0.41-DBfdBNVU.js";import"./ThemeProvider-1.0.41-D1lNQgXT.js";import"./useEnhancedEffect-1.0.41-BVsyj6AW.js";import"./MenuItem-1.0.41-DCc8qvzQ.js";import"./RestApi-1.0.41-CZ_yORv3.js";import"./TargetEnum-1.0.41-CIW1jlU5.js";import"./useThemeProps-1.0.41-BJkkrkB6.js";import"./getThemeProps-1.0.41-BXG_2HDV.js";const le=t=>{const o=L(i=>{var a,p;return(p=(a=i.maps[t])==null?void 0:a.state)==null?void 0:p.isUpdated});return n.debug("isUpdated",o),o},ce=t=>{const o=L(i=>i.ui.mapSettings.isOpen&&i.ui.mapSettings.appId===t);return n.debug(t,o),o},me=r.lazy(()=>S(()=>import("./ResizableDrawer-1.0.41-C0gZVvMH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url)),pe=r.lazy(()=>S(()=>import("./ThemeSettings-1.0.41-DH6PwwOS.js"),__vite__mapDeps([17,1,2,3,9,5,6,7,8,18,19,10,20,12,21,22,13,23,24,25,14,15,26,27,28,29,30,31,32,33,34,35,11,36,16,37,38,39,40,41,42,43,44,45,46,47,48,49]),import.meta.url)),ue=r.lazy(()=>S(()=>import("./SettingsMap-1.0.41-DJabgDYM.js"),__vite__mapDeps([50,1,2,3,51,9,5,6,7,8,52,42,14,13,10,12,15,43,44,16,11,29,32,25,41,24,28,27,45,23,47,48,49,39,40,31,35,36,37,30,53,54,21,22,55,38,56,57,58,59,60]),import.meta.url)),Xe=({appId:t})=>{var k,v;const o=F(),[i,a]=r.useState(d.getSelectors().selectMap(c.getState().maps,t)),[p,de]=r.useState(G.getSelectors().selectThemeById(c.getState().themes,t)),[P,b]=r.useState(!1),U=le(t),j=se(t),w=((k=y)==null?void 0:k.palette.mode)===H.LIGHT?(v=y)==null?void 0:v.palette.primary.main:"",M=s=>{o(K({anchor:s}))},_=()=>{o(B({appId:t,mapState:i}))},l=()=>{o(q()),o(I({appId:t,property:{isUpdated:!1}}))},u=()=>{U?b(!0):(_(),l())},C=()=>{te(t,s=>{if(n.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":o(B({appId:t,mapState:d.getSelectors().selectMap(c.getState().maps,t)})),a(d.getSelectors().selectMap(c.getState().maps,t)),m(s.message,{variant:"success"});break;case"info":m(s.message,{variant:"info"});break;default:n.error(s),m(s.message??D.contactSupport,{variant:"error"})}},s=>{n.error("error",s),m(s??D.contactSupport,{variant:"error"})}),j(!1)},N=()=>{C(),l()},[T,O]=r.useState(0),V=r.useMemo(()=>[{title:"Map",icon:e.jsx(J,{})},{title:"Theme",icon:e.jsx(re,{})}],[]);return ce(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(r.Suspense,{fallback:e.jsx(g,{}),children:e.jsxs(me,{closeDrawer:u,children:[e.jsxs(Q,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(Z,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(ne,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Map Builder"}),e.jsx(f,{title:"Dock to left",position:"bottom",children:e.jsx(h,{onClick:()=>{M(A.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(W,{})})}),e.jsx(f,{title:"Dock to right",position:"bottom",children:e.jsx(h,{onClick:()=>{M(A.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(X,{})})}),e.jsx(f,{title:"Close",position:"bottom",children:e.jsx(h,{onClick:u,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx($,{})})})]}),e.jsx(Y,{menuItems:V,menuIndex:T,setMenu:O})]}),e.jsx(E,{className:"pp-settings-container",children:e.jsx(R,{sx:{padding:0,margin:0},children:e.jsx(ae,{value:T,children:e.jsxs(oe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(z,{value:0,children:e.jsx(r.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(ue,{appId:t})})}),e.jsx(z,{value:1,children:e.jsx(r.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(pe,{appId:t,source:ie.TABLE,setIsUpdated:j})})})]})})})}),e.jsx(E,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(R,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(x,{variant:"outlined",className:"footer_action_button_apply",onClick:C,children:"Apply"}),e.jsx(x,{variant:"outlined",className:"footer_action_button",onClick:N,children:"OK"}),e.jsx(x,{variant:"outlined",className:"footer_action_button",onClick:u,children:"Cancel"})]})})]})}),e.jsx(ee,{title:"Close Map Builder?",message:"All uncommitted changes will be lost!",open:P,setOpen:b,onConfirm:()=>{_(),l()},onKeep:()=>{l()}})]})};export{Xe as default};
