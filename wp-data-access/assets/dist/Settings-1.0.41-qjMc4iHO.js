const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.41-BztUzXd5.js","./cm-1.0.41-DxZ4itL_.js","./redux-1.0.41-DJjpZqD1.js","./vendor-1.0.41-CN03Eozo.js","./useMetadataColumns-1.0.41-ctUub4tf.js","./index-1.0.41-CpXj521P.js","./iconBase-1.0.41-BNQFQdHp.js","./Typography-1.0.41-BIN1Ddvh.js","./lib-1.0.41-DFdWuh_n.js","./loglevel-1.0.41-BZ7XahX3.js","./lodash-1.0.41-Cd8grAqB.js","./moment-1.0.41-C5S46NFB.js","./useEnhancedEffect-1.0.41-BVsyj6AW.js","./notistack-1.0.41-Bq-EKqc7.js","./DynamicModeEnum-1.0.41-BXuL5kgA.js","./useStoreTable-1.0.41-B5fmNNPS.js","./hooks-1.0.41-sDnKeMy7.js","./SharedContainer-1.0.41-ChmyKXs8.js","./main-1.0.41.js","./Spinner-1.0.41-fWZy8imI.js","./AdminTheme-1.0.41-4tiUoVeb.js","./ActionsDml-1.0.41--r5h77NM.js","./RestApi-1.0.41-CZ_yORv3.js","./useMetadata-1.0.41-DKmF8A3i.js","./useChartSettings-1.0.41-B9jmOMx5.js","./useRemoveAppFromStore-1.0.41-CfqgzE5H.js","./lang-1.0.41-Bm0VdcRH.js","./useStoreFormSettings-1.0.41-6QwIhzSX.js","./useFormDetails-1.0.41-B5EIEVl2.js","./AppTheme-1.0.41-BMrYDtWL.js","./index-1.0.41-zQwWCc96.js","./getThemeProps-1.0.41-BXG_2HDV.js","./useScreenSize-1.0.41-B3FN-Ith.js","./ConfirmDialog-1.0.41-NKESMhfW.js","./dompurify-1.0.41-DhD2mIk-.js","./dayjs.min-1.0.41-CD-l-E21.js","./ThemeProvider-1.0.41-D1lNQgXT.js","./FallbackSpinner-1.0.41-2QUzxGrn.js","./AlertDialog-1.0.41-BPsbbiwH.js","./SanitizeComponent-1.0.41-B18z6eJi.js","./Tooltip-1.0.41-g4uuOuci.js","./useControlled-1.0.41-BEhJe3xs.js","./Popper-1.0.41-Dl4_0sfD.js","./SharedContainer-1.0.41-DR7D6eET.css","./index-1.0.41-bmWVeOdZ.js","./index-1.0.41-B2jO0d0P.js","./Select-1.0.41-aTzlc-HZ.js","./Menu-1.0.41-DBfdBNVU.js","./utils-1.0.41-iop7lDec.js","./useFormControl-1.0.41-1E9QEnRo.js","./createSvgIcon-1.0.41-0lRWzB2Q.js","./MenuItem-1.0.41-DCc8qvzQ.js","./DefaultWhere-1.0.41-N2_c0GSQ.js","./FormHelperText-1.0.41-BPSj83yP.js","./Link-1.0.41-yhMF_PSg.js","./useTableUpdater-1.0.41-B3-EY98i.js","./Stepper-1.0.41-C_961xRF.js","./StepContent-1.0.41-DmHGU0ip.js","./Collapse-1.0.41-QlMDtjRk.js","./FormControlLabel-1.0.41-OBCouq3I.js","./Checkbox-1.0.41-C_619ZQC.js","./SwitchBase-1.0.41-C_lqznV-.js","./TextField-1.0.41-CGPjmVeQ.js","./FormLabel-1.0.41-CgxisugM.js","./AccordionSummary-1.0.41-CY9CEWZQ.js","./AccordionDetails-1.0.41-DlUbOAS0.js","./Switch-1.0.41-BrkxB2Jy.js","./Tooltip-1.0.41-BQBkdKQ5.js","./Tooltip-1.0.41--D4jr2go.css","./useFormUpdater-1.0.41-t99QqzXE.js","./PremiumFeature-1.0.41-CNKLpmFu.js","./Slider-1.0.41-eJAQRlhH.js","./visuallyHidden-1.0.41-Dan1xhjv.js","./RadioGroup-1.0.41-BzP_AWOa.js","./Radio-1.0.41-S-npPzGQ.js","./EnumTypeEnum-1.0.41-Ws4BsaYD.js","./react-number-format.es-1.0.41-KmyU8zGo.js","./ResizableDrawer-1.0.41-C0gZVvMH.js","./SettingsForm-1.0.41-s9f2SgBo.js","./CssUnitTextField-1.0.41-DumeFWVt.js","./SettingsFormRelationships-1.0.41-DylVjH7M.js","./ComponentColumn-1.0.41-YtEVVFdp.js","./ActionsExplorer-1.0.41-DSAyrNr3.js","./Autocomplete-1.0.41-82-5yXGC.js","./Close-1.0.41-Dkp5SdDZ.js","./Chip-1.0.41-C0GI7jZZ.js","./ActionsApp-1.0.41-Cz0T7QKd.js","./useApp-1.0.41-rJY2RiUW.js","./ToggleButtonGroup-1.0.41-CS_43ZCw.js","./ThemeSettings-1.0.41-DH6PwwOS.js","./index-1.0.41-CAqb3AfW.js","./Stack-1.0.41-g2eT-h-q.js","./useThemeProps-1.0.41-BJkkrkB6.js","./SettingsFormCode-1.0.41-B8ubO9CU.js","./index-1.0.41-Wbyk3QBm.js","./index-1.0.41-Ca6zW1RM.js","./SettingsTableGlobalCode-1.0.41-B9CN6QGy.js","./index-1.0.41-DGYaemnA.js","./TreeItem2Provider-1.0.41-CvRVbaxa.js","./useGlobalCode-1.0.41-C_ABIbFf.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./main-1.0.41.js";import{j as e}from"./cm-1.0.41-DxZ4itL_.js";import{r}from"./redux-1.0.41-DJjpZqD1.js";import{l as i,bn as Q,S as u,bd as U,a2 as Z,P as $,bR as I,a as y,s as ee,bU as te,bV as se,bW as oe,b as T,bX as re}from"./lib-1.0.41-DFdWuh_n.js";import{u as S,a as ie}from"./hooks-1.0.41-sDnKeMy7.js";import{A as L}from"./AdminTheme-1.0.41-4tiUoVeb.js";import{e as ne,d as ae}from"./ActionsSettings-1.0.41-3gFM2W6T.js";import{S as O}from"./ScopeEnum-1.0.41-B4DDvIDj.js";import{e as d}from"./notistack-1.0.41-Bq-EKqc7.js";import{T as _}from"./Tooltip-1.0.41-BQBkdKQ5.js";import{m as le,k as me,g as ce,f as ue}from"./index-1.0.41-DGYaemnA.js";import{A as de,T as pe,M as fe}from"./index-1.0.41-CpXj521P.js";import{B as ge,a as xe,b as Se}from"./BuilderMenu-1.0.41-CI6mFW4W.js";import{B as C,C as be}from"./ConfirmDialog-1.0.41-NKESMhfW.js";import{u as he}from"./SharedContainer-1.0.41-ChmyKXs8.js";import{T as z}from"./TargetEnum-1.0.41-CIW1jlU5.js";import{B as je,S as p}from"./Spinner-1.0.41-fWZy8imI.js";import{u as Te}from"./useMetadata-1.0.41-DKmF8A3i.js";import{D as _e}from"./DynamicModeEnum-1.0.41-BXuL5kgA.js";/* empty css                        */import{T as Ce}from"./Typography-1.0.41-BIN1Ddvh.js";import{I as k}from"./iconBase-1.0.41-BNQFQdHp.js";import{C as M,a as P}from"./CardContent-1.0.41-Cwtu331C.js";import{T as ke,a as x}from"./TabPanel-1.0.41-BJuUpIHA.js";import"./vendor-1.0.41-CN03Eozo.js";import"./loglevel-1.0.41-BZ7XahX3.js";import"./lodash-1.0.41-Cd8grAqB.js";import"./moment-1.0.41-C5S46NFB.js";import"./RestApi-1.0.41-CZ_yORv3.js";import"./useEnhancedEffect-1.0.41-BVsyj6AW.js";import"./Menu-1.0.41-DBfdBNVU.js";import"./ThemeProvider-1.0.41-D1lNQgXT.js";import"./MenuItem-1.0.41-DCc8qvzQ.js";import"./useStoreTable-1.0.41-B5fmNNPS.js";import"./ActionsDml-1.0.41--r5h77NM.js";import"./useChartSettings-1.0.41-B9jmOMx5.js";import"./useRemoveAppFromStore-1.0.41-CfqgzE5H.js";import"./lang-1.0.41-Bm0VdcRH.js";import"./useStoreFormSettings-1.0.41-6QwIhzSX.js";import"./useFormDetails-1.0.41-B5EIEVl2.js";import"./AppTheme-1.0.41-BMrYDtWL.js";import"./index-1.0.41-zQwWCc96.js";import"./getThemeProps-1.0.41-BXG_2HDV.js";import"./useScreenSize-1.0.41-B3FN-Ith.js";import"./dompurify-1.0.41-DhD2mIk-.js";import"./dayjs.min-1.0.41-CD-l-E21.js";import"./FallbackSpinner-1.0.41-2QUzxGrn.js";import"./AlertDialog-1.0.41-BPsbbiwH.js";import"./SanitizeComponent-1.0.41-B18z6eJi.js";import"./Tooltip-1.0.41-g4uuOuci.js";import"./useControlled-1.0.41-BEhJe3xs.js";import"./Popper-1.0.41-Dl4_0sfD.js";import"./useThemeProps-1.0.41-BJkkrkB6.js";const Fe=t=>{const o=S(n=>n.ui.formSettings.isOpen&&n.ui.formSettings.appId===t);return i.debug(t,o),o},ve=()=>{const t=S(o=>o.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},Be=t=>{const o=S(n=>{var m,l;return(l=(m=n.forms[t])==null?void 0:m.state)==null?void 0:l.isUpdated});return i.debug("isUpdated",o),o},Ee=t=>{const o=S(n=>{var m,l;return((l=(m=n.tables[t])==null?void 0:m.state)==null?void 0:l.isUpdated)??!1});return i.debug("isTableUpdated",o),o},Re=r.lazy(()=>f(()=>import("./SettingsColumns-1.0.41-BztUzXd5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76]),import.meta.url)),Ae=r.lazy(()=>f(()=>import("./ResizableDrawer-1.0.41-C0gZVvMH.js"),__vite__mapDeps([77,1,2,3,32,8,9,10,11,16,7,36,12,6,5,13,47]),import.meta.url)),De=r.lazy(()=>f(()=>import("./SettingsForm-1.0.41-s9f2SgBo.js"),__vite__mapDeps([78,1,2,3,8,9,10,11,16,69,70,45,6,7,12,20,63,49,5,13,64,41,58,65,53,48,73,74,61,50,59,66,79,62,46,47,36,19,33,54,23,80,81,82,22,83,84,42,85,86,60,40,87,18,52,51,88,56,57,28,25,26,14,27]),import.meta.url)),Ue=r.lazy(()=>f(()=>import("./ThemeSettings-1.0.41-DH6PwwOS.js"),__vite__mapDeps([89,1,2,3,16,8,9,10,11,29,30,7,31,12,70,45,6,20,63,49,5,13,90,19,53,48,66,61,41,91,92,71,36,72,47,59,54,73,74,50,79,62,46,33,14,64,58,65]),import.meta.url)),ye=r.lazy(()=>f(()=>import("./SettingsFormCode-1.0.41-B8ubO9CU.js"),__vite__mapDeps([93,1,2,3,94,95,33,6,7,8,9,10,11,12,20,5,13,67,68,96,16,97,19,40,36,41,42,98,92,31,50,60,61,49,58,70,45,63,17,18,15,21,22,23,24,25,26,27,28,14,29,30,32,34,35,37,38,39,43,99,64,47]),import.meta.url)),Ot=({appId:t})=>{var A,D;i.debug(t);const o=ie(),n=ve(),m=Te(t),[l]=r.useState(Q.getSelectors().selectTableById(u.getState().tables,t));i.debug(l);const[b,V]=r.useState(U.getSelectors().selectForm(u.getState().forms,t));i.debug(b);const N=he(t),[w,Le]=r.useState(Z.getSelectors().selectThemeById(u.getState().themes,t));i.debug(w);const G=Ee(t),F=Be(t),g=a=>{o(te({appId:t,isUpdated:a}))},[H,v]=r.useState(!1),q=((A=L)==null?void 0:A.palette.mode)===$.LIGHT?(D=L)==null?void 0:D.palette.primary.main:"",B=a=>{o(ee({anchor:a}))},E=()=>{b!==void 0&&o(oe({appId:t,formState:b}))},c=()=>{o(se()),g(!1)},h=()=>{F?v(!0):(E(),c())},j=()=>{{const a=u.getState().ui.formSettings;i.debug(a),ne(t,O.GLOBAL,a.isRelationTable===!0?z.RFORM:z.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":V(U.getSelectors().selectForm(u.getState().forms,t)),d(s.message,{variant:"success"}),N.columns.map((Y,J)=>{Y.lookup!==void 0&&o(re({appId:t,index:J}))});break;case"info":d(s.message,{variant:"info"});break;default:i.error(s),d(s.message??T.contactSupport,{variant:"error"})}else i.error(s),d(T.contactSupport,{variant:"error"})},s=>{i.error("error",s),d(s??T.contactSupport,{variant:"error"})}),G&&ae(t,O.GLOBAL,s=>{i.debug(s)},s=>{i.error("error",s)}),g(!1)}},K=()=>{F?(j(),setTimeout(()=>{c()},1e3)):c()},[R,W]=r.useState(0),X=r.useMemo(()=>{const a=[{title:"Form",icon:e.jsx(le,{})},{title:"Columns",icon:e.jsx(me,{})},{title:"Hooks",icon:e.jsx(ce,{})},{title:"Theme",icon:e.jsx(ue,{})}];return I(m)?a.splice(0,2):n?a.splice(0,3):a},[n]);return Fe(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsxs(Ae,{closeDrawer:h,children:[e.jsxs(de,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(pe,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Ce,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(_,{title:"Dock to left",position:"bottom",children:e.jsx(k,{onClick:()=>{B(y.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ge,{})})}),e.jsx(_,{title:"Dock to right",position:"bottom",children:e.jsx(k,{onClick:()=>{B(y.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(xe,{})})}),e.jsx(_,{title:"Close",position:"bottom",children:e.jsx(k,{onClick:h,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(fe,{})})})]}),e.jsx(Se,{menuItems:X,menuIndex:R,setMenu:W})]}),e.jsx(M,{className:"pp-settings-container",children:e.jsx(P,{sx:{padding:0,margin:0},children:e.jsx(ke,{value:R,children:e.jsxs(je,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(x,{value:0,children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(De,{appId:t})})}),e.jsx(x,{value:1,className:"pp-column-settings-container",children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Re,{appId:t})})}),e.jsx(x,{value:2,children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(ye,{appId:t,tableSettings:l,setUpdateStatus:g,buttonEditorOk:j})})}),n!==!0&&e.jsx(x,{value:3,children:e.jsx(r.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Ue,{appId:t,source:_e.FORM,setIsUpdated:g})})})]})})})}),e.jsx(M,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:q},children:e.jsxs(P,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(C,{variant:"outlined",className:"footer_action_button_apply",onClick:j,children:"Apply"}),e.jsx(C,{variant:"outlined",className:"footer_action_button",onClick:K,children:"OK"}),e.jsx(C,{variant:"outlined",className:"footer_action_button",onClick:h,children:"Cancel"})]})})]})}),e.jsx(be,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:H,setOpen:v,onConfirm:()=>{E(),c()},onKeep:()=>{c()}})]})};export{Ot as default};
