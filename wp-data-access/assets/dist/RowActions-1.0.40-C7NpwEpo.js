import{j as r}from"./cm-1.0.40-DO7MoydR.js";import{m as O,aC as V,k as b}from"./index-1.0.40-DmMQghWt.js";import{a as z}from"./hooks-1.0.40-DoKijNI1.js";import{l,aA as k,bf as B,ci as d,G as U}from"./lib-1.0.40-CJM-IO_o.js";import{R as A}from"./SharedContainer-1.0.40-D7EQbLUC.js";import{C as w}from"./ConfirmDialog-1.0.40-DRjx8-xC.js";import{r as S}from"./redux-1.0.40-W_04YL6Z.js";import{d as q}from"./ActionsDml-1.0.40-BspTHnPS.js";import{e as c}from"./notistack-1.0.40-HUa4vT_u.js";import{a as G}from"./AppTheme-1.0.40-whCBYKjb.js";import{B as K}from"./Spinner-1.0.40-Bmn0_C4u.js";import{T as f}from"./Tooltip-1.0.40-Czv1q8N-.js";import{I as x}from"./iconBase-1.0.40-CH6TO7hF.js";import"./vendor-1.0.40-CN03Eozo.js";import"./Typography-1.0.40-oRKYqE3b.js";import"./useEnhancedEffect-1.0.40-DvrM_gBo.js";import"./loglevel-1.0.40-BZ7XahX3.js";import"./lodash-1.0.40-yZQKpWII.js";import"./moment-1.0.40-C5S46NFB.js";import"./main-1.0.40.js";import"./AdminTheme-1.0.40-B669Ow89.js";import"./useStoreTable-1.0.40-C_-ljzWa.js";import"./useMetadata-1.0.40-DdsiIGYX.js";import"./useChartSettings-1.0.40-CCxE4Zu8.js";import"./useRemoveAppFromStore-1.0.40-DxUqDH6k.js";import"./lang-1.0.40-D4Y70Q_T.js";import"./useStoreFormSettings-1.0.40-CICs2Pm_.js";import"./useFormDetails-1.0.40-DhJ-oNOJ.js";import"./DynamicModeEnum-1.0.40-BXuL5kgA.js";import"./useScreenSize-1.0.40-DAXf1AlH.js";import"./dompurify-1.0.40-DhD2mIk-.js";import"./ThemeProvider-1.0.40-D9QtC9zH.js";import"./FallbackSpinner-1.0.40-Bwyy_LaW.js";import"./AlertDialog-1.0.40-CsMgd1A8.js";import"./SanitizeComponent-1.0.40-qpEC7QW6.js";import"./RestApi-1.0.40-Uj1ofskP.js";import"./index-1.0.40-xxiPHCiq.js";import"./getThemeProps-1.0.40-CtGZuG5N.js";import"./useControlled-1.0.40-B7yPDtn1.js";import"./Popper-1.0.40-Jt4gcDMJ.js";const Ei=({metaData:t,appId:m,rowId:e,rowData:j,storeTableSettings:n,appLanguage:o,tableDensity:s,showForm:h,refetch:P,rowIndex:p})=>{var v,R;l.debug(t,m,e,j,s,p);const u=z(),[y,C]=S.useState(!1),a=Object.keys(e).length>0,E=n.viewLink,M=!k(t)&&((v=t==null?void 0:t.privs)==null?void 0:v.update)&&n.transactions.update&&a,T=!k(t)&&((R=t==null?void 0:t.privs)==null?void 0:R.delete)&&n.transactions.delete&&a;return r.jsxs(K,{sx:{display:"flex",alignItems:"center",gap:0},children:[E&&r.jsx(f,{title:o.view,children:r.jsx(x,{color:"primary",size:s===d.COMPACT?"small":"medium",onClick:i=>{Object.keys(e).length===0&&u(B({appId:m,data:j,context:null})),h(e,A.VIEW,p),i.stopPropagation()},children:r.jsx(O,{})})}),M&&r.jsx(f,{title:o.edit,children:r.jsx(x,{color:"primary",size:s===d.COMPACT?"small":"medium",onClick:i=>{h(e,A.UPDATE,p),i.stopPropagation()},children:r.jsx(V,{})})}),T&&r.jsxs(r.Fragment,{children:[r.jsx(f,{title:o.delete,children:r.jsx(x,{color:"error",size:s===d.COMPACT?"small":"medium",onClick:i=>{C(!0),i.stopPropagation()},children:r.jsx(b,{})})}),r.jsx(w,{title:o.deleteRowTitle,message:o.deleteRowMessage,open:y,setOpen:C,onConfirm:()=>{u(U({appId:m,property:{isRowCountUpdated:!0}})),q(m,e,i=>{if(i!=null&&i.code&&(i!=null&&i.message))switch(i.code){case"ok":c(o.deletedSuccessful,{variant:"success"}),P();break;default:l.error(i),c(i.message??o.invalidResponse,{variant:"error"})}else l.error(i),c(o.invalidResponse,{variant:"error"})},i=>{l.error("error",i),c(i??o.invalidResponse,{variant:"error"})})},locale:o,theme:G})]})]})};export{Ei as default};
