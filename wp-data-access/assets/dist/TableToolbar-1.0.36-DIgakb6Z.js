const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableChart-1.0.36-7s8vgP6Z.js","./cm-1.0.36-c_d2YVSf.js","./redux-1.0.36-Dw38apwx.js","./vendor-1.0.36-CN03Eozo.js","./index-1.0.36-Dx_S8RK1.js","./index-1.0.36-BW5TOU2Q.js","./ConfirmDialog-1.0.36-_-4q7QfI.js","./iconBase-1.0.36-Cg_-P7_6.js","./Typography-1.0.36-CpRCY5e-.js","./lib-1.0.36-RK2jtnD_.js","./loglevel-1.0.36-BZ7XahX3.js","./lodash-1.0.36-DFhYoGis.js","./moment-1.0.36-C5S46NFB.js","./useEnhancedEffect-1.0.36-CTzd5Szc.js","./AdminTheme-1.0.36-Bhvs-n11.js","./index-1.0.36-Cdz_jNzK.js","./notistack-1.0.36-BWLrSPn1.js","./hooks-1.0.36-DVpFeylj.js","./ChartTypeSelection-1.0.36-_PaDDuu1.js","./ChartTypes-1.0.36-I-VdyVbC.js","./index-1.0.36-Dv-fkoQB.js","./FormHelperText-1.0.36-CywRqLJL.js","./useFormControl-1.0.36-DwbRv5ZH.js","./TextField-1.0.36-7fMfIiaO.js","./isHostComponent-1.0.36-DVu5iVWx.js","./debounce-1.0.36-Be36O1Ab.js","./FormLabel-1.0.36-wYb03Y2-.js","./Menu-1.0.36-BJc4ujw0.js","./ThemeProvider-1.0.36-BePdakPr.js","./useControlled-1.0.36-DU9XYnsb.js","./createSvgIcon-1.0.36-CIHUMY7B.js","./MenuItem-1.0.36-BUF9VZzL.js","./dividerClasses-1.0.36-cwzIcK9n.js","./ListItemIcon-1.0.36-Bqr3TVuQ.js","./Chart-1.0.36-DVqQ3GnJ.js","./main-1.0.36.js","./useChartSettings-1.0.36-DKli_4MO.js","./LanguagesSupport-1.0.36-CNwr1suX.js","./Spinner-1.0.36-BfGTD4Gb.js","./Tooltip-1.0.36-BmrJt8sK.js","./Popper-1.0.36-B2EKBEPA.js","./AppTheme-1.0.36-BB9LBkIC.js","./index-1.0.36-xGqEIHxf.js","./getThemeProps-1.0.36-R5fuQQuM.js","./TableChartSelection-1.0.36-CInq9tTy.js","./useTableColumnOrder-1.0.36-BKuLdalh.js","./index.esm-1.0.36-BcBy0Voo.js","./TableContainer-1.0.36-CsHiUQr0.js","./tanstack-1.0.36-BtzdZ5qw.js","./FallbackSpinner-1.0.36-D7KlMhQ_.js","./ActionsSettings-1.0.36-BoYKkBaN.js","./RestApi-1.0.36-XUqEDvWp.js","./TargetEnum-1.0.36-DPFnTxiX.js","./Tooltip-1.0.36-COg3Mxx7.js","./Tooltip-1.0.36--D4jr2go.css","./ScopeEnum-1.0.36-B4DDvIDj.js","./index-1.0.36-BaUawQwX.js","./TabPanel-1.0.36-CEnbl1IG.js","./useThemeProps-1.0.36-BvrgfXwP.js","./useTableUpdater-1.0.36-hYY8Nrtx.js","./settings-1.0.36-CMky96jX.js","./settings-1.0.36-Bx2jvYL6.css","./useFormDetails-1.0.36-Bik4Yf-M.js","./Autocomplete-1.0.36-iUEM6sWc.js","./Close-1.0.36-Bg2BHC5L.js","./TableToolbarInlineEditingButton-1.0.36-DMUCn-n5.js","./TableQuery-1.0.36-CbSpQRnN.js","./useStoreTable-1.0.36-DAzrykvV.js","./index-1.0.36-BDOx_E1a.js","./ActionsDml-1.0.36-CcZ8-7p5.js","./SanitizeComponent-1.0.36-DO2eoRBQ.js","./dompurify-1.0.36-DhD2mIk-.js","./index.esm-1.0.36-CdlqSOii.js","./Stack-1.0.36-K2HrciJA.js","./Radio-1.0.36-hNRQPG6Z.js","./SwitchBase-1.0.36-DQfS6hYA.js","./Checkbox-1.0.36-BBYwR5K6.js","./Collapse-1.0.36-DzOtbj0p.js","./AlertTitle-1.0.36-BMDG6EIt.js","./InputAdornment-1.0.36-DJw47I9A.js","./Divider-1.0.36-B5JUONQZ.js","./FormControlLabel-1.0.36-DUOG-t_O.js","./Switch-1.0.36-BYfunOZA.js","./Slider-1.0.36-P1QSgbLL.js","./visuallyHidden-1.0.36-Dan1xhjv.js","./TimePicker-1.0.36-C5e7mwu9.js","./useMobilePicker-1.0.36-BzfSFtwm.js","./ListItem-1.0.36-CIrAeyuU.js","./timeViewRenderers-1.0.36-W7AVXe16.js","./DateTimePicker-1.0.36-DkaCK-9y.js","./Tabs-1.0.36-DsFVtNgs.js","./dateViewRenderers-1.0.36-Cc9wJWzm.js","./DatePicker-1.0.36-D23ADk3G.js","./useScreenSize-1.0.36-Cyh3FPEf.js","./SharedContainer-1.0.36-Ia8VTlF_.js","./useStoreFormSettings-1.0.36-DjvLmz7r.js","./AlertDialog-1.0.36-PpU2DQEA.js","./SharedContainer-1.0.36-DR7D6eET.css","./index-1.0.36-B0PsaY_K.js","./AggregationLabelsEnum-1.0.36-B-3lhjpJ.js","./useTableCode-1.0.36-BdG0UEZ9.js","./useTheme-1.0.36-BoaurWjH.js","./TableQuery-1.0.36-uJ6MlsKy.css"])))=>i.map(i=>d[i]);
import{_ as ge}from"./main-1.0.36.js";import{j as i}from"./cm-1.0.36-c_d2YVSf.js";import{r as u}from"./redux-1.0.36-Dw38apwx.js";import{l as a,v as Me,E as de,bm as qe,ak as Ve,aK as He,bJ as Je,bV as Ue}from"./lib-1.0.36-RK2jtnD_.js";import{E as Ke,M as ze,m as Ge,H as Xe,V as Qe}from"./index-1.0.36-Cdz_jNzK.js";import{P as Ye,b as ue,a as Ze}from"./index-1.0.36-Dx_S8RK1.js";import{n as pe,o as Le,p as $e}from"./index-1.0.36-BaUawQwX.js";import{r as We}from"./jstoxml-1.0.36-DkGlThlH.js";import{F as $}from"./FileSaver.min-1.0.36-DRQRaG1G.js";import"./dompurify-1.0.36-DhD2mIk-.js";import{u as De,a as er,b as rr}from"./TableQuery-1.0.36-CbSpQRnN.js";import{d as tr}from"./ActionsDml-1.0.36-CcZ8-7p5.js";import{B as K,C as or}from"./ConfirmDialog-1.0.36-_-4q7QfI.js";import{e as U}from"./notistack-1.0.36-BWLrSPn1.js";import{a as sr}from"./hooks-1.0.36-DVpFeylj.js";import{c as nr}from"./useChartSettings-1.0.36-DKli_4MO.js";import{a as ir}from"./AppTheme-1.0.36-BB9LBkIC.js";import{u as me}from"./index-1.0.36-xGqEIHxf.js";import{B as T}from"./Spinner-1.0.36-BfGTD4Gb.js";import{I as H}from"./iconBase-1.0.36-Cg_-P7_6.js";import{F as ye}from"./FormHelperText-1.0.36-CywRqLJL.js";import{A as lr,C as cr}from"./Autocomplete-1.0.36-iUEM6sWc.js";import{T as dr}from"./TextField-1.0.36-7fMfIiaO.js";import{T as G}from"./Tooltip-1.0.36-BmrJt8sK.js";import{P as ur}from"./Menu-1.0.36-BJc4ujw0.js";import{F as ae}from"./FormLabel-1.0.36-wYb03Y2-.js";import{F as E}from"./FormControlLabel-1.0.36-DUOG-t_O.js";import{C as pr}from"./Checkbox-1.0.36-BBYwR5K6.js";import{R as mr}from"./RadioGroup-1.0.36-Cdm5IN11.js";import{R as N}from"./Radio-1.0.36-hNRQPG6Z.js";import{R as fe}from"./SharedContainer-1.0.36-Ia8VTlF_.js";import"./moment-1.0.36-C5S46NFB.js";import{F as xe}from"./FallbackSpinner-1.0.36-D7KlMhQ_.js";import"./vendor-1.0.36-CN03Eozo.js";import"./loglevel-1.0.36-BZ7XahX3.js";import"./lodash-1.0.36-DFhYoGis.js";import"./Typography-1.0.36-CpRCY5e-.js";import"./useEnhancedEffect-1.0.36-CTzd5Szc.js";import"./index-1.0.36-BW5TOU2Q.js";import"./useStoreTable-1.0.36-DAzrykvV.js";import"./index-1.0.36-BDOx_E1a.js";import"./Tooltip-1.0.36-COg3Mxx7.js";import"./SanitizeComponent-1.0.36-DO2eoRBQ.js";import"./index-1.0.36-Dv-fkoQB.js";import"./tanstack-1.0.36-BtzdZ5qw.js";import"./index.esm-1.0.36-CdlqSOii.js";import"./createSvgIcon-1.0.36-CIHUMY7B.js";import"./Stack-1.0.36-K2HrciJA.js";import"./useThemeProps-1.0.36-BvrgfXwP.js";import"./getThemeProps-1.0.36-R5fuQQuM.js";import"./Collapse-1.0.36-DzOtbj0p.js";import"./AlertTitle-1.0.36-BMDG6EIt.js";import"./Close-1.0.36-Bg2BHC5L.js";import"./debounce-1.0.36-Be36O1Ab.js";import"./InputAdornment-1.0.36-DJw47I9A.js";import"./useFormControl-1.0.36-DwbRv5ZH.js";import"./MenuItem-1.0.36-BUF9VZzL.js";import"./dividerClasses-1.0.36-cwzIcK9n.js";import"./ThemeProvider-1.0.36-BePdakPr.js";import"./useControlled-1.0.36-DU9XYnsb.js";import"./ListItemIcon-1.0.36-Bqr3TVuQ.js";import"./Divider-1.0.36-B5JUONQZ.js";import"./Switch-1.0.36-BYfunOZA.js";import"./SwitchBase-1.0.36-DQfS6hYA.js";import"./Slider-1.0.36-P1QSgbLL.js";import"./visuallyHidden-1.0.36-Dan1xhjv.js";import"./isHostComponent-1.0.36-DVu5iVWx.js";import"./TimePicker-1.0.36-C5e7mwu9.js";import"./useMobilePicker-1.0.36-BzfSFtwm.js";import"./Popper-1.0.36-B2EKBEPA.js";import"./ListItem-1.0.36-CIrAeyuU.js";import"./timeViewRenderers-1.0.36-W7AVXe16.js";import"./DateTimePicker-1.0.36-DkaCK-9y.js";import"./Tabs-1.0.36-DsFVtNgs.js";import"./dateViewRenderers-1.0.36-Cc9wJWzm.js";import"./DatePicker-1.0.36-D23ADk3G.js";import"./index.esm-1.0.36-BcBy0Voo.js";import"./RestApi-1.0.36-XUqEDvWp.js";import"./TableContainer-1.0.36-CsHiUQr0.js";import"./AdminTheme-1.0.36-Bhvs-n11.js";import"./ActionsSettings-1.0.36-BoYKkBaN.js";import"./TargetEnum-1.0.36-DPFnTxiX.js";import"./ScopeEnum-1.0.36-B4DDvIDj.js";import"./TabPanel-1.0.36-CEnbl1IG.js";import"./useTableUpdater-1.0.36-hYY8Nrtx.js";import"./settings-1.0.36-CMky96jX.js";import"./LanguagesSupport-1.0.36-CNwr1suX.js";import"./useFormDetails-1.0.36-Bik4Yf-M.js";import"./useScreenSize-1.0.36-Cyh3FPEf.js";import"./index-1.0.36-B0PsaY_K.js";import"./AggregationLabelsEnum-1.0.36-B-3lhjpJ.js";import"./useTableCode-1.0.36-BdG0UEZ9.js";import"./useTheme-1.0.36-BoaurWjH.js";import"./useStoreFormSettings-1.0.36-DjvLmz7r.js";import"./useTableColumnOrder-1.0.36-BKuLdalh.js";import"./AlertDialog-1.0.36-PpU2DQEA.js";var W;(function(e){e.csv="text/csv",e.tsv="text/tab-separated-values",e.plain="text/plain"})(W||(W={}));var I=e=>e,g=e=>e,V=I,X=I,_=I,he=I,be=I,ar={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:W.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},fr=`\r
`,xr="\uFEFF",Q=e=>Object.assign({},ar,e);class hr extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class br extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class gr extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}class yr extends Error{constructor(t){super(t),this.name="UnsupportedDataFormatError"}}var jr=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},wr=e=>he(typeof e=="object"?e.key:e),vr=e=>be(typeof e=="object"?e.displayLabel:e),Sr=(e,...t)=>t.reduce((s,c)=>c(s),e),Cr=e=>t=>e.useBom?X(g(t)+xr):t,Tr=e=>t=>e.showTitle?D(X(g(t)+e.title))(_("")):t,D=e=>t=>X(g(e)+g(t)+fr),je=e=>(t,s)=>kr(e)(_(g(t)+g(s))),kr=e=>t=>I(g(t)+e.fieldSeparator),Rr=(e,t)=>s=>{if(!e.showColumnHeaders)return s;if(t.length<1)throw new br("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let c=_("");for(let p=0;p<t.length;p++){const l=vr(t[p]);c=je(e)(c,we(e,g(l)))}return c=_(g(c).slice(0,-1)),D(s)(c)},Or=(e,t,s)=>c=>{let p=c;for(var l=0;l<s.length;l++){let m=_("");for(let y=0;y<t.length;y++){const w=wr(t[y]),h=s[l][g(w)];m=je(e)(m,we(e,h))}m=_(g(m).slice(0,-1)),p=D(p)(m)}return p},Er=e=>+e===e&&(!isFinite(e)||!!(e%1)),Br=(e,t)=>{if(Er(t)){if(e.decimalSeparator==="locale")return V(t.toLocaleString());if(e.decimalSeparator)return V(t.toString().replace(".",e.decimalSeparator))}return V(t.toString())},z=(e,t)=>{let s=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(s=e.quoteCharacter+jr(t,e.quoteCharacter)+e.quoteCharacter),V(s)},Fr=(e,t)=>{const s=t?"true":"false";return V(e.boolDisplay[s])},Ar=(e,t)=>typeof t>"u"&&e.replaceUndefinedWith!==void 0?z(e,e.replaceUndefinedWith+""):t===null?z(e,"null"):z(e,""),we=(e,t)=>{if(typeof t=="number")return Br(e,t);if(typeof t=="string")return z(e,t);if(typeof t=="boolean"&&e.boolDisplay)return Fr(e,t);if(t===null||typeof t>"u")return Ar(e,t);throw new yr(`
    typeof ${typeof t} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},Pr=e=>t=>{const s=Q(e),c=s.useKeysAsHeaders?Object.keys(t[0]):s.columnHeaders;let p=Sr(X(""),Cr(s),Tr(s),Rr(s,c),Or(s,c,t));if(g(p).length<1)throw new hr("Output is empty. Is your data formatted correctly?");return p},Nr=e=>t=>{const s=Q(e),c=g(t),p=s.useTextFile?"text/plain":s.mediaType;return new Blob([c],{type:`${p};charset=utf8;`})},_r=e=>t=>{if(!window)throw new gr("Downloading only supported in a browser environment.");const s=Nr(e)(t),c=Q(e),p=c.useTextFile?"txt":c.fileExtension,l=`${c.filename}.${p}`,m=document.createElement("a");m.download=l,m.href=URL.createObjectURL(s),m.setAttribute("visibility","hidden"),document.body.appendChild(m),m.click(),document.body.removeChild(m)},Ir=We();const Mr=({openSelection:e,setOpenSelection:t,appLanguage:s,columnLabels:c,availableColumns:p,selectedColumns:l,setSelectedColumns:m})=>{const y=me("(max-width:900px)"),w=me("(max-width:600px)");return i.jsx(Ke,{open:e,onClose:()=>{t(!1)},children:i.jsxs(T,{sx:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",width:w?"80vw":y?"70vw":"60vw",maxWidth:"700px",bgcolor:"background.paper",boxShadow:24,borderRadius:"4px",p:4},children:[i.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-20px"},children:[i.jsx("h3",{children:s.selectFromList}),i.jsx(H,{onClick:()=>{t(!1)},children:i.jsx(ze,{})})]}),i.jsx(ye,{fullWidth:!0,children:i.jsx(lr,{multiple:!0,options:p,value:l,disableCloseOnSelect:!0,getOptionLabel:h=>c[h],onChange:(h,k)=>{m(k),h.stopPropagation()},renderInput:h=>i.jsx(dr,{...h}),renderTags:(h,k)=>h.map((v,j)=>{const{key:R,...B}=k({index:j});return i.jsx(cr,{variant:"outlined",label:c[v],...B},R)})})})]})})},qr=({table:e,appId:t,metaData:s,bulkActions:c,tableStore:p,appLanguage:l,locale:m,refetch:y,componentWidth:w,aggregates:h})=>{a.debug(t,s,c);const k=sr(),v=p.table,j=p.columns;nr(t),De(t);const[R]=u.useState(p.table.clientSideProcessing),B=n=>{var r,o,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((o=s==null?void 0:s.columns[d])==null?void 0:o.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.data_type;return"varchar"},Y=n=>{var r,o,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((o=s==null?void 0:s.columns[d])==null?void 0:o.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.column_type;return null},ee=()=>M.map(n=>{const r={};for(let o=0;o<b.length;o++)r[P[b[o]]]=n[P[b[o]]];return r}),J=()=>{var n,r,o;return(n=s==null?void 0:s.src)!=null&&n.app_id?"ppBulkAction-"+s.src.app_id+"-"+s.src.cnt_id:(r=s==null?void 0:s.src)!=null&&r.dbs&&((o=s==null?void 0:s.src)!=null&&o.tbl)?"ppBulkAction-"+s.src.dbs+"-"+s.src.tbl:null},[Jr,Ur]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdforientation");if(n!==null)return n}catch(n){a.debug(n)}return"landscape"}),[Kr,zr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdfstyle");if(n!==null)return n}catch(n){a.debug(n)}return"striped"}),[Gr,Xr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-poweredBy");if(n!==null)return n==="true"}catch(n){a.debug(n)}return!0});let re="csv";c.select!==void 0&&(re="select");const[f,ve]=u.useState(re),[Se,te]=u.useState(!1),Ce=u.useMemo(()=>Me(),[]),S=er(t),F=u.useMemo(()=>{const n={};return j.filter(r=>r.lookup!==void 0&&S!==void 0&&S[r.columnName]!==void 0).map(r=>{var o;if(S!==void 0&&S[r.columnName]!==void 0){const x=[];for(const d in S[r.columnName]){const L={key:d,value:Array.isArray(S[r.columnName][d])?S[r.columnName][d].join((o=r.lookup)==null?void 0:o.delimiter):S[r.columnName][d]};x.push(L)}n[r.columnName]=x}}),n},[S,j]);a.debug("lookupColumns",F);const A=u.useMemo(()=>{const n={};return j.filter(r=>r.computedField!==void 0).map(r=>{n[r.columnName]=r.computedField}),n},[j]);a.debug(A);const P=u.useMemo(()=>{const n={};return j.map(r=>{A[r.columnName]?n[r.columnName]=A[r.columnName].label:n[r.columnName]=r.columnLabel}),n},[A,j]);a.debug(P);const Te=(n,r)=>{if(F!==void 0&&F[n]!==void 0){const o=F[n].filter(x=>x.key===r);if(Array.isArray(o)&&o.length===1)return o[0].value}return r},Z=e.getAllColumns(),C=e.getSelectedRowModel().rows,O=u.useMemo(()=>Z.filter(n=>n.id!=="mrt-row-actions"&&n.id!=="mrt-row-select"&&n.id!=="mrt-row-expand").map(n=>n.id),[]);a.debug(O);const oe=u.useMemo(()=>O.map(n=>{const r=Y(n);if(r===null)return 20;if(r.indexOf("(")!==-1){let o=r.substring(r.indexOf("(")+1);return o.indexOf(")")!==-1&&(o=o.substring(0,o.indexOf(")"))),o.indexOf(".")!==-1&&(o=o.substring(0,o.indexOf("."))),o.indexOf(",")!==-1&&(o=o.substring(0,o.indexOf(","))),Number(o)}return null}),[O]);a.debug(oe);const[se,Qr]=u.useState(()=>{const n=J();if(n!==null)try{const r=localStorage.getItem(n+"-wrapped-columns");if(r!==null)return JSON.parse(r)}catch(r){a.debug(r)}return O.filter((r,o)=>(oe[o]??99)<=20)});a.debug(se);const ne=u.useMemo(()=>{const n=J();if(n!==null)try{const r=localStorage.getItem(n);if(r!==null)return JSON.parse(r)}catch(r){a.debug(r)}return O},[O]);a.debug(ne);const[b,ke]=u.useState(ne);a.debug(b);const M=C.map(n=>{const r={};return Z.map(o=>{o.id!=="mrt-row-actions"&&o.id!=="mrt-row-select"&&o.id!=="mrt-row-expand"&&(F!==void 0&&F[o.id]!==void 0?r[P[o.id]]=Te(o.id,n.getValue(o.id)):A[o.id]||(r[P[o.id]]=n.getValue(o.id)))}),r});a.debug(M);const ie=C.map(n=>{const r={};return Z.map(o=>{o.id!=="mrt-row-actions"&&o.id!=="mrt-row-select"&&o.id!=="mrt-row-expand"&&A[o.id]===void 0&&(r[o.id]=n.getValue(o.id))}),r});a.debug(ie);const q=()=>{var n,r;return(s==null?void 0:s.src)===void 0?t:s.src.app_id&&((r=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:r.app_title)!==""?s.app.app[0].app_title:s.src.dbs?s.src.tbl:t},le=Q({filename:q(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),[Re,Yr]=u.useState(()=>{const n=J();if(n!==null)try{const r=localStorage.getItem(n+"-pdf-title");if(r!==null)return r}catch(r){a.debug(r)}return q()});a.debug("pdfTitle",Re);const Oe=async()=>{},Ee=()=>{const n=Pr(le)(ee());_r(le)(n)},Be=()=>{$(new Blob([JSON.stringify(ee())],{type:"text/json;charset=utf-8"}),q()+".json")};u.useRef();const Fe=()=>{const n=C.map(o=>{const x={};for(let d=0;d<b.length;d++)o.original[b[d]]!==void 0&&(x[b[d]]=o.original[b[d]]??"");return{row:x}}),r=Ir.toXML({table:n});$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".xml")},Ae=()=>{const n=He(t);a.debug(n);let r="insert into "+n.tbl+" (";Object.keys(C[0].original).map(o=>{r+=o+","}),r=r.slice(0,-1)+") values ";for(let o=0;o<M.length;o++){const x=M[o];r+="(";for(const d in x){const L=Je(B(d));x[d]===null?r+="null,":L==="number"?r+=x[d]+",":r+="'"+x[d]+"',"}r=r.slice(0,-1),r+="),"}r=r.slice(0,-1)+`;
`,$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".sql")},Pe=()=>{k(de({appId:t,property:{isRowCountUpdated:!0}}));for(let n=0;n<M.length;n++){const r=Ue(s,ie[n]);tr(t,r,o=>{if(o!=null&&o.code&&(o!=null&&o.message))switch(o.code){case"ok":U(l.deletedSuccessful,{variant:"success"}),y();break;default:a.error(o),U(o.message??l.invalidResponse,{variant:"error"})}else a.error(o),U(l.invalidResponse,{variant:"error"})},o=>{a.error("error",o),U(o??l.invalidResponse,{variant:"error"})})}e.setRowSelection({})},Ne=()=>null,_e=()=>null,[Zr,Lr]=u.useState(0),[$r,Wr]=u.useState(0),[Ie,ce]=u.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{variant:"popover",popupId:Ce,children:n=>{var r;return i.jsxs(i.Fragment,{children:[w<900?i.jsx(G,{title:l.bulkActions,children:i.jsx(H,{...ue(n),children:i.jsx(pe,{})})}):i.jsx(K,{variant:"contained",endIcon:i.jsx(pe,{}),...ue(n),children:l.bulkActions}),p.state.relTab===!0&&i.jsx(K,{variant:"contained",startIcon:i.jsx(Ge,{}),sx:{marginLeft:"10px"},onClick:()=>{k(de({appId:t,property:{isRelTabOpen:!1}}))},children:l.back}),i.jsx(ur,{...Ze(n),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:i.jsxs(T,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[R===!0?i.jsxs(T,{sx:{textAlign:"center",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[C.length===0?i.jsx(ae,{sx:{textAlign:"center"},children:l.noRowsSelected}):i.jsx("span",{}),i.jsx(ye,{children:i.jsx(E,{control:i.jsx(pr,{className:"pp-checkbox",checked:C.length>0,onChange:()=>{e.toggleAllRowsSelected()}}),label:i.jsx(T,{sx:{display:"flex",alignItems:"center"},children:l.selectAll})})})]}):i.jsx(i.Fragment,{children:C.length===0&&i.jsx(T,{sx:{textAlign:"center"},children:i.jsx(ae,{children:l.noRowsSelected})})}),i.jsxs(mr,{value:f,onChange:(o,x)=>{ve(x),o.stopPropagation()},children:[Ne(),c.csv&&i.jsx(E,{value:"csv",label:l.exportToCsv,control:i.jsx(N,{})}),c.json&&i.jsx(E,{value:"json",label:l.exportToJson,control:i.jsx(N,{})}),_e(),c.xml&&i.jsx(E,{value:"xml",label:l.exportToXml,control:i.jsx(N,{})}),c.sql&&!qe(t)&&i.jsx(E,{value:"sql",label:l.exportToSql,control:i.jsx(N,{})}),((r=s==null?void 0:s.privs)==null?void 0:r.delete)&&!Ve(s)&&(c==null?void 0:c.delete)===!0&&v.transactions.delete&&i.jsx(E,{value:"delete",label:l.deletePermanently,control:i.jsx(N,{})}),(c.select??!1)&&i.jsx(E,{value:"select",label:l.addSelectedRow,control:i.jsx(N,{})})]}),i.jsxs(T,{sx:{display:"grid",gridTemplateColumns:f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"?"1fr auto":"1fr",gap:"10px"},children:[i.jsx(K,{variant:"contained",onClick:()=>{if(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"){const o=J();if(o!==null)try{localStorage.setItem(o,JSON.stringify(b)),localStorage.setItem(o+"-wrapped-columns",JSON.stringify(se))}catch(x){a.debug(x)}}switch(f){case"pdf":Oe();break;case"csv":Ee();break;case"json":Be();break;case"excel":break;case"xml":Fe();break;case"sql":Ae();break;case"delete":te(!0);break}},disabled:C.length===0||(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&(b==null?void 0:b.length)===0,children:l.apply}),(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&i.jsx(G,{title:m.showHideColumns,children:i.jsx(H,{onClick:()=>{ce(!0)},children:i.jsx(Xe,{})})})]})]})})]})}}),i.jsx(or,{title:l.deleteRowsTitle,message:l.deleteRowsMessage,open:Se,setOpen:te,onConfirm:()=>{Pe()},theme:ir}),i.jsx(Mr,{openSelection:Ie,setOpenSelection:ce,appLanguage:l,columnLabels:P,availableColumns:O,selectedColumns:b,setSelectedColumns:ke})]})},Vr=u.lazy(()=>ge(()=>import("./TableChart-1.0.36-7s8vgP6Z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64]),import.meta.url)),Hr=u.lazy(()=>ge(()=>import("./TableToolbarInlineEditingButton-1.0.36-DMUCn-n5.js"),__vite__mapDeps([65,1,2,3,66,35,16,9,10,11,12,67,17,68,15,7,8,13,69,51,53,54,70,71,20,48,72,30,42,43,73,58,39,28,29,40,38,74,75,22,76,6,14,27,24,25,63,23,21,26,64,77,78,79,31,32,33,80,81,82,83,84,85,86,5,87,88,89,90,91,92,46,36,37,47,49,50,52,55,56,57,59,60,61,62,93,94,41,95,96,97,98,99,100,101,45,102]),import.meta.url)),Uo=({table:e,metaData:t,appId:s,bulkActions:c,hasBulkActions:p,tableStore:l,appLanguage:m,locale:y,refetch:w,showForm:h,appSettings:k,componentWidth:v,aggregates:j})=>{var B;const R=l.table;return rr(s),i.jsxs(T,{sx:{display:"flex",flexWrap:"nowrap",gap:v<600?"0":"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[i.jsx(G,{arrow:!0,title:m.refresh,className:"ppToolbarRefreshIcon",children:i.jsx(H,{onClick:()=>w(),children:i.jsx(Qe,{})})}),((B=R==null?void 0:R.transactions)==null?void 0:B.insert)&&i.jsx(i.Fragment,{children:v<900?i.jsx(G,{title:m.newRow,children:i.jsx(H,{onClick:()=>{h(null,fe.INSERT)},children:i.jsx(Le,{})})}):i.jsx(K,{variant:"contained",startIcon:i.jsx($e,{}),onClick:()=>{h(null,fe.INSERT)},children:m.newRow})}),p&&i.jsx(qr,{table:e,appId:s,metaData:t,bulkActions:c,tableStore:l,appLanguage:m,locale:y,refetch:w,componentWidth:v,aggregates:j}),l.table.charts.enabled===!0&&(l.table.charts.interactive===!0||!0)&&i.jsx(u.Suspense,{fallback:i.jsx(xe,{}),children:i.jsx(Vr,{appId:s,componentWidth:v,table:e,tableStore:l,metaData:t,appLanguage:m})}),l.table.inlineEditing.addColumnButton===!1&&l.columns.filter(Y=>Y.inlineEditing===!0).length>0&&i.jsx(u.Suspense,{fallback:i.jsx(xe,{}),children:i.jsx(Hr,{appId:s,metaData:t,locale:y,appLanguage:m,componentWidth:v,refetch:w})}),!1]})};export{Uo as default};
