const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsColumns-1.0.32-DMVb9LVP.js","./cm-1.0.32-roxymF9V.js","./redux-1.0.32-BsgiH_bG.js","./vendor-1.0.32-BmpNFhoq.js","./useMetadataColumns-1.0.32-B-d0r_gO.js","./cjs-1.0.32-AqZgyPIn.js","./Typography-1.0.32-D9d-UzA0.js","./lib-1.0.32-CBsDffd2.js","./loglevel-1.0.32-BZ7XahX3.js","./lodash-1.0.32-B7VmFneh.js","./moment-1.0.32-C5S46NFB.js","./iconBase-1.0.32-inVKjZEJ.js","./notistack-1.0.32-N2grKTUm.js","./useTheme-1.0.32-Boox29T5.js","./RestApi-1.0.32-Bp_RRidr.js","./index-1.0.32-D6IhVoXv.js","./useStoreTable-1.0.32-DHfF4DKP.js","./useFormStore-1.0.32-CuqY-zLZ.js","./Spinner-1.0.32-D1QL5ry3.js","./AdminTheme-1.0.32-WcjuTcVF.js","./index-1.0.32-BfmmLuE3.js","./ActionsDml-1.0.32-CqneDSgR.js","./index-1.0.32-wSDMfVDG.js","./TextField-1.0.32-EUJpMVir.js","./FormHelperText-1.0.32-BG3xt4JA.js","./useFormControl-1.0.32-Tf9RtQ-m.js","./FormLabel-1.0.32-agP5qBoD.js","./Menu-1.0.32-CRF2Elfu.js","./useControlled-1.0.32-fDn_qfrW.js","./createSvgIcon-1.0.32-DGmABpxr.js","./MenuItem-1.0.32-Bc1CXi88.js","./index-1.0.32-C02EIL93.js","./useTableUpdater-1.0.32-BssjPM3j.js","./Stepper-1.0.32-BV_H_xIw.js","./StepContent-1.0.32-BIhCsZP-.js","./Collapse-1.0.32-3dNdwtSs.js","./FormControlLabel-1.0.32-B7mCGY7x.js","./Checkbox-1.0.32-CFJQbOdr.js","./SwitchBase-1.0.32-8MhCpXB3.js","./ConfirmDialog-1.0.32-A4KvBqFE.js","./DialogContent-1.0.32-B0aW5NMk.js","./ConfirmDialog-1.0.32--D4jr2go.css","./Link-1.0.32-BLIjMrJd.js","./AccordionSummary-1.0.32-9Jmrvpfq.js","./AccordionDetails-1.0.32-DYksa6e-.js","./Switch-1.0.32-BfMlbG-m.js","./main-1.0.32.js","./useFormUpdater-1.0.32-BjBIrhkK.js","./PremiumFeature-1.0.32-DzBj81Kk.js","./Slider-1.0.32-C4ittimZ.js","./visuallyHidden-1.0.32-Dan1xhjv.js","./RadioGroup-1.0.32-BPYStg8S.js","./Radio-1.0.32-Dg2N7INw.js","./EnumTypeEnum-1.0.32-Ws4BsaYD.js","./react-number-format.es-1.0.32-Dts2B-c3.js","./ResizableDrawer-1.0.32-BHU0VG8c.js","./useScreenSize-1.0.32-ZGgk_gJq.js","./SettingsForm-1.0.32-CaIF0nMv.js","./CssUnitTextField-1.0.32-DMkEfH2_.js","./SettingsFormRelationships-1.0.32-pYQom-RH.js","./ComponentColumn-1.0.32-C3lMj1lK.js","./ActionsExplorer-1.0.32-DZpEeZtZ.js","./Autocomplete-1.0.32-CC-cYb5n.js","./Close-1.0.32-BV_W41ov.js","./Popper-1.0.32-Dr5x4zRa.js","./ActionsApp-1.0.32-CpkxEv_o.js","./Tooltip-1.0.32-BFRxm1kH.js","./ToggleButtonGroup-1.0.32-BmgjhW3x.js","./ThemeSettings-1.0.32-Ck8NwdcD.js","./index-1.0.32-DEU9wnLT.js","./Stack-1.0.32-BKAIHkUk.js","./SettingsFormCode-1.0.32-CP-BXTKl.js","./index-1.0.32-Iej93Alk.js","./index-1.0.32-6Cfvmv3-.js","./index-1.0.32-D1JAhTpk.js","./TreeItem2-1.0.32-D1qiOjpo.js","./TreeItem2Provider-1.0.32-C330i2OX.js","./ThemeContainer-1.0.32-DQB7LmiJ.js","./dompurify-1.0.32-CCJo14B2.js","./FallbackSpinner-1.0.32-kTXSQeKF.js","./ThemeContainer-1.0.32-DR7D6eET.css"])))=>i.map(i=>d[i]);
import{_ as u}from"./main-1.0.32.js";import{j as e}from"./cm-1.0.32-roxymF9V.js";import{r as o}from"./redux-1.0.32-BsgiH_bG.js";import{l as i,a2 as X,S as m,N as y,as as Y,P as J,bn as Q,a as L,bq as Z,s as $,br as ee,bs as te,b as h,bt as se}from"./lib-1.0.32-CBsDffd2.js";import{u as v,a as oe}from"./RestApi-1.0.32-Bp_RRidr.js";import{A as z}from"./AdminTheme-1.0.32-WcjuTcVF.js";import{c as re}from"./ActionsSettings-1.0.32-u1MS6Fmu.js";import{S as ie}from"./ScopeEnum-1.0.32-B4DDvIDj.js";import{e as c}from"./notistack-1.0.32-N2grKTUm.js";import{T as b,C as M,a as O,b as ne}from"./ConfirmDialog-1.0.32-A4KvBqFE.js";import{m as ae,j as le,f as me,l as ce}from"./index-1.0.32-D1JAhTpk.js";import{A as ue,T as de,M as pe,B as j}from"./cjs-1.0.32-AqZgyPIn.js";import{B as fe,a as ge,T as xe,b as _}from"./TabPanel-1.0.32-DFUvt78C.js";import{u as Se}from"./useFormStore-1.0.32-CuqY-zLZ.js";import{T as P}from"./TargetEnum-1.0.32-DPFnTxiX.js";import{S as f,B as he}from"./Spinner-1.0.32-D1QL5ry3.js";import{B as be}from"./settings-1.0.32-OrNy0l2i.js";import{c as je,D as _e}from"./useTheme-1.0.32-Boox29T5.js";import{T as Te}from"./Typography-1.0.32-D9d-UzA0.js";import{I as T}from"./iconBase-1.0.32-inVKjZEJ.js";import"./vendor-1.0.32-BmpNFhoq.js";import"./loglevel-1.0.32-BZ7XahX3.js";import"./lodash-1.0.32-B7VmFneh.js";import"./moment-1.0.32-C5S46NFB.js";import"./DialogContent-1.0.32-B0aW5NMk.js";import"./Menu-1.0.32-CRF2Elfu.js";import"./MenuItem-1.0.32-Bc1CXi88.js";import"./index-1.0.32-D6IhVoXv.js";const ve=t=>{const r=v(a=>a.ui.formSettings.isOpen&&a.ui.formSettings.appId===t);return i.debug(t,r),r},Ce=()=>{const t=v(r=>r.ui.formSettings.hideThemeSettings);return i.debug("hideThemeSetting",t),t},Fe=t=>{const r=v(a=>{var d,p;return(p=(d=a.forms[t])==null?void 0:d.state)==null?void 0:p.isUpdated});return i.debug("isUpdated",r),r},ke=o.lazy(()=>u(()=>import("./SettingsColumns-1.0.32-DMVb9LVP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54]),import.meta.url)),Be=o.lazy(()=>u(()=>import("./ResizableDrawer-1.0.32-BHU0VG8c.js"),__vite__mapDeps([55,1,2,3,56,7,8,9,10,14,6,19,11,5,12,27]),import.meta.url)),Ee=o.lazy(()=>u(()=>import("./SettingsForm-1.0.32-CaIF0nMv.js"),__vite__mapDeps([57,1,2,3,7,8,9,10,14,47,48,22,11,6,19,26,25,5,12,43,27,28,35,44,24,51,52,38,29,36,45,58,23,18,42,13,15,59,60,61,62,63,64,65,37,66,30,67,33,34,39,40,41,31]),import.meta.url)),De=o.lazy(()=>u(()=>import("./ThemeSettings-1.0.32-Ck8NwdcD.js"),__vite__mapDeps([68,1,2,3,14,7,8,9,10,13,15,6,5,11,12,48,22,19,26,25,69,18,24,45,38,28,70,40,49,50,27,36,42,51,52,29,58,23,43,35,44]),import.meta.url));o.lazy(()=>u(()=>import("./SettingsFormCode-1.0.32-CP-BXTKl.js"),__vite__mapDeps([71,1,2,3,72,73,5,6,7,8,9,10,11,12,39,19,40,41,74,14,66,64,28,18,75,76,29,35,37,38,25,48,22,26,77,46,16,21,13,15,56,78,79,80,43,27]),import.meta.url));const nt=({appId:t})=>{var R,A;i.debug(t);const r=oe(),a=Ce(),d=je(t),[p]=o.useState(X.getSelectors().selectTableById(m.getState().tables,t));i.debug(p);const[g,N]=o.useState(y.getSelectors().selectForm(m.getState().forms,t));i.debug(g);const U=Se(t),[V,Re]=o.useState(Y.getSelectors().selectThemeById(m.getState().themes,t));i.debug(V);const C=Fe(t),x=n=>{r(Z({appId:t,isUpdated:n}))},[w,F]=o.useState(!1),G=((R=z)==null?void 0:R.palette.mode)===J.LIGHT?(A=z)==null?void 0:A.palette.primary.main:"",k=n=>{r($({anchor:n}))},B=()=>{g!==void 0&&r(ee({appId:t,formState:g}))},l=()=>{r(te({})),x(!1)},S=()=>{C?F(!0):(B(),l())},E=()=>{{const n=m.getState().ui.formSettings;re(t,ie.GLOBAL,n.isRelationTable===!0?P.RFORM:P.FORM,s=>{if(i.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":N(y.getSelectors().selectForm(m.getState().forms,t)),c(s.message,{variant:"success"}),U.columns.map((I,W)=>{I.lookup!==void 0&&r(se({appId:t,index:W}))});break;case"info":c(s.message,{variant:"info"});break;default:i.error(s),c(s.message??h.contactSupport,{variant:"error"})}else i.error(s),c(h.contactSupport,{variant:"error"})},s=>{i.error("error",s),c(s??h.contactSupport,{variant:"error"})}),x(!1)}},H=()=>{C?(E(),setTimeout(()=>{l()},1e3)):l()},[D,q]=o.useState(0),K=o.useMemo(()=>{const n=[{title:"Form",icon:e.jsx(ae,{})},{title:"Columns",icon:e.jsx(le,{})},{title:"Hooks",icon:e.jsx(me,{})},{title:"Theme",icon:e.jsx(ce,{})}];return Q(d)?n.splice(0,2):a?n.splice(0,3):n},[a]);return ve(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(Be,{closeDrawer:S,children:[e.jsxs(ue,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(de,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Te,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(b,{title:"Dock to left",position:"bottom",children:e.jsx(T,{onClick:()=>{k(L.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(fe,{})})}),e.jsx(b,{title:"Dock to right",position:"bottom",children:e.jsx(T,{onClick:()=>{k(L.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ge,{})})}),e.jsx(b,{title:"Close",position:"bottom",children:e.jsx(T,{onClick:S,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(pe,{})})})]}),e.jsx(be,{menuItems:K,menuIndex:D,setMenu:q,hide:[2]})]}),e.jsx(M,{className:"pp-settings-container",children:e.jsx(O,{sx:{padding:0,margin:0},children:e.jsx(xe,{value:D,children:e.jsxs(he,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(_,{value:0,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(Ee,{appId:t})})}),e.jsx(_,{value:1,className:"pp-column-settings-container",children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(ke,{appId:t})})}),!1,a!==!0&&e.jsx(_,{value:3,children:e.jsx(o.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(De,{appId:t,source:_e.FORM,setIsUpdated:x})})})]})})})}),e.jsx(M,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:G},children:e.jsxs(O,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(j,{variant:"outlined",className:"footer_action_button_apply",onClick:E,children:"Apply"}),e.jsx(j,{variant:"outlined",className:"footer_action_button",onClick:H,children:"OK"}),e.jsx(j,{variant:"outlined",className:"footer_action_button",onClick:S,children:"Cancel"})]})})]})}),e.jsx(ne,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:w,setOpen:F,onConfirm:()=>{B(),l()},onKeep:()=>{l()}})]})};export{nt as default};
