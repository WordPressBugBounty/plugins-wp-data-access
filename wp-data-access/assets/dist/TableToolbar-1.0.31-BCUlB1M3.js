const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableChart-1.0.31-Cx6IzCBU.js","./cm-1.0.31-BzgG35ZX.js","./redux-1.0.31-CuzmJMK6.js","./vendor-1.0.31-BmpNFhoq.js","./index-1.0.31-CARe8LQx.js","./index-1.0.31-545nqCBP.js","./cjs-1.0.31-B-_HdexB.js","./Typography-1.0.31-BdhCS1KD.js","./lib-1.0.31-BbX3jq4e.js","./loglevel-1.0.31-BZ7XahX3.js","./lodash-1.0.31-BtCjXqrS.js","./moment-1.0.31-C5S46NFB.js","./iconBase-1.0.31-C37NsRUm.js","./notistack-1.0.31-CuGQWCbt.js","./RestApi-1.0.31-C4KxgDIV.js","./ChartTypeSelection-1.0.31-CmsJYaXK.js","./ChartTypes-1.0.31-BPnqCrdo.js","./index-1.0.31-C_6FsHsh.js","./FormHelperText-1.0.31-CQcG9a5q.js","./useFormControl-1.0.31-2YJOQA8g.js","./TextField-1.0.31-TtMrk-_t.js","./FormLabel-1.0.31-7Vju-x1c.js","./Menu-1.0.31-BOTBPSPr.js","./AdminTheme-1.0.31-QbwKcRV7.js","./useControlled-1.0.31-27-LkxG9.js","./createSvgIcon-1.0.31-BC4iq9Gi.js","./MenuItem-1.0.31-CTowyoSp.js","./ListItemIcon-1.0.31-BCafYY7N.js","./Chart-1.0.31-BJ9n7v4e.js","./main-1.0.31.js","./useTheme-1.0.31-BXg8i2QZ.js","./index-1.0.31-DboOrfK9.js","./Spinner-1.0.31-Be7r01J6.js","./Tooltip-1.0.31-crORCg22.js","./Popper-1.0.31-QmfursjS.js","./useTableColumnOrder-1.0.31-CvAinKiB.js","./Autocomplete-1.0.31-DLbMViDM.js","./Close-1.0.31-BTPwVQpD.js","./TableToolbarInlineEditingButton-1.0.31-CQLD23Y_.js","./TableQuery-1.0.31-s1kaUzCT.js","./useStoreTable-1.0.31-CksmwD3u.js","./index-1.0.31-C4m7fjwq.js","./ActionsDml-1.0.31-DnIQKtBi.js","./ConfirmDialog-1.0.31-bZDmgpd0.js","./DialogContent-1.0.31-_6ykng6a.js","./ConfirmDialog-1.0.31--D4jr2go.css","./SanitizeComponent-1.0.31-Dhv0AQbJ.js","./dompurify-1.0.31-CCJo14B2.js","./tanstack-1.0.31-DxTNlTkm.js","./index.esm-1.0.31-BlNbk2TL.js","./Collapse-1.0.31-CkBm-DA4.js","./FormControlLabel-1.0.31-VNfgE3Oe.js","./Checkbox-1.0.31-vMcA9dS9.js","./SwitchBase-1.0.31-AIM_3--O.js","./InputAdornment-1.0.31-DPyTBX7W.js","./TimePicker-1.0.31-BANN2pIs.js","./useMobilePicker-1.0.31-DH3b4aWb.js","./visuallyHidden-1.0.31-Dan1xhjv.js","./ListItem-1.0.31-CWrAezii.js","./timeViewRenderers-1.0.31-CeUACARG.js","./DateTimePicker-1.0.31-D95kRUCa.js","./Tabs-1.0.31-XRJEidP6.js","./dateViewRenderers-1.0.31-B5XFWF81.js","./Divider-1.0.31-BWKAGEdz.js","./DatePicker-1.0.31-wKpNLdLs.js","./Stack-1.0.31-Bz9nXUZB.js","./Slider-1.0.31-BDZ4XVru.js","./Radio-1.0.31-DbEe8Ljo.js","./AlertTitle-1.0.31-Zosaacrw.js","./Switch-1.0.31-LPOyRUXk.js","./index.esm-1.0.31-BcBy0Voo.js","./TableContainer-1.0.31-D5nXSZNu.js","./FallbackSpinner-1.0.31-B4qqxHwC.js","./ActionsSettings-1.0.31-Cf56Toxs.js","./TargetEnum-1.0.31-DPFnTxiX.js","./ScopeEnum-1.0.31-B4DDvIDj.js","./index-1.0.31-ujFQUobk.js","./TabPanel-1.0.31-CQFpWPRX.js","./useTableUpdater-1.0.31-BVeL37Z7.js","./settings-1.0.31-zyRrYuee.js","./settings-1.0.31-Bx2jvYL6.css","./useScreenSize-1.0.31-DKas25yF.js","./ThemeContainer-1.0.31-D01zq5BI.js","./ThemeContainer-1.0.31-DR7D6eET.css","./TableQuery-1.0.31-AnzhVzs2.css"])))=>i.map(i=>d[i]);
import{_ as he}from"./main-1.0.31.js";import{j as l}from"./cm-1.0.31-BzgG35ZX.js";import{r as m}from"./redux-1.0.31-CuzmJMK6.js";import{l as p,v as _e,ao as Ie,a7 as Me,aX as qe,bl as He,bz as Ve,bQ as Je}from"./lib-1.0.31-BbX3jq4e.js";import{F as Ue,M as Ke,B as z,m as ze,P as Xe,K as Ge}from"./cjs-1.0.31-B-_HdexB.js";import{P as Qe,b as ce,a as Ye}from"./index-1.0.31-CARe8LQx.js";import{n as de,o as Ze,p as Le}from"./index-1.0.31-ujFQUobk.js";import{r as $e}from"./jstoxml-1.0.31-Dl-iHI-R.js";import{F as $}from"./FileSaver.min-1.0.31-B7XX4Zrz.js";import"./dompurify-1.0.31-CCJo14B2.js";import{u as We,a as De,b as er}from"./TableQuery-1.0.31-s1kaUzCT.js";import{d as rr}from"./ActionsDml-1.0.31-DnIQKtBi.js";import{b as or}from"./ConfirmDialog-1.0.31-bZDmgpd0.js";import{e as K}from"./notistack-1.0.31-CuGQWCbt.js";import{a as tr}from"./RestApi-1.0.31-C4KxgDIV.js";import{u as sr,A as nr}from"./useTheme-1.0.31-BXg8i2QZ.js";import{u as ue}from"./index-1.0.31-DboOrfK9.js";import{B as C}from"./Spinner-1.0.31-Be7r01J6.js";import{I as V}from"./iconBase-1.0.31-C37NsRUm.js";import{F as be}from"./FormHelperText-1.0.31-CQcG9a5q.js";import{A as lr,C as ir}from"./Autocomplete-1.0.31-DLbMViDM.js";import{T as cr}from"./TextField-1.0.31-TtMrk-_t.js";import{T as G}from"./Tooltip-1.0.31-crORCg22.js";import{P as dr}from"./Menu-1.0.31-BOTBPSPr.js";import{F as pe}from"./FormLabel-1.0.31-7Vju-x1c.js";import{F as O}from"./FormControlLabel-1.0.31-VNfgE3Oe.js";import{C as ur}from"./Checkbox-1.0.31-vMcA9dS9.js";import{R as pr}from"./RadioGroup-1.0.31-1v754ceS.js";import{R as _}from"./Radio-1.0.31-DbEe8Ljo.js";import{R as me}from"./ThemeContainer-1.0.31-D01zq5BI.js";import"./moment-1.0.31-C5S46NFB.js";import{F as ae}from"./FallbackSpinner-1.0.31-B4qqxHwC.js";import"./vendor-1.0.31-BmpNFhoq.js";import"./loglevel-1.0.31-BZ7XahX3.js";import"./lodash-1.0.31-BtCjXqrS.js";import"./Typography-1.0.31-BdhCS1KD.js";import"./index-1.0.31-545nqCBP.js";import"./useStoreTable-1.0.31-CksmwD3u.js";import"./index-1.0.31-C4m7fjwq.js";import"./SanitizeComponent-1.0.31-Dhv0AQbJ.js";import"./index-1.0.31-C_6FsHsh.js";import"./tanstack-1.0.31-DxTNlTkm.js";import"./index.esm-1.0.31-BlNbk2TL.js";import"./createSvgIcon-1.0.31-BC4iq9Gi.js";import"./Collapse-1.0.31-CkBm-DA4.js";import"./InputAdornment-1.0.31-DPyTBX7W.js";import"./useFormControl-1.0.31-2YJOQA8g.js";import"./TimePicker-1.0.31-BANN2pIs.js";import"./useMobilePicker-1.0.31-DH3b4aWb.js";import"./DialogContent-1.0.31-_6ykng6a.js";import"./Popper-1.0.31-QmfursjS.js";import"./AdminTheme-1.0.31-QbwKcRV7.js";import"./useControlled-1.0.31-27-LkxG9.js";import"./visuallyHidden-1.0.31-Dan1xhjv.js";import"./ListItem-1.0.31-CWrAezii.js";import"./timeViewRenderers-1.0.31-CeUACARG.js";import"./MenuItem-1.0.31-CTowyoSp.js";import"./DateTimePicker-1.0.31-D95kRUCa.js";import"./Tabs-1.0.31-XRJEidP6.js";import"./dateViewRenderers-1.0.31-B5XFWF81.js";import"./Divider-1.0.31-BWKAGEdz.js";import"./DatePicker-1.0.31-wKpNLdLs.js";import"./Stack-1.0.31-Bz9nXUZB.js";import"./Slider-1.0.31-BDZ4XVru.js";import"./ListItemIcon-1.0.31-BCafYY7N.js";import"./AlertTitle-1.0.31-Zosaacrw.js";import"./Close-1.0.31-BTPwVQpD.js";import"./Switch-1.0.31-LPOyRUXk.js";import"./SwitchBase-1.0.31-AIM_3--O.js";import"./index.esm-1.0.31-BcBy0Voo.js";import"./TableContainer-1.0.31-D5nXSZNu.js";import"./ActionsSettings-1.0.31-Cf56Toxs.js";import"./TargetEnum-1.0.31-DPFnTxiX.js";import"./ScopeEnum-1.0.31-B4DDvIDj.js";import"./TabPanel-1.0.31-CQFpWPRX.js";import"./useTableUpdater-1.0.31-BVeL37Z7.js";import"./settings-1.0.31-zyRrYuee.js";import"./useScreenSize-1.0.31-DKas25yF.js";import"./useTableColumnOrder-1.0.31-CvAinKiB.js";var W;(function(e){e.csv="text/csv",e.tsv="text/tab-separated-values",e.plain="text/plain"})(W||(W={}));var M=e=>e,g=e=>e,H=M,Q=M,I=M,fe=M,xe=M,mr={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:W.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},ar=`\r
`,fr="\uFEFF",Y=e=>Object.assign({},mr,e);class xr extends Error{constructor(o){super(o),this.name="CsvGenerationError"}}class hr extends Error{constructor(o){super(o),this.name="EmptyHeadersError"}}class br extends Error{constructor(o){super(o),this.name="CsvDownloadEnvironmentError"}}class gr extends Error{constructor(o){super(o),this.name="UnsupportedDataFormatError"}}var jr=function(e,o){return o=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},vr=e=>fe(typeof e=="object"?e.key:e),yr=e=>xe(typeof e=="object"?e.displayLabel:e),wr=(e,...o)=>o.reduce((s,c)=>c(s),e),Sr=e=>o=>e.useBom?Q(g(o)+fr):o,Cr=e=>o=>e.showTitle?D(Q(g(o)+e.title))(I("")):o,D=e=>o=>Q(g(e)+g(o)+ar),ge=e=>(o,s)=>Tr(e)(I(g(o)+g(s))),Tr=e=>o=>M(g(o)+e.fieldSeparator),kr=(e,o)=>s=>{if(!e.showColumnHeaders)return s;if(o.length<1)throw new hr("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let c=I("");for(let a=0;a<o.length;a++){const i=yr(o[a]);c=ge(e)(c,je(e,g(i)))}return c=I(g(c).slice(0,-1)),D(s)(c)},Rr=(e,o,s)=>c=>{let a=c;for(var i=0;i<s.length;i++){let u=I("");for(let j=0;j<o.length;j++){const w=vr(o[j]),h=s[i][g(w)];u=ge(e)(u,je(e,h))}u=I(g(u).slice(0,-1)),a=D(a)(u)}return a},Or=e=>+e===e&&(!isFinite(e)||!!(e%1)),Er=(e,o)=>{if(Or(o)){if(e.decimalSeparator==="locale")return H(o.toLocaleString());if(e.decimalSeparator)return H(o.toString().replace(".",e.decimalSeparator))}return H(o.toString())},X=(e,o)=>{let s=o;return(e.quoteStrings||e.fieldSeparator&&o.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&o.indexOf(e.quoteCharacter)>-1||o.indexOf(`
`)>-1||o.indexOf("\r")>-1)&&(s=e.quoteCharacter+jr(o,e.quoteCharacter)+e.quoteCharacter),H(s)},Fr=(e,o)=>{const s=o?"true":"false";return H(e.boolDisplay[s])},Ar=(e,o)=>typeof o>"u"&&e.replaceUndefinedWith!==void 0?X(e,e.replaceUndefinedWith+""):o===null?X(e,"null"):X(e,""),je=(e,o)=>{if(typeof o=="number")return Er(e,o);if(typeof o=="string")return X(e,o);if(typeof o=="boolean"&&e.boolDisplay)return Fr(e,o);if(o===null||typeof o>"u")return Ar(e,o);throw new gr(`
    typeof ${typeof o} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},Br=e=>o=>{const s=Y(e),c=s.useKeysAsHeaders?Object.keys(o[0]):s.columnHeaders;let a=wr(Q(""),Sr(s),Cr(s),kr(s,c),Rr(s,c,o));if(g(a).length<1)throw new xr("Output is empty. Is your data formatted correctly?");return a},Nr=e=>o=>{const s=Y(e),c=g(o),a=s.useTextFile?"text/plain":s.mediaType;return new Blob([c],{type:`${a};charset=utf8;`})},Pr=e=>o=>{if(!window)throw new br("Downloading only supported in a browser environment.");const s=Nr(e)(o),c=Y(e),a=c.useTextFile?"txt":c.fileExtension,i=`${c.filename}.${a}`,u=document.createElement("a");u.download=i,u.href=URL.createObjectURL(s),u.setAttribute("visibility","hidden"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},_r=$e();const Ir=({openSelection:e,setOpenSelection:o,appLanguage:s,columnLabels:c,availableColumns:a,selectedColumns:i,setSelectedColumns:u})=>{const j=ue("(max-width:900px)"),w=ue("(max-width:600px)");return l.jsx(Ue,{open:e,onClose:()=>{o(!1)},children:l.jsxs(C,{sx:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",width:w?"80vw":j?"70vw":"60vw",maxWidth:"700px",bgcolor:"background.paper",boxShadow:24,borderRadius:"4px",p:4},children:[l.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-20px"},children:[l.jsx("h3",{children:s.selectFromList}),l.jsx(V,{onClick:()=>{o(!1)},children:l.jsx(Ke,{})})]}),l.jsx(be,{fullWidth:!0,children:l.jsx(lr,{multiple:!0,options:a,value:i,disableCloseOnSelect:!0,getOptionLabel:h=>c[h],onChange:(h,E)=>{u(E),h.stopPropagation()},renderInput:h=>l.jsx(cr,{...h}),renderTags:(h,E)=>h.map((v,y)=>{const{key:T,...F}=E({index:y});return l.jsx(ir,{variant:"outlined",label:c[v],...F},T)})})})]})})},Mr=({table:e,appId:o,metaData:s,bulkActions:c,tableStore:a,appLanguage:i,locale:u,refetch:j,componentWidth:w,aggregates:h})=>{p.debug(o,s,c);const E=tr(),v=a.table,y=a.columns;sr(o),We(o);const T=n=>{var r,t,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((t=s==null?void 0:s.columns[d])==null?void 0:t.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.data_type;return"varchar"},F=n=>{var r,t,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((t=s==null?void 0:s.columns[d])==null?void 0:t.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.column_type;return null},J=()=>P.map(n=>{const r={};for(let t=0;t<b.length;t++)r[N[b[t]]]=n[N[b[t]]];return r}),U=()=>{var n,r,t;return(n=s==null?void 0:s.src)!=null&&n.app_id?"ppBulkAction-"+s.src.app_id+"-"+s.src.cnt_id:(r=s==null?void 0:s.src)!=null&&r.dbs&&((t=s==null?void 0:s.src)!=null&&t.tbl)?"ppBulkAction-"+s.src.dbs+"-"+s.src.tbl:null};m.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdforientation");if(n!==null)return n}catch(n){p.debug(n)}return"landscape"}),m.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdfstyle");if(n!==null)return n}catch(n){p.debug(n)}return"striped"}),m.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-poweredBy");if(n!==null)return n==="true"}catch(n){p.debug(n)}return!0});let ee="csv";c.select!==void 0&&(ee="select");const[f,ve]=m.useState(ee),[ye,re]=m.useState(!1),we=m.useMemo(()=>_e(),[]),S=De(o),A=m.useMemo(()=>{const n={};return y.filter(r=>r.lookup!==void 0&&S!==void 0&&S[r.columnName]!==void 0).map(r=>{var t;if(S!==void 0&&S[r.columnName]!==void 0){const x=[];for(const d in S[r.columnName]){const L={key:d,value:Array.isArray(S[r.columnName][d])?S[r.columnName][d].join((t=r.lookup)==null?void 0:t.delimiter):S[r.columnName][d]};x.push(L)}n[r.columnName]=x}}),n},[S,y]);p.debug("lookupColumns",A);const B=m.useMemo(()=>{const n={};return y.filter(r=>r.computedField!==void 0).map(r=>{n[r.columnName]=r.computedField}),n},[y]);p.debug(B);const N=m.useMemo(()=>{const n={};return y.map(r=>{B[r.columnName]?n[r.columnName]=B[r.columnName].label:n[r.columnName]=r.columnLabel}),n},[B,y]);p.debug(N);const Se=(n,r)=>{if(A!==void 0&&A[n]!==void 0){const t=A[n].filter(x=>x.key===r);if(Array.isArray(t)&&t.length===1)return t[0].value}return r},Z=e.getAllColumns(),k=e.getSelectedRowModel().rows,R=m.useMemo(()=>Z.filter(n=>n.id!=="mrt-row-actions"&&n.id!=="mrt-row-select"&&n.id!=="mrt-row-expand").map(n=>n.id),[]);p.debug(R);const oe=m.useMemo(()=>R.map(n=>{const r=F(n);if(r===null)return 20;if(r.indexOf("(")!==-1){let t=r.substring(r.indexOf("(")+1);return t.indexOf(")")!==-1&&(t=t.substring(0,t.indexOf(")"))),t.indexOf(".")!==-1&&(t=t.substring(0,t.indexOf("."))),t.indexOf(",")!==-1&&(t=t.substring(0,t.indexOf(","))),Number(t)}return null}),[R]);p.debug(oe);const[te,Vr]=m.useState(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n+"-wrapped-columns");if(r!==null)return JSON.parse(r)}catch(r){p.debug(r)}return R.filter((r,t)=>(oe[t]??99)<=20)});p.debug(te);const se=m.useMemo(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n);if(r!==null)return JSON.parse(r)}catch(r){p.debug(r)}return R},[R]);p.debug(se);const[b,Ce]=m.useState(se);p.debug(b);const P=k.map(n=>{const r={};return Z.map(t=>{t.id!=="mrt-row-actions"&&t.id!=="mrt-row-select"&&t.id!=="mrt-row-expand"&&(A!==void 0&&A[t.id]!==void 0?r[N[t.id]]=Se(t.id,n.getValue(t.id)):B[t.id]||(r[N[t.id]]=n.getValue(t.id)))}),r});p.debug(P);const ne=k.map(n=>{const r={};return Z.map(t=>{t.id!=="mrt-row-actions"&&t.id!=="mrt-row-select"&&t.id!=="mrt-row-expand"&&B[t.id]===void 0&&(r[t.id]=n.getValue(t.id))}),r});p.debug(ne);const q=()=>{var n,r;return(s==null?void 0:s.src)===void 0?o:s.src.app_id&&((r=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:r.app_title)!==""?s.app.app[0].app_title:s.src.dbs?s.src.tbl:o},le=Y({filename:q(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),[Te,Jr]=m.useState(()=>{const n=U();if(n!==null)try{const r=localStorage.getItem(n+"-pdf-title");if(r!==null)return r}catch(r){p.debug(r)}return q()});p.debug("pdfTitle",Te);const ke=async()=>{},Re=()=>{const n=Br(le)(J());Pr(le)(n)},Oe=()=>{$(new Blob([JSON.stringify(J())],{type:"text/json;charset=utf-8"}),q()+".json")};m.useRef();const Ee=()=>{const n=k.map(t=>{const x={};for(let d=0;d<b.length;d++)t.original[b[d]]!==void 0&&(x[b[d]]=t.original[b[d]]??"");return{row:x}}),r=_r.toXML({table:n});$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".xml")},Fe=()=>{const n=He(o);p.debug(n);let r="insert into "+n.tbl+" (";for(const t in P[0])r+=t+",";r=r.slice(0,-1)+") values ";for(let t=0;t<P.length;t++){const x=P[t];r+="(";for(const d in x){const L=Ve(T(d));x[d]===null?r+="null,":L==="number"?r+=x[d]+",":r+="'"+x[d]+"',"}r=r.slice(0,-1),r+="),"}r=r.slice(0,-1)+";",$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".sql")},Ae=()=>{for(let n=0;n<P.length;n++){const r=Je(s,ne[n]);rr(o,r,t=>{if(t!=null&&t.code&&(t!=null&&t.message))switch(t.code){case"ok":K(i.deletedSuccessful,{variant:"success"}),j();break;default:p.error(t),K(t.message??i.invalidResponse,{variant:"error"})}else p.error(t),K(i.invalidResponse,{variant:"error"})},t=>{p.error("error",t),K(t??i.invalidResponse,{variant:"error"})})}e.setRowSelection({})},Be=()=>null,Ne=()=>null;m.useState(0),m.useState(0);const[Pe,ie]=m.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsx(Qe,{variant:"popover",popupId:we,children:n=>{var r;return l.jsxs(l.Fragment,{children:[w<900?l.jsx(G,{title:i.bulkActions,children:l.jsx(V,{...ce(n),children:l.jsx(de,{})})}):l.jsx(z,{variant:"contained",endIcon:l.jsx(de,{}),...ce(n),children:i.bulkActions}),a.state.relTab===!0&&l.jsx(z,{variant:"contained",startIcon:l.jsx(ze,{}),sx:{marginLeft:"10px"},onClick:()=>{E(Ie({appId:o,property:{isRelTabOpen:!1}}))},children:i.back}),l.jsx(dr,{...Ye(n),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:l.jsxs(C,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[v.clientSideProcessing===!0?l.jsxs(C,{sx:{textAlign:"center",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[k.length===0?l.jsx(pe,{sx:{textAlign:"center"},children:i.noRowsSelected}):l.jsx("span",{}),l.jsx(be,{children:l.jsx(O,{control:l.jsx(ur,{className:"pp-checkbox",checked:k.length>0,onChange:()=>{e.toggleAllRowsSelected()}}),label:l.jsx(C,{sx:{display:"flex",alignItems:"center"},children:i.selectAll})})})]}):l.jsx(l.Fragment,{children:k.length===0&&l.jsx(C,{sx:{textAlign:"center"},children:l.jsx(pe,{children:i.noRowsSelected})})}),l.jsxs(pr,{value:f,onChange:(t,x)=>{ve(x),t.stopPropagation()},children:[Be(),c.csv&&l.jsx(O,{value:"csv",label:i.exportToCsv,control:l.jsx(_,{})}),c.json&&l.jsx(O,{value:"json",label:i.exportToJson,control:l.jsx(_,{})}),Ne(),c.xml&&l.jsx(O,{value:"xml",label:i.exportToXml,control:l.jsx(_,{})}),c.sql&&!Me(o)&&l.jsx(O,{value:"sql",label:i.exportToSql,control:l.jsx(_,{})}),((r=s==null?void 0:s.privs)==null?void 0:r.delete)&&!qe(s)&&(c==null?void 0:c.delete)===!0&&v.transactions.delete&&l.jsx(O,{value:"delete",label:i.deletePermanently,control:l.jsx(_,{})}),(c.select??!1)&&l.jsx(O,{value:"select",label:i.addSelectedRow,control:l.jsx(_,{})})]}),l.jsxs(C,{sx:{display:"grid",gridTemplateColumns:f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"?"1fr auto":"1fr",gap:"10px"},children:[l.jsx(z,{variant:"contained",onClick:()=>{if(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"){const t=U();if(t!==null)try{localStorage.setItem(t,JSON.stringify(b)),localStorage.setItem(t+"-wrapped-columns",JSON.stringify(te))}catch(x){p.debug(x)}}switch(f){case"pdf":ke();break;case"csv":Re();break;case"json":Oe();break;case"excel":break;case"xml":Ee();break;case"sql":Fe();break;case"delete":re(!0);break}},disabled:k.length===0||(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&(b==null?void 0:b.length)===0,children:i.apply}),(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&l.jsx(G,{title:u.showHideColumns,children:l.jsx(V,{onClick:()=>{ie(!0)},children:l.jsx(Xe,{})})})]})]})})]})}}),l.jsx(or,{title:i.deleteRowsTitle,message:i.deleteRowsMessage,open:ye,setOpen:re,onConfirm:()=>{Ae()},theme:nr}),l.jsx(Ir,{openSelection:Pe,setOpenSelection:ie,appLanguage:i,columnLabels:N,availableColumns:R,selectedColumns:b,setSelectedColumns:Ce})]})},qr=m.lazy(()=>he(()=>import("./TableChart-1.0.31-Cx6IzCBU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url)),Hr=m.lazy(()=>he(()=>import("./TableToolbarInlineEditingButton-1.0.31-CQLD23Y_.js"),__vite__mapDeps([38,1,2,3,39,29,13,8,9,10,11,40,14,41,6,7,12,42,43,23,44,45,46,47,17,48,49,25,31,50,33,34,24,32,51,19,52,53,22,54,36,20,18,21,37,55,56,5,57,58,59,26,60,61,62,63,64,65,66,27,67,68,69,70,30,71,72,73,74,75,76,77,78,79,80,81,82,83,35,84]),import.meta.url)),ft=({table:e,metaData:o,appId:s,bulkActions:c,hasBulkActions:a,tableStore:i,appLanguage:u,locale:j,refetch:w,showForm:h,appSettings:E,componentWidth:v,aggregates:y})=>{var F;const T=i.table;return er(s),l.jsxs(C,{sx:{display:"flex",flexWrap:"nowrap",gap:v<600?"0":"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[l.jsx(G,{arrow:!0,title:u.refresh,className:"ppToolbarRefreshIcon",children:l.jsx(V,{onClick:()=>w(),children:l.jsx(Ge,{})})}),((F=T==null?void 0:T.transactions)==null?void 0:F.insert)&&l.jsx(l.Fragment,{children:v<900?l.jsx(G,{title:u.newRow,children:l.jsx(V,{onClick:()=>{h(null,me.INSERT)},children:l.jsx(Ze,{})})}):l.jsx(z,{variant:"contained",startIcon:l.jsx(Le,{}),onClick:()=>{h(null,me.INSERT)},children:u.newRow})}),a&&l.jsx(Mr,{table:e,appId:s,metaData:o,bulkActions:c,tableStore:i,appLanguage:u,locale:j,refetch:w,componentWidth:v,aggregates:y}),i.table.charts.enabled===!0&&l.jsx(m.Suspense,{fallback:l.jsx(ae,{}),children:l.jsx(qr,{appId:s,componentWidth:v,table:e,tableStore:i,metaData:o,appLanguage:u})}),i.table.inlineEditing.addColumnButton===!1&&i.columns.filter(J=>J.inlineEditing===!0).length>0&&l.jsx(m.Suspense,{fallback:l.jsx(ae,{}),children:l.jsx(Hr,{appId:s,metaData:o,locale:j,appLanguage:u,componentWidth:v,refetch:w})}),!1]})};export{ft as default};
