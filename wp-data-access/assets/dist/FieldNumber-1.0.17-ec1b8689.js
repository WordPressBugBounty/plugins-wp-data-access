import{bW as X,r as j,l as ve,cR as _e,S as Fe,e3 as Ce,i as je,j as Le,e2 as ke,e1 as Pe}from"./main-1.0.17.js";import{F as fe}from"./usePrepareStore-1.0.17-a8be8b2f.js";import{T as Ke}from"./TargetEnum-1.0.17-1e1ba2c5.js";import"./main-1.0.17-54ffa424.js";import"./iconBase-1.0.17-8d991e6c.js";import"./Select-1.0.17-745624d0.js";import"./Menu-1.0.17-09126381.js";import"./createSvgIcon-1.0.17-f0c1dc0a.js";import"./Close-1.0.17-6c546366.js";function pe(e,r){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,n=Object.getOwnPropertySymbols(e);t<n.length;t++)r.indexOf(n[t])<0&&Object.prototype.propertyIsEnumerable.call(e,n[t])&&(a[n[t]]=e[n[t]]);return a}var re;(function(e){e.event="event",e.props="prop"})(re||(re={}));function Z(){}function We(e){var r,a=void 0;return function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return r&&n.length===r.length&&n.every(function(i,f){return i===r[f]})||(r=n,a=e.apply(void 0,n)),a}}function te(e){return!!(e||"").match(/\d/)}function Y(e){return e==null}function Ue(e){return typeof e=="number"&&isNaN(e)}function Se(e){return Y(e)||Ue(e)||typeof e=="number"&&!isFinite(e)}function xe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function $e(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Me(e,r,a){var n=$e(a),t=e.search(/[1-9]/);return t=t===-1?e.length:t,e.substring(0,t)+e.substring(t,e.length).replace(n,"$1"+r)}function Ge(e){var r=j.useRef(e);r.current=e;var a=j.useRef(function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return r.current.apply(r,n)});return a.current}function se(e,r){r===void 0&&(r=!0);var a=e[0]==="-",n=a&&r;e=e.replace("-","");var t=e.split("."),i=t[0],f=t[1]||"";return{beforeDecimal:i,afterDecimal:f,hasNegation:a,addNegation:n}}function ze(e){if(!e)return e;var r=e[0]==="-";r&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",t=a[1]||"";return(r?"-":"")+n+(t?"."+t:"")}function be(e,r,a){for(var n="",t=a?"0":"",i=0;i<=r-1;i++)n+=e[i]||t;return n}function de(e,r){return Array(r+1).join(e)}function ye(e){var r=e+"",a=r[0]==="-"?"-":"";a&&(r=r.substring(1));var n=r.split(/[eE]/g),t=n[0],i=n[1];if(i=Number(i),!i)return a+t;t=t.replace(".","");var f=1+i,m=t.length;return f<0?t="0."+de("0",Math.abs(f))+t:f>=m?t=t+de("0",f-m):t=(t.substring(0,f)||"0")+"."+t.substring(f),a+t}function ge(e,r,a){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||a)&&r,t=se(e),i=t.beforeDecimal,f=t.afterDecimal,m=t.hasNegation,b=parseFloat("0."+(f||"0")),h=f.length<=r?"0."+f:b.toFixed(r),p=h.split("."),g=i;i&&Number(p[0])&&(g=i.split("").reverse().reduce(function(w,E,s){return w.length>s?(Number(w[0])+Number(E)).toString()+w.substring(1,w.length):E+w},p[0]));var S=be(p[1]||"",r,a),x=m?"-":"",l=n?".":"";return""+x+g+l+S}function H(e,r){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",r),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(r,r),!0):(e.focus(),!1)}}var Ne=We(function(e,r){for(var a=0,n=0,t=e.length,i=r.length;e[a]===r[a]&&a<t;)a++;for(;e[t-1-n]===r[i-1-n]&&i-n>a&&t-n>a;)n++;return{from:{start:a,end:t-n},to:{start:a,end:i-n}}}),Ze=function(e,r){var a=Math.min(e.selectionStart,r);return{from:{start:a,end:e.selectionEnd},to:{start:a,end:r}}};function qe(e,r,a){return Math.min(Math.max(e,r),a)}function le(e){return Math.max(e.selectionStart,e.selectionEnd)}function He(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Je(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Qe(e){var r=e.currentValue,a=e.formattedValue,n=e.currentValueIndex,t=e.formattedValueIndex;return r[n]===a[t]}function Xe(e,r,a,n,t,i,f){f===void 0&&(f=Qe);var m=t.findIndex(function(F){return F}),b=e.slice(0,m);!r&&!a.startsWith(b)&&(r=b,a=b+a,n=n+b.length);for(var h=a.length,p=e.length,g={},S=new Array(h),x=0;x<h;x++){S[x]=-1;for(var l=0,w=p;l<w;l++){var E=f({currentValue:a,lastValue:r,formattedValue:e,currentValueIndex:x,formattedValueIndex:l});if(E&&g[l]!==!0){S[x]=l,g[l]=!0;break}}}for(var s=n;s<h&&(S[s]===-1||!i(a[s]));)s++;var T=s===h||S[s]===-1?p:S[s];for(s=n-1;s>0&&S[s]===-1;)s--;var _=s===-1||S[s]===-1?0:S[s]+1;return _>T?T:n-_<T-n?_:T}function me(e,r,a,n){var t=e.length;if(r=qe(r,0,t),n==="left"){for(;r>=0&&!a[r];)r--;r===-1&&(r=a.indexOf(!0))}else{for(;r<=t&&!a[r];)r++;r>t&&(r=a.lastIndexOf(!0))}return r===-1&&(r=t),r}function Ye(e){for(var r=Array.from({length:e.length+1}).map(function(){return!0}),a=0,n=r.length;a<n;a++)r[a]=!!(te(e[a])||te(e[a-1]));return r}function we(e,r,a,n,t,i){i===void 0&&(i=Z);var f=Ge(function(l,w){var E,s;return Se(l)?(s="",E=""):typeof l=="number"||w?(s=typeof l=="number"?ye(l):l,E=n(s)):(s=t(l,void 0),E=n(s)),{formattedValue:E,numAsString:s}}),m=j.useState(function(){return f(Y(e)?r:e,a)}),b=m[0],h=m[1],p=function(l,w){l.formattedValue!==b.formattedValue&&h({formattedValue:l.formattedValue,numAsString:l.value}),i(l,w)},g=e,S=a;Y(e)&&(g=b.numAsString,S=!0);var x=f(g,S);return j.useMemo(function(){h(x)},[x.formattedValue]),[b,p]}function er(e){return e.replace(/[^0-9]/g,"")}function rr(e){return e}function tr(e){var r=e.type;r===void 0&&(r="text");var a=e.displayType;a===void 0&&(a="input");var n=e.customInput,t=e.renderText,i=e.getInputRef,f=e.format;f===void 0&&(f=rr);var m=e.removeFormatting;m===void 0&&(m=er);var b=e.defaultValue,h=e.valueIsNumericString,p=e.onValueChange,g=e.isAllowed,S=e.onChange;S===void 0&&(S=Z);var x=e.onKeyDown;x===void 0&&(x=Z);var l=e.onMouseUp;l===void 0&&(l=Z);var w=e.onFocus;w===void 0&&(w=Z);var E=e.onBlur;E===void 0&&(E=Z);var s=e.value,T=e.getCaretBoundary;T===void 0&&(T=Ye);var _=e.isValidInputCharacter;_===void 0&&(_=te);var F=e.isCharacterSame,L=pe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),q=we(s,b,!!h,f,m,p),K=q[0],N=K.formattedValue,k=K.numAsString,U=q[1],P=j.useRef(),$=j.useRef({formattedValue:N,numAsString:k}),M=function(o,u){$.current={formattedValue:o.formattedValue,numAsString:o.value},U(o,u)},J=j.useState(!1),ee=J[0],d=J[1],c=j.useRef(null),V=j.useRef({setCaretTimeout:null,focusTimeout:null});j.useEffect(function(){return d(!0),function(){clearTimeout(V.current.setCaretTimeout),clearTimeout(V.current.focusTimeout)}},[]);var R=f,B=function(o,u){var v=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(v)?void 0:v}},A=function(o,u,v){o.selectionStart===0&&o.selectionEnd===o.value.length||(H(o,u),V.current.setCaretTimeout=setTimeout(function(){o.value===v&&o.selectionStart!==u&&H(o,u)},0))},O=function(o,u,v){return me(o,u,T(o),v)},Q=function(o,u,v){var I=T(u),C=Xe(u,N,o,v,I,_,F);return C=me(u,C,I),C},ie=function(o){var u=o.formattedValue;u===void 0&&(u="");var v=o.input,I=o.source,C=o.event,D=o.numAsString,y;if(v){var W=o.inputValue||v.value,G=le(v);v.value=u,y=Q(W,u,G),y!==void 0&&A(v,y,u)}u!==N&&M(B(u,D),{event:C,source:I})};j.useEffect(function(){var o=$.current,u=o.formattedValue,v=o.numAsString;(N!==u||k!==v)&&M(B(N,k),{event:void 0,source:re.props})},[N,k]);var ae=c.current?le(c.current):void 0,Ve=typeof window<"u"?j.useLayoutEffect:j.useEffect;Ve(function(){var o=c.current;if(N!==$.current.formattedValue&&o){var u=Q($.current.formattedValue,N,ae);o.value=N,A(o,u,N)}},[N]);var Ie=function(o,u,v){var I=u.target,C=P.current?Ze(P.current,I.selectionEnd):Ne(N,o),D=Object.assign(Object.assign({},C),{lastValue:N}),y=m(o,D),W=R(y);if(y=m(W,void 0),g&&!g(B(W,y))){var G=u.target,z=le(G),ue=Q(o,N,z);return G.value=N,A(G,ue,N),!1}return ie({formattedValue:W,numAsString:y,inputValue:o,event:u,source:v,input:u.target}),!0},oe=function(o,u){u===void 0&&(u=0);var v=o.selectionStart,I=o.selectionEnd;P.current={selectionStart:v,selectionEnd:I+u}},De=function(o){var u=o.target,v=u.value,I=Ie(v,o,re.event);I&&S(o),P.current=void 0},Ee=function(o){var u=o.target,v=o.key,I=u.selectionStart,C=u.selectionEnd,D=u.value;D===void 0&&(D="");var y;v==="ArrowLeft"||v==="Backspace"?y=Math.max(I-1,0):v==="ArrowRight"?y=Math.min(I+1,D.length):v==="Delete"&&(y=I);var W=0;v==="Delete"&&I===C&&(W=1);var G=v==="ArrowLeft"||v==="ArrowRight";if(y===void 0||I!==C&&!G){x(o),oe(u,W);return}var z=y;if(G){var ue=v==="ArrowLeft"?"left":"right";z=O(D,y,ue),z!==y&&o.preventDefault()}else v==="Delete"&&!_(D[y])?z=O(D,y,"right"):v==="Backspace"&&!_(D[y])&&(z=O(D,y,"left"));z!==y&&A(u,z,D),x(o),oe(u,W)},Ae=function(o){var u=o.target,v=function(){var I=u.selectionStart,C=u.selectionEnd,D=u.value;if(D===void 0&&(D=""),I===C){var y=O(D,I);y!==I&&A(u,y,D)}};v(),requestAnimationFrame(function(){v()}),l(o),oe(u)},Re=function(o){o.persist&&o.persist();var u=o.target,v=o.currentTarget;c.current=u,V.current.focusTimeout=setTimeout(function(){var I=u.selectionStart,C=u.selectionEnd,D=u.value;D===void 0&&(D="");var y=O(D,I);y!==I&&!(I===0&&C===D.length)&&A(u,y,D),w(Object.assign(Object.assign({},o),{currentTarget:v}))},0)},Te=function(o){c.current=null,clearTimeout(V.current.focusTimeout),clearTimeout(V.current.setCaretTimeout),E(o)},Be=ee&&He()?"numeric":void 0,ce=Object.assign({inputMode:Be},L,{type:r,value:N,onChange:De,onKeyDown:Ee,onMouseUp:Ae,onFocus:Re,onBlur:Te});if(a==="text")return t?X.createElement(X.Fragment,null,t(N,L)||null):X.createElement("span",Object.assign({},L,{ref:i}),N);if(n){var Oe=n;return X.createElement(Oe,Object.assign({},ce,{ref:i}))}return X.createElement("input",Object.assign({},ce,{ref:i}))}function he(e,r){var a=r.decimalScale,n=r.fixedDecimalScale,t=r.prefix;t===void 0&&(t="");var i=r.suffix;i===void 0&&(i="");var f=r.allowNegative,m=r.thousandsGroupStyle;if(m===void 0&&(m="thousand"),e===""||e==="-")return e;var b=ne(r),h=b.thousandSeparator,p=b.decimalSeparator,g=a!==0&&e.indexOf(".")!==-1||a&&n,S=se(e,f),x=S.beforeDecimal,l=S.afterDecimal,w=S.addNegation;return a!==void 0&&(l=be(l,a,!!n)),h&&(x=Me(x,h,m)),t&&(x=t+x),i&&(l=l+i),w&&(x="-"+x),e=x+(g&&p||"")+l,e}function ne(e){var r=e.decimalSeparator;r===void 0&&(r=".");var a=e.thousandSeparator,n=e.allowedDecimalSeparators;return a===!0&&(a=","),n||(n=[r,"."]),{decimalSeparator:r,thousandSeparator:a,allowedDecimalSeparators:n}}function ar(e,r){e===void 0&&(e="");var a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),t=a.test(e),i=n.test(e);return e=e.replace(/-/g,""),t&&!i&&r&&(e="-"+e),e}function nr(e,r){return new RegExp("(^-)|[0-9]|"+xe(e),r?"g":void 0)}function ir(e,r,a){return e===""?!0:!(r!=null&&r.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function or(e,r,a){var n;r===void 0&&(r=Je(e));var t=a.allowNegative,i=a.prefix;i===void 0&&(i="");var f=a.suffix;f===void 0&&(f="");var m=a.decimalScale,b=r.from,h=r.to,p=h.start,g=h.end,S=ne(a),x=S.allowedDecimalSeparators,l=S.decimalSeparator,w=e[g]===l;if(te(e)&&(e===i||e===f)&&r.lastValue==="")return e;if(g-p===1&&x.indexOf(e[p])!==-1){var E=m===0?"":l;e=e.substring(0,p)+E+e.substring(p+1,e.length)}var s=function(c,V,R){var B=!1,A=!1;i.startsWith("-")?B=!1:c.startsWith("--")?(B=!1,A=!0):f.startsWith("-")&&c.length===f.length?B=!1:c[0]==="-"&&(B=!0);var O=B?1:0;return A&&(O=2),O&&(c=c.substring(O),V-=O,R-=O),{value:c,start:V,end:R,hasNegation:B}},T=s(e,p,g),_=T.hasNegation;n=T,e=n.value,p=n.start,g=n.end;var F=s(r.lastValue,b.start,b.end),L=F.start,q=F.end,K=F.value,N=e.substring(p,g);e.length&&K.length&&(L>K.length-f.length||q<i.length)&&!(N&&f.startsWith(N))&&(e=K);var k=0;e.startsWith(i)?k+=i.length:p<i.length&&(k=p),e=e.substring(k),g-=k;var U=e.length,P=e.length-f.length;e.endsWith(f)?U=P:(g>P||g>e.length-f.length)&&(U=g),e=e.substring(0,U),e=ar(_?"-"+e:e,t),e=(e.match(nr(l,!0))||[]).join("");var $=e.indexOf(l);e=e.replace(new RegExp(xe(l),"g"),function(c,V){return V===$?".":""});var M=se(e,t),J=M.beforeDecimal,ee=M.afterDecimal,d=M.addNegation;return h.end-h.start<b.end-b.start&&J===""&&w&&!parseFloat(ee)&&(e=d?"-":""),e}function ur(e,r){var a=r.prefix;a===void 0&&(a="");var n=r.suffix;n===void 0&&(n="");var t=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";t.fill(!1,0,a.length+(i?1:0));var f=e.length;return t.fill(!1,f-n.length+1,f+1),t}function fr(e){var r=ne(e),a=r.thousandSeparator,n=r.decimalSeparator,t=e.prefix;t===void 0&&(t="");var i=e.allowNegative;if(i===void 0&&(i=!0),a===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+a+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return t.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+t+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function lr(e){e=fr(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var r=e.suffix,a=e.allowNegative,n=e.allowLeadingZeros,t=e.onKeyDown;t===void 0&&(t=Z);var i=e.onBlur;i===void 0&&(i=Z);var f=e.thousandSeparator,m=e.decimalScale,b=e.fixedDecimalScale,h=e.prefix;h===void 0&&(h="");var p=e.defaultValue,g=e.value,S=e.valueIsNumericString,x=e.onValueChange,l=pe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),w=ne(e),E=w.decimalSeparator,s=w.allowedDecimalSeparators,T=function(d){return he(d,e)},_=function(d,c){return or(d,c,e)},F=Y(g)?p:g,L=S??ir(F,h,r);Y(g)?Y(p)||(L=L||typeof p=="number"):L=L||typeof g=="number";var q=function(d){return Se(d)?d:(typeof d=="number"&&(d=ye(d)),L&&typeof m=="number"?ge(d,m,!!b):d)},K=we(q(g),q(p),!!L,T,_,x),N=K[0],k=N.numAsString,U=N.formattedValue,P=K[1],$=function(d){var c=d.target,V=d.key,R=c.selectionStart,B=c.selectionEnd,A=c.value;if(A===void 0&&(A=""),(V==="Backspace"||V==="Delete")&&B<h.length){d.preventDefault();return}if(R!==B){t(d);return}V==="Backspace"&&A[0]==="-"&&R===h.length+1&&a&&H(c,1),m&&b&&(V==="Backspace"&&A[R-1]===E?(H(c,R-1),d.preventDefault()):V==="Delete"&&A[R]===E&&d.preventDefault()),s!=null&&s.includes(V)&&A[R]===E&&H(c,R+1);var O=f===!0?",":f;V==="Backspace"&&A[R-1]===O&&H(c,R-1),V==="Delete"&&A[R]===O&&H(c,R+1),t(d)},M=function(d){var c=k;if(c.match(/\d/g)||(c=""),n||(c=ze(c)),b&&m&&(c=ge(c,m,b)),c!==k){var V=he(c,e);P({formattedValue:V,value:c,floatValue:parseFloat(c)},{event:d,source:re.event})}i(d)},J=function(d){return d===E?!0:te(d)},ee=function(d){var c=d.currentValue,V=d.lastValue,R=d.formattedValue,B=d.currentValueIndex,A=d.formattedValueIndex,O=c[B],Q=R[A],ie=Ne(V,c),ae=ie.to;return B>=ae.start&&B<ae.end&&s&&s.includes(O)&&Q===E?!0:O===Q};return Object.assign(Object.assign({},l),{value:U,valueIsNumericString:!1,isValidInputCharacter:J,isCharacterSame:ee,onValueChange:P,format:T,removeFormatting:_,getCaretBoundary:function(d){return ur(d,e)},onKeyDown:$,onBlur:M})}function sr(e){var r=lr(e);return X.createElement(tr,Object.assign({},r))}const br=({appId:e,columnName:r,columnValue:a,columnMetaData:n,storeColumn:t,columnValidation:i,onColumnChange:f,metaData:m,storeForm:b,formMode:h,locale:p,language:g})=>{ve.debug(e,r,a,n,t,i,m,b,h,p,g);const S=_e(Fe.getState(),e,r);ve.debug("column",S);const x=parseInt(n.numeric_precision),l=parseInt(n.numeric_scale),w=n.column_type.includes("unsigned"),E={className:t.classNames,readOnly:h===fe.VIEW||h===fe.UPDATE&&m.primary_key.includes(r)||h===fe.INSERT&&n.extra==="auto_increment"},s=Ce((g==null?void 0:g.code)??je.defaultLanguage.code),T=i!=null&&i.error?i==null?void 0:i.text:p.enterNumber+(w?" unsigned":"")+" ("+x.toString()+","+l.toString()+")",_=t.localize?((t==null?void 0:t.prefix)??"")+`9${s.thousandSeperator}999${s.decimalSeperator}99`+((t==null?void 0:t.suffix)??""):"";return Le.jsx(sr,{customInput:Ke,error:i==null?void 0:i.error,label:n.formLabel,thousandSeparator:t.localize?s.thousandSeperator:void 0,decimalSeparator:t.localize?s.decimalSeperator:void 0,decimalScale:l,value:a??"",required:n.is_nullable==="NO",inputProps:E,helperText:ke(t,T),variant:Pe(),onValueChange:({value:F})=>{F===""&&n.is_nullable!=="NO"?f(r,null):f(r,F)},onInvalid:F=>{F.preventDefault()},prefix:(t==null?void 0:t.prefix)??"",suffix:(t==null?void 0:t.suffix)??"",sx:{"& input":{textAlign:t.alignment}},placeholder:_})};export{br as default};
