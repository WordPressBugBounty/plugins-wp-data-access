import{l as r,r as s,_ as m,bO as J,S as a,d0 as y,ai as Q,P as Z,j as e,A as D,d7 as $,s as I,dl as ee,dm as te,dn as oe,e as c,C as h,dp as se}from"./main-1.0.23.js";import{u as P,a as re}from"./RestApi-1.0.23-cc179eb9.js";import{A as z}from"./AdminTheme-1.0.23-7044caf5.js";import{d as ie}from"./ActionsSettings-1.0.23-a601e9bf.js";import{S as ne}from"./ScopeEnum-1.0.23-7caf102d.js";import{T as x,C as ae}from"./ConfirmDialog-1.0.23-f318040f.js";import{A as le,T as ce,M as me}from"./index.esm-1.0.23-ba0465a2.js";import{B as ue,a as de,T as pe,b as ge,c as f}from"./TabPanel-1.0.23-ecd53346.js";import{u as he}from"./useFormStore-1.0.23-90f12904.js";import{S as u,B as xe}from"./Spinner-1.0.23-90ab83ff.js";import{D as fe}from"./useTheme-1.0.23-55aea9bb.js";/* empty css                        */import{T as B}from"./TargetEnum-1.0.23-b82380d5.js";import{T as Se}from"./Typography-1.0.23-19a0fd3e.js";import{I as S}from"./iconBase-1.0.23-43ac6f06.js";import{C as L,a as O,B as b}from"./CardContent-1.0.23-cd3f2c87.js";import{T as j}from"./Tabs-1.0.23-d047285a.js";import"./DialogContent-1.0.23-79893b13.js";import"./Modal-1.0.23-3fe42627.js";import"./colorManipulator-1.0.23-e382be1d.js";import"./ThemeProvider-1.0.23-f3e5cbc1.js";import"./createSvgIcon-1.0.23-f9410a01.js";const be=()=>{const t=P(n=>n.ui.formSettings.hideThemeSettings);return r.debug("hideThemeSetting",t),t},je=s.lazy(()=>m(()=>import("./SettingsColumns-1.0.23-71fe8c57.js"),["./SettingsColumns-1.0.23-71fe8c57.js","./main-1.0.23.js","./RestApi-1.0.23-cc179eb9.js","./useMetadataColumns-1.0.23-85b79404.js","./index.esm-1.0.23-ba0465a2.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./useTheme-1.0.23-55aea9bb.js","./colorManipulator-1.0.23-e382be1d.js","./useStoreTable-1.0.23-508477d7.js","./useFormStore-1.0.23-90f12904.js","./Spinner-1.0.23-90ab83ff.js","./CardContent-1.0.23-cd3f2c87.js","./AdminTheme-1.0.23-7044caf5.js","./index.esm-1.0.23-9200891c.js","./ActionsDml-1.0.23-e3901c9d.js","./index.esm-1.0.23-da98f1a9.js","./TextField-1.0.23-1657e9d4.js","./FormHelperText-1.0.23-83597bdf.js","./useFormControl-1.0.23-a0ae6ce7.js","./FormLabel-1.0.23-71a056b2.js","./Menu-1.0.23-e889464a.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popover-1.0.23-6c9c65a6.js","./Modal-1.0.23-3fe42627.js","./Grow-1.0.23-40b2ff68.js","./useControlled-1.0.23-1e71c28b.js","./createSvgIcon-1.0.23-f9410a01.js","./MenuItem-1.0.23-0a5da249.js","./index-1.0.23-fea3ac27.js","./useTableUpdater-1.0.23-f1f702eb.js","./Stepper-1.0.23-3d0d410f.js","./StepContent-1.0.23-0707671d.js","./Collapse-1.0.23-a92fc278.js","./FormControlLabel-1.0.23-1ad68af6.js","./createStyled-1.0.23-528f26c2.js","./Checkbox-1.0.23-e63c68aa.js","./SwitchBase-1.0.23-adccc77c.js","./ConfirmDialog-1.0.23-f318040f.js","./DialogContent-1.0.23-79893b13.js","./ConfirmDialog-1.0.23-9bff3a93.css","./Link-1.0.23-48d9bdb4.js","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./AccordionDetails-1.0.23-ad785ba6.js","./Switch-1.0.23-86b06b05.js","./useFormUpdates-1.0.23-2bcf2490.js","./PremiumFeature-1.0.23-8dd1a29b.js","./EnumTypeEnum-1.0.23-7ffcf33a.js","./Slider-1.0.23-75ca4c04.js","./RadioGroup-1.0.23-053476ee.js","./Radio-1.0.23-7006053b.js"],import.meta.url)),Te=s.lazy(()=>m(()=>import("./ResizableDrawer-1.0.23-5dc28853.js"),["./ResizableDrawer-1.0.23-5dc28853.js","./main-1.0.23.js","./RestApi-1.0.23-cc179eb9.js","./useScreenSize-1.0.23-b1e8b94a.js","./Typography-1.0.23-19a0fd3e.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./index.esm-1.0.23-ba0465a2.js","./iconBase-1.0.23-43ac6f06.js","./Modal-1.0.23-3fe42627.js"],import.meta.url)),_e=s.lazy(()=>m(()=>import("./SettingsForm-1.0.23-cea49531.js"),["./SettingsForm-1.0.23-cea49531.js","./main-1.0.23.js","./RestApi-1.0.23-cc179eb9.js","./useFormUpdates-1.0.23-2bcf2490.js","./PremiumFeature-1.0.23-8dd1a29b.js","./index.esm-1.0.23-da98f1a9.js","./iconBase-1.0.23-43ac6f06.js","./Typography-1.0.23-19a0fd3e.js","./AdminTheme-1.0.23-7044caf5.js","./FormLabel-1.0.23-71a056b2.js","./useFormControl-1.0.23-a0ae6ce7.js","./index.esm-1.0.23-ba0465a2.js","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./useControlled-1.0.23-1e71c28b.js","./Collapse-1.0.23-a92fc278.js","./AccordionDetails-1.0.23-ad785ba6.js","./FormHelperText-1.0.23-83597bdf.js","./RadioGroup-1.0.23-053476ee.js","./Radio-1.0.23-7006053b.js","./SwitchBase-1.0.23-adccc77c.js","./createSvgIcon-1.0.23-f9410a01.js","./Modal-1.0.23-3fe42627.js","./FormControlLabel-1.0.23-1ad68af6.js","./createStyled-1.0.23-528f26c2.js","./Switch-1.0.23-86b06b05.js","./CssUnitTextField-1.0.23-f591a83d.js","./TextField-1.0.23-1657e9d4.js","./Menu-1.0.23-e889464a.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popover-1.0.23-6c9c65a6.js","./Grow-1.0.23-40b2ff68.js","./Spinner-1.0.23-90ab83ff.js","./CardContent-1.0.23-cd3f2c87.js","./Link-1.0.23-48d9bdb4.js","./useTheme-1.0.23-55aea9bb.js","./colorManipulator-1.0.23-e382be1d.js","./SettingsFormRelationships-1.0.23-07f5e36e.js","./ComponentColumn-1.0.23-13c86662.js","./ActionsExplorer-1.0.23-02905de3.js","./Autocomplete-1.0.23-a5bc1209.js","./Close-1.0.23-ea28bfa6.js","./Popper-1.0.23-4a0d0616.js","./ActionsApp-1.0.23-18ccdb55.js","./Checkbox-1.0.23-e63c68aa.js","./Tooltip-1.0.23-1b58a848.js","./MenuItem-1.0.23-0a5da249.js","./FallbackSpinner-1.0.23-96931408.js","./ToggleButtonGroup-1.0.23-fd9018f0.js","./Stepper-1.0.23-3d0d410f.js","./StepContent-1.0.23-0707671d.js","./ConfirmDialog-1.0.23-f318040f.js","./DialogContent-1.0.23-79893b13.js","./ConfirmDialog-1.0.23-9bff3a93.css","./index-1.0.23-fea3ac27.js"],import.meta.url)),ve=s.lazy(()=>m(()=>import("./ThemeSettings-1.0.23-4f2d34eb.js"),["./ThemeSettings-1.0.23-4f2d34eb.js","./main-1.0.23.js","./RestApi-1.0.23-cc179eb9.js","./useTheme-1.0.23-55aea9bb.js","./colorManipulator-1.0.23-e382be1d.js","./Typography-1.0.23-19a0fd3e.js","./iconBase-1.0.23-43ac6f06.js","./PremiumFeature-1.0.23-8dd1a29b.js","./index.esm-1.0.23-da98f1a9.js","./AdminTheme-1.0.23-7044caf5.js","./FormLabel-1.0.23-71a056b2.js","./useFormControl-1.0.23-a0ae6ce7.js","./index.esm-1.0.23-ba0465a2.js","./index-1.0.23-8345d9bc.js","./Spinner-1.0.23-90ab83ff.js","./FormHelperText-1.0.23-83597bdf.js","./Switch-1.0.23-86b06b05.js","./SwitchBase-1.0.23-adccc77c.js","./useControlled-1.0.23-1e71c28b.js","./index-1.0.23-9af490ae.js","./FormControlLabel-1.0.23-1ad68af6.js","./createStyled-1.0.23-528f26c2.js","./Slider-1.0.23-75ca4c04.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Link-1.0.23-48d9bdb4.js","./RadioGroup-1.0.23-053476ee.js","./Radio-1.0.23-7006053b.js","./createSvgIcon-1.0.23-f9410a01.js","./Modal-1.0.23-3fe42627.js","./CssUnitTextField-1.0.23-f591a83d.js","./TextField-1.0.23-1657e9d4.js","./Menu-1.0.23-e889464a.js","./Popover-1.0.23-6c9c65a6.js","./Grow-1.0.23-40b2ff68.js","./CardContent-1.0.23-cd3f2c87.js","./AccordionSummary-1.0.23-078f8091.js","./useSlot-1.0.23-b9d48820.js","./Collapse-1.0.23-a92fc278.js","./AccordionDetails-1.0.23-ad785ba6.js"],import.meta.url));s.lazy(()=>m(()=>import("./SettingsFormCode-1.0.23-5cc8c343.js"),["./SettingsFormCode-1.0.23-5cc8c343.js","./main-1.0.23.js","./index-1.0.23-5dd7ecd9.js","./DialogContent-1.0.23-79893b13.js","./Typography-1.0.23-19a0fd3e.js","./index.esm-1.0.23-ba0465a2.js","./iconBase-1.0.23-43ac6f06.js","./Modal-1.0.23-3fe42627.js","./ConfirmDialog-1.0.23-f318040f.js","./AdminTheme-1.0.23-7044caf5.js","./CardContent-1.0.23-cd3f2c87.js","./ConfirmDialog-1.0.23-9bff3a93.css","./index.esm-1.0.23-5dc3dbfa.js","./TreeItem2-1.0.23-7391dfe1.js","./createStyled-1.0.23-528f26c2.js","./TreeItem2Provider-1.0.23-9f893bc1.js","./createSvgIcon-1.0.23-f9410a01.js","./Collapse-1.0.23-a92fc278.js","./colorManipulator-1.0.23-e382be1d.js","./RestApi-1.0.23-cc179eb9.js","./Tooltip-1.0.23-1b58a848.js","./ThemeProvider-1.0.23-f3e5cbc1.js","./Popper-1.0.23-4a0d0616.js","./useControlled-1.0.23-1e71c28b.js","./Grow-1.0.23-40b2ff68.js","./Spinner-1.0.23-90ab83ff.js","./PremiumFeature-1.0.23-8dd1a29b.js","./index.esm-1.0.23-da98f1a9.js","./FormLabel-1.0.23-71a056b2.js","./useFormControl-1.0.23-a0ae6ce7.js","./ThemeContainer-1.0.23-10b65460.js","./useTheme-1.0.23-55aea9bb.js","./FallbackSpinner-1.0.23-96931408.js","./FormContainer-1.0.23-d69e9502.js","./ActionsDml-1.0.23-e3901c9d.js","./useScreenSize-1.0.23-b1e8b94a.js","./useStoreTable-1.0.23-508477d7.js","./purify.es-1.0.23-68816782.js","./dayjs.min-1.0.23-c3dddbc3.js","./CardActions-1.0.23-6c452d3f.js","./FormContainer-1.0.23-5da27d24.css","./AccordionSummary-1.0.23-078f8091.js","./index-1.0.23-9af490ae.js","./useSlot-1.0.23-b9d48820.js","./Popover-1.0.23-6c9c65a6.js"],import.meta.url));const Xe=({appId:t})=>{var E,R;r.debug(t);const n=re(),T=be(),[w]=s.useState(J(a.getState(),t));r.debug(w);const[d,N]=s.useState(y(a.getState(),t));r.debug(d);const M=he(t),[V,Ce]=s.useState(Q(a.getState(),t));r.debug(V);const _=()=>oe(a.getState(),t),p=i=>{n($({appId:t,isUpdated:i}))},[U,v]=s.useState(!1),W=((E=z)==null?void 0:E.palette.mode)===Z.LIGHT?(R=z)==null?void 0:R.palette.primary.main:"",C=i=>{n(I({anchor:i}))},k=()=>{d!==void 0&&n(ee({appId:t,formState:d}))},l=()=>{n(te({})),p(!1)},g=()=>{_()?v(!0):(k(),l())},F=()=>{{const i=a.getState().ui.formSettings;ie(t,ne.GLOBAL,i.isRelationTable===!0?B.RFORM:B.FORM,o=>{if(r.debug(o),o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":N(y(a.getState(),t)),c(o.message,{variant:"success"}),M.columns.map((X,Y)=>{X.lookup!==void 0&&n(se({appId:t,index:Y}))});break;case"info":c(o.message,{variant:"info"});break;default:r.error(o),c(o.message??h.contactSupport,{variant:"error"})}else r.error(o),c(h.contactSupport,{variant:"error"})},o=>{r.error("error",o),c(o??h.contactSupport,{variant:"error"})}),p(!1)}},G=()=>{_()?(F(),setTimeout(()=>{l()},1e3)):l()},[H,K]=s.useState("1"),q=(i,o)=>{K(o)},A=P(i=>i.ui.formSettings.isOpen&&i.ui.formSettings.appId===t);return r.debug(t,A),A!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsxs(Te,{closeDrawer:g,children:[e.jsx(le,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(ce,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(Se,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Form Builder"}),e.jsx(x,{title:"Dock to left",position:"bottom",children:e.jsx(S,{onClick:()=>{C(D.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(ue,{})})}),e.jsx(x,{title:"Dock to right",position:"bottom",children:e.jsx(S,{onClick:()=>{C(D.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(de,{})})}),e.jsx(x,{title:"Close",position:"bottom",children:e.jsx(S,{onClick:g,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(me,{})})})]})}),e.jsx(L,{className:"pp-settings-container",children:e.jsx(O,{sx:{padding:0,margin:0},children:e.jsxs(pe,{value:H,children:[e.jsxs(ge,{variant:"fullWidth",textColor:"primary",onChange:q,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(j,{label:"Form",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(j,{label:"Columns",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),!1,T!==!0&&e.jsx(j,{label:"Theme",value:"4",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(xe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(f,{value:"1",children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(_e,{appId:t})})}),e.jsx(f,{value:"2",className:"pp-column-settings-container",children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(je,{appId:t})})}),!1,T!==!0&&e.jsx(f,{value:"4",children:e.jsx(s.Suspense,{fallback:e.jsx(u,{}),children:e.jsx(ve,{appId:t,source:fe.FORM,setIsUpdated:p})})})]})]})})}),e.jsx(L,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:W},children:e.jsxs(O,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(b,{variant:"outlined",className:"footer_action_button_apply",onClick:F,children:"Apply"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:G,children:"OK"}),e.jsx(b,{variant:"outlined",className:"footer_action_button",onClick:g,children:"Cancel"})]})})]})}),e.jsx(ae,{title:"Close Form Builder?",message:"All uncommitted changes will be lost!",open:U,setOpen:v,onConfirm:()=>{k(),l()},onKeep:()=>{l()}})]})};export{Xe as default};
