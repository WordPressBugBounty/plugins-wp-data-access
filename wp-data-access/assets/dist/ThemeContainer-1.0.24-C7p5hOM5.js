const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableContainer-1.0.24-BvOF5llg.js","./cm-1.0.24-lBsX3THK.js","./redux-1.0.24-Bx8jJ3ee.js","./vendor-1.0.24-BmpNFhoq.js","./AdminTheme-1.0.24-DxOFSSNd.js","./lib-1.0.24-up-HxGpi.js","./loglevel-1.0.24-BZ7XahX3.js","./lodash-1.0.24-CC2RnyUh.js","./moment-1.0.24-C5S46NFB.js","./Typography-1.0.24-DtpcakL_.js","./main-1.0.24.js","./notistack-1.0.24-EH6RgmCJ.js","./tanstack-1.0.24-DQ5pss68.js","./FallbackSpinner-1.0.24-CO6nSoMx.js","./Spinner-1.0.24-DzEoy0TD.js","./RestApi-1.0.24-BCmVwqnT.js","./ActionsSettings-1.0.24-Cyf5k2fb.js","./TargetEnum-1.0.24-DPFnTxiX.js","./ConfirmDialog-1.0.24-5s_WiKiN.js","./DialogContent-1.0.24-o2zFJd9S.js","./index-1.0.24-CyelUMLZ.js","./iconBase-1.0.24-C7lJg7VQ.js","./Menu-1.0.24-Bmzze4W5.js","./ThemeProvider-1.0.24-koXQmW7k.js","./CardContent-1.0.24-DpYcLPhl.js","./ConfirmDialog-1.0.24--D4jr2go.css","./ScopeEnum-1.0.24-B4DDvIDj.js","./index-1.0.24-B9zHNwKy.js","./TabPanel-1.0.24-DAjZ0-bn.js","./useTableUpdater-1.0.24-BxXiAeyi.js","./settings-1.0.24-CtEnxau0.js","./MenuItem-1.0.24-cnqjqUCU.js","./settings-1.0.24-Bx2jvYL6.css","./useTheme-1.0.24-CdGcp-pX.js","./index-1.0.24-COcPbr-v.js","./FormContainer-1.0.24-Dle0TZkf.js","./ActionsDml-1.0.24-BgEAxcii.js","./useScreenSize-1.0.24-18t2sPqy.js","./useStoreTable-1.0.24-CCGHEC8d.js","./dompurify-1.0.24-CCJo14B2.js","./dayjs.min-1.0.24-CNSrml1W.js","./CardActions-1.0.24-BjMbkSaq.js","./FormContainer-1.0.24-DR7D6eET.css","./TableChartDock-1.0.24-DU_VZl6O.js","./Chart-1.0.24-B1Ic-GEL.js","./Tooltip-1.0.24-C0iSk1Jx.js","./Popper-1.0.24-pV6SBss6.js","./useControlled-1.0.24-DnsqB4VW.js"])))=>i.map(i=>d[i]);
import{j as t}from"./cm-1.0.24-lBsX3THK.js";import{_ as C}from"./main-1.0.24.js";import{r as l}from"./redux-1.0.24-Bx8jJ3ee.js";import{l as d,K as J,S as Y,A as k,L as h,M as Z,N as ee,O as se,d as te,Q as oe,T as re,U as le,V as ne}from"./lib-1.0.24-up-HxGpi.js";import{u as ae,a as ie}from"./RestApi-1.0.24-BCmVwqnT.js";import{R as ce,C as de,u as ue,a as pe,b as me,c as U,D as i,d as Te,B as be,e as fe,A as ge,f as xe,g as Ee}from"./useTheme-1.0.24-CdGcp-pX.js";import{A as he,T as Se,e as je,M as _e}from"./index-1.0.24-CyelUMLZ.js";import{F as M}from"./FallbackSpinner-1.0.24-CO6nSoMx.js";import{B as j}from"./Spinner-1.0.24-DzEoy0TD.js";import{T as w}from"./Tooltip-1.0.24-C0iSk1Jx.js";import{I as N}from"./iconBase-1.0.24-C7lJg7VQ.js";import{T as ve}from"./ThemeProvider-1.0.24-koXQmW7k.js";var y=(e=>(e[e.SELECT=0]="SELECT",e[e.INSERT=1]="INSERT",e[e.UPDATE=2]="UPDATE",e[e.DELETE=3]="DELETE",e[e.EXPORT=4]="EXPORT",e[e.IMPORT=5]="IMPORT",e[e.VIEW=6]="VIEW",e))(y||{});const Fe=e=>4,Me=e=>{const a=ae(m=>{var c,T;return((T=(c=m.tables[e])==null?void 0:c.state)==null?void 0:T.fullScreen)??!1});return d.debug("fullScreen",a),a},ye=l.lazy(()=>C(()=>import("./TableContainer-1.0.24-BvOF5llg.js").then(e=>e.T),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),import.meta.url)),V=l.lazy(()=>C(()=>import("./FormContainer-1.0.24-Dle0TZkf.js").then(e=>e.F),__vite__mapDeps([35,10,1,2,3,11,5,6,7,8,14,9,4,15,36,33,34,20,21,37,38,39,40,24,41,23,42]),import.meta.url)),W=l.lazy(()=>C(()=>import("./TableChartDock-1.0.24-DU_VZl6O.js"),__vite__mapDeps([43,1,2,3,44,10,11,5,6,7,8,33,15,34,9,20,21,14,45,23,46,47]),import.meta.url)),z=({appId:e})=>{var P,R;d.debug(e);const a=ie(),m=ce(),c=de(),T=Fe(),f=ue(e),r=pe(e),u=me(e),g="pp-remove-body-vertical-scrollbar",s=U(e),S=l.useMemo(()=>{var o,n,x,E,D;return(o=s==null?void 0:s.src)!=null&&o.app_id&&((x=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:x.app_title)!==""?s.app.app[0].app_title:(E=s==null?void 0:s.src)!=null&&E.dbs&&((D=s==null?void 0:s.src)!=null&&D.tbl)?s.src.dbs+" - "+s.src.tbl:"WP Data Access"},[]),p=Me(e);l.useEffect(()=>(d.debug(p),()=>{var o;(o=window.document.getElementById(g))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen")}),[p]);const L=l.useMemo(()=>J.getSelectors().selectTableExploring(Y.getState().tables,e),[e]);d.debug("tableExploring",L);const[b,I]=l.useState(((R=(P=s==null?void 0:s.app)==null?void 0:P.app[0])==null?void 0:R.app_type)==k.REGISTRATION?i.FORM:i.TABLE),[O,G]=l.useState(!1),_=o=>{a(le({appId:e,mode:o})),I(o)};l.useEffect(()=>{window.ppShowForm=function(o){d.debug(o),B(o),_(i.FORM)}},[e]);const $=(o,n)=>{d.debug(o,n),ne(e)&&(c(e),n!==void 0&&(m(n),c(n))),o&&G(!O),_(i.TABLE)},[A,B]=l.useState(null),[H,v]=l.useState(h.VIEW),F=(o,n)=>{switch(d.debug(o,n),n){case y.INSERT:v(h.INSERT);break;case y.UPDATE:v(h.UPDATE);break;default:v(h.VIEW)}B(o),_(i.FORM)};let X={};Te(e);const K=()=>null,Q=()=>t.jsx(l.Suspense,{fallback:t.jsx(M,{title:u.loadingForm}),children:t.jsx(V,{appId:e,primaryKey:A,formMode:h.INSERT,showTable:()=>{},showForm:F,metaData:s})}),q=()=>{var o,n,x,E;return((n=(o=s==null?void 0:s.app)==null?void 0:o.app[0])==null?void 0:n.app_type)==k.REGISTRATION?Q():t.jsxs(t.Fragment,{children:[t.jsxs(l.Suspense,{fallback:t.jsx(M,{title:u.loadingTable}),children:[b===i.TABLE&&(r==null?void 0:r.docked)==="top"&&((x=r==null?void 0:r.data)==null?void 0:x.length)>0&&t.jsx(W,{appId:e}),t.jsx(ye,{appId:e,display:b===i.TABLE,refresh:O,showForm:F,metaData:s}),b===i.TABLE&&(r==null?void 0:r.docked)==="bottom"&&((E=r==null?void 0:r.data)==null?void 0:E.length)>0&&t.jsx(j,{sx:{marginTop:"5px"},children:t.jsx(W,{appId:e})})]}),b===i.FORM&&t.jsx(l.Suspense,{fallback:t.jsx(M,{title:u.loadingForm}),children:t.jsx(V,{appId:e,primaryKey:A,formMode:H,showTable:$,showForm:F,metaData:s})})]})};return t.jsxs(j,{className:"pp-component",sx:p?X:{},children:[t.jsx(he,{className:"pp-header",elevation:T,position:"relative",sx:{margin:"0 0 5px 0"},children:t.jsxs(Se,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(j,{sx:{display:"block",whiteSpace:"nowrap",fontSize:"18px",lineHeight:"18px",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",marginRight:"10px"},children:S}),t.jsxs(j,{sx:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center"},children:[Z(s)&&t.jsx(w,{title:t.jsx(be,{details:f,mode:b}),className:"pp-builder-button",children:t.jsx(N,{sx:{color:"inherit",padding:0},onClick:()=>{b===i.FORM?a(ee({appId:e})):a(se({appId:e}))},children:t.jsx(je,{})})}),K(),L&&t.jsx(w,{title:u.close,children:t.jsx(N,{sx:{color:"inherit",padding:0},onClick:()=>{var o;(o=window.document.getElementById(g))==null||o.remove(),window.document.body.classList.remove("pp-fullscreen"),s.src.app_id?a(te({isActive:!1,appDbId:0})):a(oe({})),c(e),m(e),a(re({}))},children:t.jsx(_e,{})})})]})]})}),q()]})},Ce=e=>({}),Le=({appId:e})=>{d.debug(e);const a=fe(e),m=xe(),c=Ee(),T=U(e);let f;T.appRootId===void 0&&(f=ge(c,a,m));const r=Ce(),u=`pp-global-code-${e}`;return l.useEffect(()=>{var g,s,S;if(r!==void 0){(g=window.document.getElementById(u))==null||g.remove();const p=window.document.createElement("script");p.id=u,p.innerHTML=((s=r.global)==null?void 0:s.code)??"",(S=window.document.getElementById(`pp-app-${e}`))==null||S.appendChild(p)}},[r]),f!==void 0?t.jsx(ve,{theme:f,children:t.jsx(z,{appId:e})}):t.jsx(z,{appId:e})},Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"}));export{y as R,Ue as T,Me as a,Ce as b,Fe as u};
