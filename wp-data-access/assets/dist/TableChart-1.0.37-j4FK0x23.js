import{j as p}from"./cm-1.0.37-CEr77VZi.js";import{r as h}from"./redux-1.0.37-C4JSQ-MG.js";import{P as Ce,b as V,a as ye}from"./index-1.0.37-BWdCssYC.js";import{c as Y}from"./index-1.0.37-B60ShF2d.js";import{a as be}from"./hooks-1.0.37-DW0_oiBB.js";import{cC as _e,l as Re,a2 as Se,a8 as we}from"./lib-1.0.37-Czwr-8r3.js";import{C as Oe}from"./ChartTypeSelection-1.0.37-g80wo80k.js";import{C as qe}from"./Chart-1.0.37-BPm1pFP4.js";import{T as Ee}from"./TableChartSelection-1.0.37-CNWwctdk.js";import{a as ke}from"./useChartSettings-1.0.37-DyLw1xR9.js";import{c as q,g as he}from"./vendor-1.0.37-CN03Eozo.js";import{T as Ie}from"./Tooltip-1.0.37-BLWvlO4a.js";import{I as ze}from"./iconBase-1.0.37-DRohixw7.js";import{B as Z}from"./ConfirmDialog-1.0.37-BDQ_OfRf.js";import{P as Ae}from"./Menu-1.0.37-Ca8DeoO3.js";import{B as k}from"./Spinner-1.0.37-CwhfSVqI.js";import"./index-1.0.37-D1xZWbV7.js";import"./Typography-1.0.37-DjtXWQnP.js";import"./notistack-1.0.37-CEqipxDI.js";import"./useEnhancedEffect-1.0.37-UwysO4qr.js";import"./loglevel-1.0.37-BZ7XahX3.js";import"./lodash-1.0.37-Dx3wKrSf.js";import"./moment-1.0.37-C5S46NFB.js";import"./ChartTypes-1.0.37-CDO5weV_.js";import"./index-1.0.37-CK0QxOhD.js";import"./FormHelperText-1.0.37-ylnS0Km6.js";import"./utils-1.0.37-iop7lDec.js";import"./useFormControl-1.0.37-BcUwa2qz.js";import"./TextField-1.0.37-CCe4G0U1.js";import"./Select-1.0.37-B5ZKqjeL.js";import"./useControlled-1.0.37-DyimEgDk.js";import"./createSvgIcon-1.0.37-DXsAQOmB.js";import"./FormLabel-1.0.37-BQP5Nx_Z.js";import"./MenuItem-1.0.37-JkRcsicb.js";import"./ListItemIcon-1.0.37-CVeLs3zr.js";import"./main-1.0.37.js";import"./useRemoveAppFromStore-1.0.37-HphIv4xo.js";import"./lang-1.0.37-CfHlhLgz.js";import"./AppTheme-1.0.37-DOXnENpA.js";import"./index-1.0.37-D4zhytA1.js";import"./getThemeProps-1.0.37-BGc0S4YC.js";import"./useTableColumnOrder-1.0.37-D1_-t0Ut.js";import"./TableContainer-1.0.37-C-xGIJXi.js";import"./AdminTheme-1.0.37-7PLndQ8H.js";import"./tanstack-1.0.37-DP4-37CF.js";import"./FallbackSpinner-1.0.37-DAc7pvnM.js";import"./ActionsSettings-1.0.37-DQdLIvID.js";import"./RestApi-1.0.37-CcjslynE.js";import"./TargetEnum-1.0.37-CIW1jlU5.js";import"./Tooltip-1.0.37-D_uDknxi.js";import"./ScopeEnum-1.0.37-B4DDvIDj.js";import"./index-1.0.37-LxgxH_yq.js";import"./TabPanel-1.0.37-CPE-1h3v.js";import"./useThemeProps-1.0.37-CD9ZXLtG.js";import"./useTableUpdater-1.0.37-CIKXY-oH.js";import"./DynamicModeEnum-1.0.37-BXuL5kgA.js";import"./useFormDetails-1.0.37-DnrKW97d.js";/* empty css                        */import"./ThemeProvider-1.0.37-Cyf1xy26.js";import"./Autocomplete-1.0.37-5_yZAyWV.js";import"./Close-1.0.37-Yr1E1-6A.js";import"./Popper-1.0.37-CSsNCozr.js";var I,ee;function H(){if(ee)return I;ee=1;function e(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}return I=e,I}var z,re;function Pe(){if(re)return z;re=1;var e=typeof q=="object"&&q&&q.Object===Object&&q;return z=e,z}var A,te;function ge(){if(te)return A;te=1;var e=Pe(),r=typeof self=="object"&&self&&self.Object===Object&&self,n=e||r||Function("return this")();return A=n,A}var P,ne;function Be(){if(ne)return P;ne=1;var e=ge(),r=function(){return e.Date.now()};return P=r,P}var B,ie;function Ne(){if(ie)return B;ie=1;var e=/\s/;function r(n){for(var i=n.length;i--&&e.test(n.charAt(i)););return i}return B=r,B}var N,oe;function Ge(){if(oe)return N;oe=1;var e=Ne(),r=/^\s+/;function n(i){return i&&i.slice(0,e(i)+1).replace(r,"")}return N=n,N}var G,ae;function xe(){if(ae)return G;ae=1;var e=ge(),r=e.Symbol;return G=r,G}var W,ue;function We(){if(ue)return W;ue=1;var e=xe(),r=Object.prototype,n=r.hasOwnProperty,i=r.toString,a=e?e.toStringTag:void 0;function c(u){var t=n.call(u,a),f=u[a];try{u[a]=void 0;var o=!0}catch{}var s=i.call(u);return o&&(t?u[a]=f:delete u[a]),s}return W=c,W}var D,se;function De(){if(se)return D;se=1;var e=Object.prototype,r=e.toString;function n(i){return r.call(i)}return D=n,D}var L,ce;function Le(){if(ce)return L;ce=1;var e=xe(),r=We(),n=De(),i="[object Null]",a="[object Undefined]",c=e?e.toStringTag:void 0;function u(t){return t==null?t===void 0?a:i:c&&c in Object(t)?r(t):n(t)}return L=u,L}var M,fe;function Me(){if(fe)return M;fe=1;function e(r){return r!=null&&typeof r=="object"}return M=e,M}var F,de;function Fe(){if(de)return F;de=1;var e=Le(),r=Me(),n="[object Symbol]";function i(a){return typeof a=="symbol"||r(a)&&e(a)==n}return F=i,F}var U,le;function Ue(){if(le)return U;le=1;var e=Ge(),r=H(),n=Fe(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,t=parseInt;function f(o){if(typeof o=="number")return o;if(n(o))return i;if(r(o)){var s=typeof o.valueOf=="function"?o.valueOf():o;o=r(s)?s+"":s}if(typeof o!="string")return o===0?o:+o;o=e(o);var b=c.test(o);return b||u.test(o)?t(o.slice(2),b?2:8):a.test(o)?i:+o}return U=f,U}var $,me;function ve(){if(me)return $;me=1;var e=H(),r=Be(),n=Ue(),i="Expected a function",a=Math.max,c=Math.min;function u(t,f,o){var s,b,y,C,l,g,m=0,T=!1,x=!1,_=!0;if(typeof t!="function")throw new TypeError(i);f=n(f)||0,e(o)&&(T=!!o.leading,x="maxWait"in o,y=x?a(n(o.maxWait)||0,f):y,_="trailing"in o?!!o.trailing:_);function j(d){var R=s,S=b;return s=b=void 0,m=d,C=t.apply(S,R),C}function v(d){return m=d,l=setTimeout(O,f),T?j(d):C}function w(d){var R=d-g,S=d-m,Q=f-R;return x?c(Q,y-S):Q}function J(d){var R=d-g,S=d-m;return g===void 0||R>=f||R<0||x&&S>=y}function O(){var d=r();if(J(d))return K(d);l=setTimeout(O,w(d))}function K(d){return l=void 0,_&&s?j(d):(s=b=void 0,C)}function Te(){l!==void 0&&clearTimeout(l),m=0,s=g=b=l=void 0}function je(){return l===void 0?C:K(r())}function E(){var d=r(),R=J(d);if(s=arguments,b=this,g=d,R){if(l===void 0)return v(g);if(x)return clearTimeout(l),l=setTimeout(O,f),j(g)}return l===void 0&&(l=setTimeout(O,f)),C}return E.cancel=Te,E.flush=je,E}return $=u,$}var $e=ve();const Xe=he($e);var X,pe;function He(){if(pe)return X;pe=1;var e=ve(),r=H(),n="Expected a function";function i(a,c,u){var t=!0,f=!0;if(typeof a!="function")throw new TypeError(n);return r(u)&&(t="leading"in u?!!u.leading:t,f="trailing"in u?!!u.trailing:f),e(a,c,{leading:t,maxWait:c,trailing:f})}return X=i,X}var Je=He();const Ke=he(Je),Qe=(e,r,n,i)=>{switch(r){case"debounce":return Xe(e,n,i);case"throttle":return Ke(e,n,i);default:return e}},Ve=e=>{const r=h.useRef(e);return h.useEffect(()=>{r.current=e}),h.useMemo(()=>(...n)=>{var i;return(i=r.current)===null||i===void 0?void 0:i.call(r,...n)},[])},Ye=e=>{const[r,n]=h.useState((e==null?void 0:e.current)||null);return e&&setTimeout(()=>{e.current!==r&&n(e.current)},0),{refProxy:h.useMemo(()=>new Proxy(a=>{a!==r&&n(a)},{get(a,c){return c==="current"?r:a[c]},set(a,c,u){return c==="current"?n(u):a[c]=u,!0}}),[r]),refElement:r,setRefElement:n}},Ze=(e,r)=>r==="border-box"?{width:e.borderBoxSize[0].inlineSize,height:e.borderBoxSize[0].blockSize}:r==="content-box"?{width:e.contentBoxSize[0].inlineSize,height:e.contentBoxSize[0].blockSize}:{width:e.contentRect.width,height:e.contentRect.height};function er({skipOnMount:e=!1,refreshMode:r,refreshRate:n=1e3,refreshOptions:i,handleWidth:a=!0,handleHeight:c=!0,targetRef:u,observerOptions:t,onResize:f}={}){const o=h.useRef(e),s=Ve(f),[b,y]=h.useState({width:void 0,height:void 0}),{refProxy:C,refElement:l}=Ye(u),{box:g}=t||{},m=h.useCallback(x=>{if(!a&&!c)return;if(o.current){o.current=!1;return}const _=(j,v)=>a&&j.width!==v.width||c&&j.height!==v.height;x.forEach(j=>{const v=Ze(j,g);y(w=>_(w,v)?(s==null||s({width:v.width,height:v.height,entry:j}),v):w)})},[a,c,o,g]),T=h.useCallback(Qe(m,r,n,i),[m,r,n,i]);return h.useEffect(()=>{let x;return l?(x=new window.ResizeObserver(T),x.observe(l,t)):(b.width||b.height)&&(s==null||s({width:null,height:null,entry:null}),y({width:void 0,height:void 0})),()=>{var _,j,v;(_=x==null?void 0:x.disconnect)===null||_===void 0||_.call(x),(v=(j=T).cancel)===null||v===void 0||v.call(j)}},[T,l]),Object.assign({ref:C},b)}const rr=({appId:e,popupState:r})=>(be(),(i=>null)()),ft=({appId:e,componentWidth:r,table:n,tableStore:i,metaData:a,appLanguage:c})=>{const u=be(),t=ke(e),[f,o]=h.useState("BarChart");h.useEffect(()=>{s.current!==null&&g()},[f]);const s=h.useRef(null),b=h.useCallback(()=>{s.current&&l(s.current.offsetWidth)},[s]),{width:y}=er({targetRef:s,onResize:b}),[C,l]=h.useState(),g=()=>{var T;const m=_e(n,t.majorAxisColumn,t.minorAxisColumns,t.grouped,i.columns,a);Re.debug(m),((T=t==null?void 0:t.data)==null?void 0:T.length)>0?u(Se({appId:e,property:{majorAxisColumn:t.majorAxisColumn,minorAxisColumns:t.minorAxisColumns,data:m,chartType:f,grouped:t.grouped}})):u(we({appId:e,chartState:{majorAxisColumn:t.majorAxisColumn,minorAxisColumns:t.minorAxisColumns,data:m,chartType:f,grouped:t.grouped}}))};return p.jsx(Ce,{variant:"popover",popupId:e,children:m=>{var T;return p.jsxs(p.Fragment,{children:[r<900?p.jsx(Ie,{title:"Charts",children:p.jsx(ze,{...V(m),onClickCapture:()=>{t!==void 0&&g()},children:p.jsx(Y,{})})}):p.jsx(Z,{variant:"contained",endIcon:p.jsx(Y,{}),...V(m),onClickCapture:()=>{t!==void 0&&g()},children:"CHARTS"}),p.jsx(Ae,{...ye(m),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","& > .MuiPaper-root":{resize:"horizontal",minWidth:"380px",width:C+"px"}},children:p.jsxs(k,{sx:{display:"grid",gap:"20px",padding:"20px"},ref:s,children:[p.jsx(Ee,{appId:e,metaData:a,tableStore:i}),p.jsx(Oe,{chartType:f,setChartType:o,chartTypes:(t==null?void 0:t.chartTypes)??[],isTableChart:!0}),p.jsxs(k,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem"},children:[p.jsx(k,{sx:{whiteSpace:"nowrap"},children:i.state.masterDetailConditions===void 0&&p.jsx(rr,{appId:e,popupState:m})}),p.jsxs(Z,{variant:"contained",onClick:()=>{m.close()},children:[" ",c.back," "]})]}),(t==null?void 0:t.docked)==="undocked"&&((T=t==null?void 0:t.data)==null?void 0:T.length)>0&&(t==null?void 0:t.majorAxisColumn)!==""&&(t==null?void 0:t.minorAxisColumns.length)>0&&p.jsx(qe,{appId:e,isBuilderEnabled:!1,isToolbarEnabled:!1,chartWidth:y,isTableChart:!0})]})})]})}})};export{ft as default};
