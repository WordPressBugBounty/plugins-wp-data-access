import{r as p,j as t,l as j}from"./main-1.0.23.js";import{S as v}from"./SanitizeComponent-1.0.23-8b51bdfd.js";import{M as C,D as S}from"./index.esm-1.0.23-ba0465a2.js";import{u as w}from"./useChartType-1.0.23-a57d25eb.js";import{M as T}from"./Modal-1.0.23-3fe42627.js";import{B as o}from"./Spinner-1.0.23-90ab83ff.js";import{I as x}from"./iconBase-1.0.23-43ac6f06.js";import{S as M}from"./Slider-1.0.23-75ca4c04.js";import"./purify.es-1.0.23-68816782.js";import"./Typography-1.0.23-19a0fd3e.js";import"./RestApi-1.0.23-cc179eb9.js";import"./ThemeProvider-1.0.23-f3e5cbc1.js";import"./index-1.0.23-9af490ae.js";import"./useControlled-1.0.23-1e71c28b.js";const J=({appId:l,getChartImageURI:g,printChart:f,setPrintChart:s})=>{var m,u,d,h;const a=w(l),c=p.useRef(null),i=()=>window.document.querySelector(`#pp-chart-${l} .pp-chart-google-container svg`),[n,q]=p.useState(((m=i())==null?void 0:m.clientWidth)??0),b=()=>{var r;const e=window.open("","print");e==null||e.document.write("<html><head><title>"+document.title+"</title>"),e==null||e.document.write("</head><body >"),e==null||e.document.write("<h1>"+document.title+"</h1>"),e==null||e.document.write(((r=c.current)==null?void 0:r.innerHTML)??""),e==null||e.document.write("</body></html>"),e==null||e.document.close(),e==null||e.focus(),e==null||e.print(),e==null||e.close()},y=()=>{const e=window.document.querySelector(`#pp-chart-${l} div div`);if(e===null)return null;const r=e==null?void 0:e.cloneNode(!0);return r&&r.removeAttribute("id"),t.jsx(o,{className:"pp-chart-print-container",children:t.jsx(v,{html:r.innerHTML})})};return a==="Gauge"||a==="Table"?null:t.jsx(T,{open:f,onClose:()=>s(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsx(o,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"1px solid #eee",boxShadow:24,p:4,borderRadius:"4px",width:window.document.querySelectorAll(`#pp-chart-${l} svg`)!==null?(u=i())==null?void 0:u.clientWidth:"auto",height:window.document.querySelectorAll(`#pp-chart-${l} svg`)!==null?(((d=i())==null?void 0:d.clientHeight)??0)+70:"auto"},children:t.jsxs(o,{sx:{position:"relative",display:"grid",gridTemplateRows:"1fr",height:"-webkit-fill-available"},children:[t.jsx(x,{color:"primary",onClick:()=>{s(!1)},sx:{position:"absolute",right:0},children:t.jsx(C,{})}),t.jsxs(o,{sx:{display:"grid",gridTemplateRows:window.document.querySelectorAll(`#pp-chart-${l} svg`).length===1?"1fr 60px":"1fr 40px",height:"-webkit-fill-available"},children:[t.jsx(o,{ref:c,sx:{alignSelf:"center",textAlign:"center"},children:window.document.querySelectorAll(`#pp-chart-${l} svg`)!==null?t.jsx("img",{src:g(),style:{width:n}}):y()}),t.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"1fr auto",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(o,{children:i()!==null&&t.jsx(M,{value:n,min:1,max:(h=i())==null?void 0:h.clientWidth,step:1,valueLabelDisplay:"on",disabled:!0,onChange:(e,r)=>{j.debug(e,r)},sx:{width:"calc(100% - 40px)",margin:"20px"}})}),t.jsx(x,{color:"primary",onClick:()=>{b()},children:t.jsx(S,{})})]})]})]})})})};export{J as default};
