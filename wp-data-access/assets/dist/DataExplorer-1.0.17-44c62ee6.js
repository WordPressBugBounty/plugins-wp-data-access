import{r as d,j as e,_ as ie,l as a,ad as dt,ae as pt,C as M,af as ut,ag as xt,ah as gt,ai as mt,aj as ht,ak as jt,al as ft,am as bt,an as yt,ao as Tt,ap as St,aq as Ct,ar as vt,as as It,at as Ge,au as wt,av as _t,aw as Et,L as Fe,ax as kt,ay as Pt,az as At,aA as Lt,aB as Mt,aC as Rt,aD as Ot,aE as zt,aF as Dt,aG as Nt,aH as ks,aI as ms,aJ as $e,aK as He,aL as Ft,aM as Bt,aN as Ps,aO as As,aP as ze,aQ as Ls,aR as Ze,aS as Vt,aT as Kt,aU as Wt,aV as Gt,aW as $t,aX as Ht,i as we,S as ds,e as P,aY as Ut,aZ as hs,a_ as Ms,a$ as qt,b0 as Qt,b1 as Yt,b2 as ye,b3 as Je,b4 as Jt,R as Ae,b5 as Xt,b6 as Zt,b7 as Ue,b8 as es,b9 as en,aa as bs,P as sn,z as ys,D as tn}from"./main-1.0.17.js";import{l as nn,a as an,b as rn,c as on,d as ln,e as cn,f as dn,g as pn,h as un,s as xn}from"./ActionsExplorer-1.0.17-9d96105d.js";import{F as qe,G as Qe,B as l,H as gn,a as H,u as k,I as mn,J as hn,T as je,i as jn,K as fn,C as bn,L as yn,A as as,g as rs,N as Tn,O as Sn,P as Rs,Q as Os,h as zs,R as Cn,U as vn,S as js,c as ce,V as In,m as wn,x as _n,y as En,z as kn,v as Pn,d as Ds,s as An}from"./main-1.0.17-54ffa424.js";import{a as Me,_ as Z,c as Ns,s as fs,u as Ln,d as Ts,b as Mn,r as he,T as Se,I as ne,P as ps}from"./iconBase-1.0.17-8d991e6c.js";import{u as _e,M as Ee,B as Ss,T as Fs,a as Bs,b as ss,c as ee,d as Vs}from"./index.esm-1.0.17-e75a3d2e.js";import{a as Ks,b as Ws,c as Gs,d as Rn}from"./index.esm-1.0.17-7de921eb.js";import{T as On,a as zn}from"./index.esm-1.0.17-11edad0c.js";import{u as $s,t as le,T as Dn,a as Nn,b as Fn,g as Bn,S as Vn}from"./TreeItem2Provider-1.0.17-12df10be.js";import{C as Kn}from"./Collapse-1.0.17-faa698ed.js";import{A as ae,C as us,a as xs,B as G,b as Wn}from"./useScreenSize-1.0.17-44173319.js";import{u as Gn,g as Be,h as $n}from"./usePrepareStore-1.0.17-a8be8b2f.js";import{C as pe}from"./Checkbox-1.0.17-3dddd4e7.js";import{L as fe}from"./Link-1.0.17-88d48a3e.js";import{C as Hn}from"./CardHeader-1.0.17-aafd2d21.js";import{F as Q,b as se,S as Te,I as ts,a as ge}from"./Select-1.0.17-745624d0.js";import{C as Un}from"./CardActions-1.0.17-7e33ba01.js";import{T as re,a as cs,A as Cs,C as vs}from"./TargetEnum-1.0.17-1e1ba2c5.js";import{I as Is}from"./InputAdornment-1.0.17-012556cc.js";import{D as qn,e as Qn,f as Yn,C as xe,T as Xe,S as De,R as Jn,B as Xn,a as Zn,b as ea,c as sa,d as ws}from"./TabPanel-1.0.17-3c2dbf14.js";import{D as ta,a as na,b as aa}from"./DialogContent-1.0.17-9628df83.js";import{M as K}from"./MenuItem-1.0.17-ed8ab45a.js";import{A as ra}from"./AdminMetaData-1.0.17-c000f318.js";import{a as ia}from"./settings-1.0.17-bb8125cf.js";import{S as oa}from"./ScopeEnum-1.0.17-7caf102d.js";import{A as Ce,a as ve}from"./AccordionSummary-1.0.17-276b7b2a.js";import{A as Ie}from"./AccordionDetails-1.0.17-7b8437b0.js";import{R as Hs}from"./RadioGroup-1.0.17-46153993.js";import{R as ns}from"./Radio-1.0.17-2bbb6717.js";import{c as la}from"./index-1.0.17-e83aeb27.js";import{F as Ne}from"./FormControlLabel-1.0.17-cc31d0c1.js";import{a as ca}from"./index.esm-1.0.17-78a91bbf.js";import{C as da}from"./index-1.0.17-c81b5b35.js";import{g as pa}from"./ActionsDml-1.0.17-9041b8e8.js";import{T as _s}from"./Tabs-1.0.17-a2a1c721.js";import"./createSvgIcon-1.0.17-f0c1dc0a.js";import"./Menu-1.0.17-09126381.js";import"./AlertTitle-1.0.17-4b186927.js";import"./useSlot-1.0.17-ca7553c5.js";import"./Close-1.0.17-6c546366.js";import"./ListItemIcon-1.0.17-21c8997f.js";import"./DateTimePicker-1.0.17-88f02f82.js";import"./useMobilePicker-1.0.17-7c45344d.js";import"./date-time-utils-1.0.17-c30caadb.js";import"./dateViewRenderers-1.0.17-d51d277e.js";import"./TimePicker-1.0.17-43c48cfc.js";import"./DatePicker-1.0.17-e7f585a0.js";import"./Slider-1.0.17-27606716.js";function ua(s){const{instance:t,selection:{multiSelect:r}}=$s(),n=t.isItemExpandable(s),i=t.isItemExpanded(s),o=t.isItemFocused(s),g=t.isItemSelected(s),x=t.isItemDisabled(s);return{disabled:x,expanded:i,selected:g,focused:o,handleExpansion:u=>{if(!x){o||t.focusItem(u,s);const C=r&&(u.shiftKey||u.ctrlKey||u.metaKey);n&&!(C&&t.isItemExpanded(s))&&t.toggleItemExpansion(u,s)}},handleSelection:u=>{x||(o||t.focusItem(u,s),r&&(u.shiftKey||u.ctrlKey||u.metaKey)?u.shiftKey?t.selectRange(u,{end:s}):t.selectItem(u,s,!0):t.selectItem(u,s))},preventSelection:u=>{(u.shiftKey||u.ctrlKey||u.metaKey||x)&&u.preventDefault()}}}const xa=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown"],Us=d.forwardRef(function(t,r){const{classes:n,className:i,displayIcon:o,expansionIcon:g,icon:x,label:m,itemId:y,onClick:c,onMouseDown:u}=t,C=Me(t,xa),{disabled:j,expanded:S,selected:I,focused:w,handleExpansion:A,handleSelection:N,preventSelection:z}=ua(y),L=x||g||o,F=T=>{z(T),u&&u(T)},O=T=>{A(T),N(T),c&&c(T)};return e.jsxs("div",Z({},C,{className:Ns(i,n.root,S&&n.expanded,I&&n.selected,w&&n.focused,j&&n.disabled),onClick:O,onMouseDown:F,ref:r,children:[e.jsx("div",{className:n.iconContainer,children:L}),e.jsx("div",{className:n.label,children:m})]}))}),ga=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],ma=["ownerState"],ha=["ownerState"],ja=["ownerState"],fa=s=>{const{classes:t}=s;return Mn({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],groupTransition:["groupTransition"]},Bn,t)},ba=fs("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(s,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),ya=fs(Us,{name:"MuiTreeItem",slot:"Content",overridesResolver:(s,t)=>[t.content,t.iconContainer&&{[`& .${le.iconContainer}`]:t.iconContainer},t.label&&{[`& .${le.label}`]:t.label}]})(({theme:s})=>({padding:s.spacing(.5,1),borderRadius:s.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:s.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(s.vars||s).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${le.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${le.focused}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${le.selected}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:qe(s.palette.primary.main,s.palette.action.selectedOpacity),"&:hover":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.hoverOpacity}))`:qe(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / ${s.vars.palette.action.selectedOpacity})`:qe(s.palette.primary.main,s.palette.action.selectedOpacity)}},[`&.${le.focused}`]:{backgroundColor:s.vars?`rgba(${s.vars.palette.primary.mainChannel} / calc(${s.vars.palette.action.selectedOpacity} + ${s.vars.palette.action.focusOpacity}))`:qe(s.palette.primary.main,s.palette.action.selectedOpacity+s.palette.action.focusOpacity)}},[`& .${le.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${le.label}`]:Z({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},s.typography.body1)})),Ta=fs(Kn,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(s,t)=>t.groupTransition})({margin:0,padding:0,paddingLeft:12}),te=d.forwardRef(function(t,r){const{icons:n,runItemPlugins:i,selection:{multiSelect:o},disabledItemsFocusable:g,instance:x}=$s(),m=Ln({props:t,name:"MuiTreeItem"}),{children:y,className:c,slots:u,slotProps:C,ContentComponent:j=Us,ContentProps:S,itemId:I,id:w,label:A,onClick:N,onMouseDown:z,onBlur:L,onKeyDown:F}=m,O=Me(m,ga),{contentRef:T,rootRef:B}=i(m),R=Ts(r,B),b=Ts(S==null?void 0:S.ref,T),h={expandIcon:(u==null?void 0:u.expandIcon)??n.slots.expandIcon??Dn,collapseIcon:(u==null?void 0:u.collapseIcon)??n.slots.collapseIcon??Nn,endIcon:(u==null?void 0:u.endIcon)??n.slots.endIcon,icon:u==null?void 0:u.icon,groupTransition:u==null?void 0:u.groupTransition},f=V=>Array.isArray(V)?V.length>0&&V.some(f):!!V,v=f(y),E=x.isItemExpanded(I),_=x.isItemFocused(I),U=x.isItemSelected(I),D=x.isItemDisabled(I),J=Z({},m,{expanded:E,focused:_,selected:U,disabled:D}),q=fa(J),oe=h.groupTransition??void 0,Ve=Qe({elementType:oe,ownerState:{},externalSlotProps:C==null?void 0:C.groupTransition,additionalProps:{unmountOnExit:!0,in:E,component:"ul",role:"group"},className:q.groupTransition}),me=E?h.collapseIcon:h.expandIcon,Ke=Qe({elementType:me,ownerState:{},externalSlotProps:V=>E?Z({},he(n.slotProps.collapseIcon,V),he(C==null?void 0:C.collapseIcon,V)):Z({},he(n.slotProps.expandIcon,V),he(C==null?void 0:C.expandIcon,V))}),We=Me(Ke,ma),p=v&&me?e.jsx(me,Z({},We)):null,X=v?void 0:h.endIcon,Zs=Qe({elementType:X,ownerState:{},externalSlotProps:V=>v?{}:Z({},he(n.slotProps.endIcon,V),he(C==null?void 0:C.endIcon,V))}),et=Me(Zs,ha),st=X?e.jsx(X,Z({},et)):null,os=h.icon,tt=Qe({elementType:os,ownerState:{},externalSlotProps:C==null?void 0:C.icon}),nt=Me(tt,ja),at=os?e.jsx(os,Z({},nt)):null;let ls;o?ls=U:U&&(ls=!0);function rt(V){!_&&(!D||g)&&V.currentTarget===V.target&&x.focusItem(V,I)}function it(V){L==null||L(V),x.removeFocusedItem()}const ot=V=>{F==null||F(V),x.handleItemKeyDown(V,I)},lt=x.getTreeItemId(I,w),ct=x.canItemBeTabbed(I)?0:-1;return e.jsx(Fn,{itemId:I,children:e.jsxs(ba,Z({className:Ns(q.root,c),role:"treeitem","aria-expanded":v?E:void 0,"aria-selected":ls,"aria-disabled":D||void 0,id:lt,tabIndex:ct},O,{ownerState:J,onFocus:rt,onBlur:it,onKeyDown:ot,ref:R,children:[e.jsx(ya,Z({as:j,classes:{root:q.content,expanded:q.expanded,selected:q.selected,focused:q.focused,disabled:q.disabled,iconContainer:q.iconContainer,label:q.label},label:A,itemId:I,onClick:N,onMouseDown:z,icon:at,expansionIcon:p,displayIcon:st,ownerState:J},S,{ref:b})),y&&e.jsx(Ta,Z({as:oe},Ve,{children:y}))]}))})}),de=()=>e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"30px"},children:[e.jsx(gn,{sx:{width:"1em !important",height:"1em !important"}}),e.jsx(Se,{children:"Loading..."})]}),ke={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTablePaperProps:{sx:{display:"grid",boxShadow:"none"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyRowProps:{hover:!0},muiTableBodyCellProps:{sx:{verticalAlign:"top"}}},Pe=({msg:s})=>e.jsx(l,{sx:{padding:"1rem 0"},children:e.jsx(Se,{children:s})}),Sa=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Ca=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>dt(c,s,t));a.debug(n);const i=k(c=>pt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{nn(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(ut({dbs:s,tbl:t,cls:u}))},c=>{a.error("error",c),g(c??M.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),y=_e({...ke,columns:m,data:i,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Sa,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table has no columns"}):(a.debug(i),e.jsx(Ee,{table:y})):e.jsx(de,{})},va=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Ia=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>xt(c,s,t));a.debug(n);const i=k(c=>gt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{an(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(mt({dbs:s,tbl:t,idx:u}))},c=>{a.error("error",c),g(c??M.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),y=_e({...ke,columns:m,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(va,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table has no indexes"}):e.jsx(Ee,{table:y}):e.jsx(de,{})},wa=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),_a=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>ht(c,s,t));a.debug(n);const i=k(c=>jt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{rn(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(ft({dbs:s,tbl:t,trg:u}))},c=>{a.error("error",c),g(c??M.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:c})=>e.jsx("pre",{style:{padding:0,margin:0},children:c.getValue()})}],[]),y=_e({...ke,columns:m,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(wa,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table has no triggers"}):e.jsx(Ee,{table:y}):e.jsx(de,{})},Ea=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),ka=({dbs:s,tbl:t})=>{a.debug(s,t);const r=H(),n=k(c=>bt(c,s,t));a.debug(n);const i=k(c=>yt(c,s,t));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{on(s,t,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(Tt({dbs:s,tbl:t,frk:u}))},c=>{a.error("error",c),g(c)})},m=d.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),y=_e({...ke,columns:m,data:i,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Ea,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Table contains no foreign keys"}):e.jsx(Ee,{table:y}):e.jsx(de,{})};var W=(s=>(s[s.TABLE=0]="TABLE",s[s.VIEW=1]="VIEW",s))(W||{});const qs=d.memo(({dbs:s,tbl:t,typ:r})=>(a.debug(s,t,r),e.jsxs(e.Fragment,{children:[e.jsx(te,{itemId:s+"-"+t+"-columns",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(mn,{}),e.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ca,{dbs:s,tbl:t})}),r===W.TABLE&&e.jsxs(e.Fragment,{children:[e.jsx(te,{itemId:s+"-"+t+"-indexes",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(hn,{}),e.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ia,{dbs:s,tbl:t})}),e.jsx(te,{itemId:s+"-"+t+"-foreignkeys",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(On,{}),e.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:e.jsx(ka,{dbs:s,tbl:t})}),e.jsx(te,{itemId:s+"-"+t+"-triggers",label:e.jsxs(l,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(Ks,{}),e.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:e.jsx(_a,{dbs:s,tbl:t})})]})]})));var ue=(s=>(s[s.MANAGE=0]="MANAGE",s[s.EXPLORE=1]="EXPLORE",s))(ue||{});const Pa=s=>{const t=k(r=>St(r,s));return a.debug("tablesSelected",t),t},Aa=s=>{const t=k(r=>Ct(r,s));return a.debug("viewsSelected",t),t},Qs=d.memo(({dbs:s,tbl:t,typ:r,tableContext:n})=>{var y,c;a.debug(s,t,r);const i=H(),o=Pa(s),g=Aa(s),x=Gn("(max-width:900px)"),m=d.useMemo(()=>(n==null?void 0:n.wp_tables)!==void 0&&n.wp_tables.filter(u=>u===t).length>0?" (WordPress Table)":(n==null?void 0:n.wpda_tables)!==void 0&&n.wpda_tables.filter(u=>u===t).length>0?" (Plugin Table)":"",[]);return e.jsxs(l,{color:"primary",sx:{display:"grid",gridTemplateColumns:"calc(100% - 110px) auto",justifyContent:"space-between",alignItems:"center",gridGap:"20px",marginLeft:"-10px","&:hover":{".pp-row-actions":{visibility:x?"hidden":"visible"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"0",overflow:"hidden"},children:[e.jsx(l,{sx:{display:"grid",alignItems:"center"},children:e.jsx(pe,{size:"small",checked:g.includes(t)||o.includes(t),onClick:u=>{r===W.VIEW?i(vt({dbs:s,vws:t,isSelected:!g.includes(t)})):i(It({dbs:s,tbl:t,isSelected:!o.includes(t)})),u.stopPropagation()}})}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[e.jsxs(l,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[t," ",m]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center",visibility:"hidden"},className:"pp-row-actions",children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Manage table `"+t+"`",placement:"bottom",children:e.jsx(fe,{underline:"none",onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.MANAGE})),u.preventDefault(),u.stopPropagation()},children:"Manage"})}),e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Explore table `"+t+"`",placement:"bottom",children:e.jsx(fe,{underline:"none",onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.EXPLORE})),u.preventDefault(),u.stopPropagation()},children:"Explore"})})]})]})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-evenly",alignItems:"center"},children:[e.jsx(je,{title:"Manage table `"+t+"`",placement:"bottom",children:e.jsx(ne,{sx:{color:(y=ae)==null?void 0:y.palette.primary.main},onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.MANAGE})),u.preventDefault(),u.stopPropagation()},children:e.jsx(jn,{})})}),e.jsx(je,{title:"Explore table `"+t+"`",placement:"bottom",children:e.jsx(ne,{sx:{color:(c=ae)==null?void 0:c.palette.primary.main},onClick:u=>{i(Ge({dbs:s,tbl:t,typ:r,explorerAction:ue.EXPLORE})),u.preventDefault(),u.stopPropagation()},children:e.jsx(fn,{})})})]})]})}),La=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Ma=d.memo(({dbs:s,search:t})=>{const r=H();a.debug(s,t);const n=k(m=>wt(m,s));a.debug("tablesLoaded",n);const i=k(m=>_t(m,s));a.debug("tables",i);const o=k(m=>Et(m,s));a.debug("tableContext",o);const[g,x]=d.useState("");return d.useEffect(()=>{n||ln(s,function(m){const y=m==null?void 0:m.data;a.debug("response data",y),r(kt({dbs:s,tbl:y,context:m.context??void 0}))},m=>{a.error("error",m),x(m??M.contactSupport)})},[n]),g!==""?e.jsx(d.Suspense,{children:e.jsx(La,{severity:"error",message:g,close:!1})}):n?n&&i.length===0?e.jsx(l,{sx:{padding:"1rem"},children:e.jsx(Se,{children:"Database contains no tables"})}):e.jsxs(e.Fragment,{children:[...i.map(m=>{const y=!Fe(m,t);return e.jsx(te,{itemId:s+"-"+m,label:e.jsx(Qs,{dbs:s,tbl:m,typ:W.TABLE,tableContext:o}),sx:{visibility:y?"hidden":"inherit",position:y?"fixed !important":"inherit"},children:e.jsx(qs,{dbs:s,tbl:m,typ:W.TABLE})})})]}):e.jsx(de,{})}),Ra=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Oa=({dbs:s,search:t})=>{const r=H();a.debug(s,t);const n=k(m=>Pt(m,s));a.debug(n);const[i,o]=d.useState("");d.useEffect(()=>{n||x()},[n]);const g=k(m=>At(m,s));a.debug(g);const x=()=>{cn(s,m=>{const y=m==null?void 0:m.data;a.debug("response data",y),r(Lt({dbs:s,vws:y}))},m=>{a.error("error",m),o(m??M.contactSupport)})};return i!==""?e.jsx(d.Suspense,{children:e.jsx(Ra,{severity:"error",message:i,close:!1})}):n?n&&g.length===0?e.jsx(l,{sx:{padding:"1rem"},children:e.jsx(Se,{children:"Database contains no views"})}):e.jsxs(e.Fragment,{children:[...g.map(m=>{const y=!Fe(m,t);return e.jsx(te,{itemId:s+"-"+m,label:e.jsx(Qs,{dbs:s,tbl:m,typ:W.VIEW}),sx:{visibility:y?"hidden":"unset",position:y?"fixed !important":"inherit"},children:e.jsx(qs,{dbs:s,tbl:m,typ:W.VIEW})})})]}):e.jsx(de,{})},za=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Da=({dbs:s,search:t})=>{a.debug(s,t);const r=H(),n=k(c=>Mt(c,s));a.debug(n);const i=k(c=>Rt(c,s));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{dn(s,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(Ot({dbs:s,prc:u}))},c=>{a.error("error",c),g(c??M.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:c})=>e.jsx("pre",{style:{padding:0,margin:0},children:c.getValue()})}],[]),y=_e({...ke,columns:m,data:i.filter(c=>Fe(c.routine_name,t)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(za,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Database contains no stored procedures"}):e.jsx(Ee,{table:y}):e.jsx(de,{})},Na=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Fa=({dbs:s,search:t})=>{a.debug(s,t);const r=H(),n=k(c=>zt(c,s));a.debug(n);const i=k(c=>Dt(c,s));a.debug(i);const[o,g]=d.useState("");d.useEffect(()=>{n||x()},[n]);const x=()=>{pn(s,c=>{const u=c==null?void 0:c.data;a.debug("response data",u),r(Nt({dbs:s,fnc:u}))},c=>{a.error("error",c),g(c??M.contactSupport)})},m=d.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:c})=>e.jsx("pre",{style:{padding:0,margin:0},children:c.getValue()})}],[]),y=_e({...ke,columns:m,data:i.filter(c=>Fe(c.routine_name,t)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return a.debug(y),o!==""?e.jsx(d.Suspense,{children:e.jsx(Na,{severity:"error",message:o,close:!1})}):n?n&&i.length===0?e.jsx(Pe,{msg:"Database contains no functions"}):e.jsx(Ee,{table:y}):e.jsx(de,{})};var $=(s=>(s.WP="wp",s.LOCAL="local",s.REMOTE="remote",s.SYSTEM="system",s))($||{});const Ba=({setShowFilter:s})=>{const t=H(),r=k(i=>ks(i));a.debug(r);const n=k(i=>ms(i));return a.debug(n),d.useEffect(()=>{localStorage.setItem("ppExplorerSearchDbsTypes",JSON.stringify(r))},[r]),e.jsxs(us,{sx:{position:"absolute",top:"3em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[e.jsx(Hn,{title:"Database filter",sx:{textAlign:"center"}}),e.jsx(xs,{sx:{textAlign:"center",padding:0,borderTop:"1px solid #eee",borderBottom:"1px solid #eee"},children:e.jsxs(l,{sx:{display:"inline-grid",textAlign:"left",padding:"2em","& label":{display:"flex",alignItems:"center"}},children:[e.jsx(Q,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.WP),onChange:(i,o)=>{t(o?$e({dbsType:$.WP}):He({dbsType:$.WP}))}}),"WordPress database"]})}),e.jsx(Q,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.LOCAL),onChange:(i,o)=>{t(o?$e({dbsType:$.LOCAL}):He({dbsType:$.LOCAL}))}}),"Local databases"]})}),e.jsx(Q,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.REMOTE),onChange:(i,o)=>{t(o?$e({dbsType:$.REMOTE}):He({dbsType:$.REMOTE}))}}),"Remote databases"]})}),e.jsx(Q,{children:e.jsxs(se,{children:[e.jsx(pe,{size:"small",checked:r.includes($.SYSTEM),onChange:(i,o)=>{t(o?$e({dbsType:$.SYSTEM}):He({dbsType:$.SYSTEM}))}}),"System databases"]})})]})}),e.jsxs(Un,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(l,{}),e.jsx(G,{variant:"contained",onClick:()=>s(!1),children:"OK"})]})]})},be=({search:s,setSearch:t,addFilter:r})=>{a.debug(s,r);const[n,i]=d.useState(!1);return e.jsxs(l,{sx:{position:"relative"},children:[e.jsx(re,{value:s,type:"search",onChange:o=>{t(o.target.value)},onClick:o=>{o.stopPropagation()},onKeyDown:o=>{o.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(Is,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(bn,{})}),endAdornment:e.jsx(e.Fragment,{children:r&&e.jsx(Is,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(ne,{onClick:()=>{i(!n)},children:e.jsx(yn,{})})})})}}),n&&e.jsx(Ba,{setShowFilter:i})]})},Va=(s,t)=>{const r=k(n=>Ft(n,s,t));return a.debug("allTablesSelected",r),r},Ka=(s,t)=>{const r=k(n=>Bt(n,s,t));return a.debug("allViewsSelected",r),r},Re=s=>{const[t,r]=d.useState(localStorage.getItem(s)??""),n=i=>{r(i),localStorage.setItem(s,i)};return a.debug(t),{search:t,setSearch:n}},is=()=>{const s=k(t=>Ps(t));return a.debug(s),s},Wa=d.memo(({dbs:s})=>{a.debug(s);const t=H(),[r,n]=d.useState(!1),{search:i,setSearch:o}=Re(`ppExplorerSearchTables-${s}`);a.debug(r,i);const[g,x]=d.useState(!1),{search:m,setSearch:y}=Re(`ppExplorerSearchViews-${s}`);a.debug(g,m);const[c,u]=d.useState(!1),{search:C,setSearch:j}=Re(`ppExplorerSearchProcedures-${s}`);a.debug(c,C);const[S,I]=d.useState(!1),{search:w,setSearch:A}=Re(`ppExplorerSearchFunctions-${s}`);a.debug(S,w);const N=Va(s,i),z=Ka(s,m),[L,F]=d.useState("");a.debug(L);const O=is();return e.jsxs(e.Fragment,{children:[e.jsx(te,{itemId:s+"-tables",className:"pp-data-exporer-table-tree-item "+L,onClickCapture:T=>{var B,R;!(T.target instanceof HTMLInputElement)&&!(T.target instanceof HTMLAnchorElement)&&!((B=T.target.closest("span"))!=null&&B.classList.contains("pp-select-all-tables"))&&((R=T.target.closest("li"))!=null&&R.classList.contains("pp-data-exporer-table-tree-item"))&&(F(L===""?"hide-details":""),r?T.stopPropagation():(n(!0),F("")))},sx:{padding:0,minWidth:0,"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:r&&L===""?0:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[r&&L===""?e.jsx(pe,{size:"small",className:"pp-select-all-tables",checked:N,onClick:T=>{t(As({dbs:s,isSelected:!N,search:i})),T.stopPropagation()},sx:{marginLeft:"-12px"}}):e.jsx(Ws,{}),e.jsxs("span",{style:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"Tables"}),e.jsx("span",{style:{fontSize:"90%"},children:O[s].tablesLoaded===!0?"("+O[s].tables.length+"/"+O[s].tablesSelected.length+")":""})]})]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:T=>{t(ze({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:r&&L===""&&e.jsx(be,{search:i,setSearch:o})})]}),children:e.jsx(Ma,{dbs:s,search:i})}),e.jsx(te,{itemId:s+"-views",onClick:()=>{x(!g)},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:g?0:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[g?e.jsx(pe,{size:"small",checked:z,onClick:T=>{t(Ls({dbs:s,isSelected:!z,search:m})),T.stopPropagation()},sx:{marginLeft:"-12px"}}):e.jsx(Gs,{}),e.jsxs("span",{style:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"Views"}),e.jsx("span",{style:{fontSize:"90%"},children:O[s].viewsLoaded===!0?"("+O[s].views.length+"/"+O[s].viewsSelected.length+")":""})]})]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:T=>{t(Ze({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:g&&e.jsx(be,{search:m,setSearch:y})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Oa,{dbs:s,search:m})}),e.jsx(te,{itemId:s+"-procedures",onClick:()=>{u(!c)},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[e.jsx(Ks,{}),e.jsxs("span",{style:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"Stored Procedures"}),e.jsx("span",{style:{fontSize:"90%"},children:O[s].proceduresLoaded===!0?"("+O[s].procedures.length+")":""})]})]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:T=>{t(Vt({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:c&&e.jsx(be,{search:C,setSearch:j})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Da,{dbs:s,search:C})}),e.jsx(te,{itemId:s+"-functions",onClick:()=>{I(!S)},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center",margin:"0 8px 0 4px"},children:[e.jsx(zn,{}),e.jsxs("span",{style:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"center",gap:"5px"},children:[e.jsx("span",{children:"Functions"}),e.jsx("span",{style:{fontSize:"90%"},children:O[s].functionsLoaded===!0?"("+O[s].functions.length+")":""})]})]}),e.jsxs(l,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(l,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(fe,{underline:"none",onClick:T=>{t(Kt({dbs:s})),T.preventDefault(),T.stopPropagation()},children:"Refresh"})]})]}),e.jsx(l,{children:S&&e.jsx(be,{search:w,setSearch:A})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Fa,{dbs:s,search:w})})]})}),Ga=()=>{const s=k(t=>Wt(t));return a.debug("countSelectedTables",s),s},$a=()=>{const s=k(t=>Gt(t));return a.debug("hasBulkActions",s),s},Ha=()=>{const s=k(t=>$t(t));return a.debug("countSelectedViews",s),s};function Ua(s){const t=d.useRef(null);return e.jsx(Yn,{nodeRef:t,handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:e.jsx(ps,{ref:t,...s})})}const gs=s=>{const{title:t,message:r,open:n,setOpen:i,onConfirm:o}=s;return e.jsxs(ta,{open:n,onClose:()=>i(!1),PaperComponent:Ua,"aria-labelledby":"confirm-dialog",children:[e.jsx(qn,{style:{marginTop:"10px",cursor:"move"},id:"draggable-dialog-title",children:t}),e.jsx(na,{children:e.jsx(Qn,{component:"div",children:r})}),e.jsx(aa,{sx:{marginRight:"15px",marginBottom:"15px"},children:e.jsx(G,{variant:"contained",onClick:()=>{i(!1),o!==void 0&&o()},children:"OK"})})]})},Ys=()=>{const s=k(t=>Ht(t));return a.debug("context",s),s},qa=(s,t,r,n,i,o=!1)=>{a.debug(s,t,r),Be(we.appUrlActionRename,{dbs:s,from_tbl:t,to_tbl:r},n,i,o)},Qa=(s,t,r,n,i,o,g,x=!1)=>{a.debug(s,t,r,n,i),Be(we.appUrlActionCopy,{from_dbs:s,to_dbs:t,from_tbl:r,to_tbl:n,copy_data:i},o,g,x)},Js=(s,t,r,n,i=!1)=>{a.debug(s,t),Be(we.appUrlActionTruncate,{dbs:s,tbl:t},r,n,i)},Xs=(s,t,r,n,i,o=!1)=>{a.debug(s,t,r),Be(we.appUrlActionDrop,{dbs:s,tbl:t,typ:r},n,i,o)},Ya=(s,t,r,n,i=!1)=>{a.debug(s);const o=new FormData;o.append("dbs",s),Object.keys(t).map(g=>{o.append("file"+g,t[g])}),Be(we.appUrlActionImport,o,r,n,i)},Le={export:"Export table(s)",truncate:"Truncate table(s)",drop:"Drop table(s)/view(s)"},Ja=()=>{const s=H(),t=$a(),r=Ga(),n=Ha(),i=Ys(),[o,g]=d.useState({}),[x,m]=d.useState("*"),[y,c]=d.useState(null),[u,C]=d.useState(!1),[j,S]=d.useState(!1),[I,w]=d.useState(!1);d.useEffect(()=>{r===0&&(x==="export"||x==="truncate")&&m("*")},[r]);const A={vertical:"top",horizontal:"right"},N=()=>{const b=Ps(ds.getState()),h={};return b==null?{}:(Object.keys(b).map(f=>{b[f].tablesSelected.map(v=>{h[f]===void 0&&(h[f]={}),h[f][v]={status:null,typ:W.TABLE}}),x==="drop"&&b[f].viewsSelected.map(v=>{h[f]===void 0&&(h[f]={}),h[f][v]={status:null,typ:W.VIEW}})}),h)},z=(b,h,f)=>{const v={...o};h==="*"?Object.keys(v[b]).map(E=>v[b][E].status=f):v[b][h].status=f,g(v)},L=()=>{Object.keys(o).length>0&&Object.keys(o).map(b=>{window.document.getElementById(`pp-export-tables-${b}`).submit(),z(b,"*",!0)})},F=()=>{Object.keys(o).length>0&&Object.keys(o).map(b=>{Object.keys(o[b]).map(h=>{Js(b,h,f=>{a.debug(f),(f==null?void 0:f.code)==="ok"&&(f==null?void 0:f.message)!==void 0?z(b,h,!0):z(b,h,!1)},f=>{a.error("error",b,h,f),z(b,h,!1)})})})},O=()=>{Object.keys(o).length>0&&Object.keys(o).map(b=>{Object.keys(o[b]).map(h=>{Xs(b,h,o[b][h].typ,f=>{a.debug(f),(f==null?void 0:f.code)==="ok"&&(f==null?void 0:f.message)!==void 0?z(b,h,!0):z(b,h,!1)},f=>{a.error("error",f),z(b,h,!1)})})})},T=b=>e.jsxs(Fs,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(Bs,{children:e.jsxs(ss,{children:[e.jsx(ee,{children:"Database"}),e.jsx(ee,{children:"Table | View"}),e.jsx(ee,{children:"Status"})]})}),e.jsx(Vs,{children:Object.keys(b).map(h=>Object.keys(b[h]).map((f,v)=>{var E,_;return e.jsxs(ss,{children:[e.jsx(ee,{children:v===0?h:null}),e.jsx(ee,{children:f}),e.jsxs(ee,{children:[b[h][f]===null&&e.jsx(Sn,{style:{display:"block",margin:"0 auto"}}),b[h][f].status===!0&&e.jsx(Rs,{color:(E=ae)==null?void 0:E.palette.success.main,style:{display:"block",margin:"0 auto"}}),b[h][f].status===!1&&e.jsx(Os,{color:(_=ae)==null?void 0:_.palette.error.main,style:{display:"block",margin:"0 auto"}})]})]},v)}))})]}),B=()=>e.jsx(l,{children:T(o)}),R=()=>{const b=N();return g(b),e.jsxs(l,{children:[T(b),(x==="truncate"||x==="drop")&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{style:{marginTop:"20px"}}),e.jsx(l,{sx:{marginTop:"20px",marginBottom:"20px"},children:x==="drop"?e.jsx("span",{children:"Deletes views and tables with all data permanently."}):e.jsx("span",{children:"Deletes all data permanently."})}),e.jsx(l,{children:e.jsx("strong",{children:"This actions cannot be undone!"})}),e.jsxs(l,{children:["'",e.jsx("strong",{children:"NO"}),"' to stop, '",e.jsx("strong",{children:"YES"}),"' to continue."]}),e.jsxs(l,{sx:{marginTop:"20px",fontSize:"80%",display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[e.jsx(Tn,{}),e.jsxs("span",{children:["Does not ",x," WordPress tables"]})]})]})]})};return t?e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"pp-bulk-actions-container",color:"inherit",position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(rs,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(Q,{variant:"standard",sx:{minWidth:200},children:e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},value:x,onChange:b=>{m(b.target.value)},children:[e.jsx(K,{value:"*",children:"Bulk actions"}),e.jsx(K,{value:"export",disabled:r===0,children:Le.export}),e.jsx(K,{value:"truncate",disabled:r===0,children:Le.truncate}),e.jsx(K,{value:"drop",children:Le.drop})]})}),e.jsx(G,{variant:"contained",onClick:()=>{x!=="*"?(c(R()),C(!0)):S(!0)},children:"Apply"})]}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsx(Ss,{badgeContent:r,color:"info",anchorOrigin:A,children:e.jsx(Ws,{color:"action",size:20})}),e.jsx(Ss,{badgeContent:n,color:"info",anchorOrigin:A,children:e.jsx(Gs,{color:"action",size:20})})]})]})}),x==="export"&&Object.keys(o).map(b=>e.jsxs("form",{id:"pp-export-tables-"+b,action:i.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:b}),Object.keys(o[b]).map(h=>e.jsx("input",{type:"hidden",name:"table_names[]",value:h},h)),e.jsx("input",{type:"hidden",name:"_wpnonce",value:i.wp.nonce.split("-")[0]})]},"pp-export-tables-"+b)),e.jsx(gs,{title:"Apply bulk action",message:"No bulk action selected",open:j,setOpen:S}),e.jsx(xe,{title:Le[x],message:y,open:u,setOpen:C,onConfirm:()=>{switch(w(!0),x){case"export":L();break;case"truncate":F();break;case"drop":O()}}}),e.jsx(gs,{title:Le[x],message:B(),open:I,setOpen:w,onConfirm:()=>{Object.keys(o).map(b=>{s(ze({dbs:b})),s(As({dbs:b,isSelected:!1,search:""})),s(Ze({dbs:b})),s(Ls({dbs:b,isSelected:!1,search:""}))})}})]}):null},Xa=({setCanImport:s})=>{var B,R,b;const t=Ys(),r=is(),[n,i]=d.useState(""),[o,g]=d.useState("");d.useEffect(()=>{if(r!=null&&Object.keys(r).length>0){const h=Object.keys(r).filter(f=>r[f].dbsType===$.WP);(h==null?void 0:h.length)>0&&i(h[0])}},[r]);const x=d.useRef(null),[m,y]=d.useState(null),c=(B=t==null?void 0:t.wp)!=null&&B.zip?".sql,.zip":".sql",u=(R=t==null?void 0:t.wp)!=null&&R.zip?"SQL and ZIP":"SQL",C=(b=t==null?void 0:t.wp)==null?void 0:b.upload,[j,S]=d.useState(!1),[I,w]=d.useState(null),[A,N]=d.useState(!1),[z,L]=d.useState(""),[F,O]=d.useState(null),T=h=>e.jsx(e.Fragment,{children:e.jsxs(Fs,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(Bs,{children:e.jsxs(ss,{children:[e.jsx(ee,{children:"Import file"}),e.jsx(ee,{children:"Message"}),e.jsx(ee,{children:"Status"})]})}),e.jsx(Vs,{children:h.map(f=>Object.keys(f).map(v=>{var E,_;return e.jsxs(ss,{children:[e.jsx(ee,{sx:{verticalAlign:"text-top"},children:v}),e.jsxs(ee,{sx:{verticalAlign:"text-top"},children:[f[v].msg,f[v].errors.map(U=>{var D;return e.jsx("ul",{style:{listStyle:"disc",padding:"0 40px"},children:e.jsx("li",{style:{color:(D=ae)==null?void 0:D.palette.error.main},children:U})})})]}),e.jsx(ee,{sx:{verticalAlign:"text-top"},children:f[v].status==="error"?e.jsx(Os,{color:(E=ae)==null?void 0:E.palette.error.main,style:{display:"block",margin:"0 auto"}}):e.jsx(Rs,{color:(_=ae)==null?void 0:_.palette.success.main,style:{display:"block",margin:"0 auto"}})})]},v)}))})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"pp-import-container",sx:{position:"relative","& > .tooltip":{position:"absolute",top:"10px",right:"10px",zIndex:999}},children:[e.jsx(Xe,{title:"Close",position:"bottom",children:e.jsx(ne,{onClick:()=>{x.current&&(x.current.value=""),g(""),s(!1)},size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(zs,{})})}),e.jsx(as,{className:"pp-import-container",color:"inherit",position:"relative",elevation:4,sx:{display:"grid",alignItems:"center",margin:"0 0 5px 0"},children:e.jsxs(rs,{sx:{display:"grid",gap:"10px",alignItems:"center",height:"max-content",paddingTop:"50px",paddingBottom:"30px"},children:[e.jsx(e.Fragment,{children:e.jsxs(l,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"start",alignItems:"center",gap:"15px"},children:[e.jsx(l,{children:e.jsxs(Q,{sx:{minWidth:"300px"},children:[e.jsx(ts,{variant:"outlined",children:"Select destination database"}),e.jsx(Te,{MenuProps:{id:"pp-select-menu"},label:"Select destination database",value:n,onChange:h=>{i(h.target.value)},children:r!=null&&Object.keys(r).map(h=>{const f=r[h].dbsType===$.WP?h+" (WordPress database)":h;return e.jsx(K,{value:h,children:f},h)})})]})}),e.jsx(l,{children:e.jsx("form",{children:e.jsxs(G,{component:"label",variant:"outlined",startIcon:e.jsx(Cn,{}),children:["Select file(s)",e.jsx(re,{type:"file",inputProps:{accept:c,multiple:!0},onChange:h=>{const f=h.target.files;y(f);const v=Object.keys(f).map(E=>f[E].name).toString();g(v)},InputProps:{inputRef:x},sx:{display:"none"}})]})})}),o!==""&&e.jsx(e.Fragment,{children:e.jsx(l,{children:e.jsx(G,{component:"label",variant:"contained",startIcon:e.jsx(vn,{}),onClick:()=>{w(e.jsxs(l,{children:[e.jsxs(l,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Selected file(s): ",e.jsx("strong",{children:o})]}),e.jsxs(l,{children:["Selected database: ",e.jsx("strong",{children:n})]}),e.jsxs(l,{sx:{marginTop:"20px",fontSize:"80%"},children:[e.jsx("strong",{children:"NOTE"}),"Â  You can work on other tasks while your import is performed in the background."]})]})),S(!0)},children:"Import file(s)"})})})]})}),o!==""&&e.jsxs(l,{sx:{marginTop:"20px",marginBottom:"10px",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",fontWeight:"bold"},children:["Selected file(s): ",o]}),e.jsxs("fieldset",{className:"pp-fieldset",style:{marginTop:"5px",padding:"10px 30px",minWidth:0},children:[e.jsx("legend",{children:"IMPORTANT"}),e.jsxs("ul",{style:{paddingLeft:"15px",listStyle:"disc",padding:"0 40px"},children:[e.jsx("li",{children:"Supports multiple file uploads simultaneously."}),e.jsxs("li",{children:["Server supports ",u," file types."]}),e.jsxs("li",{children:["Maximum supported file size on this server is ",C,"."]}),e.jsx("li",{children:"Add a ; and a new line character at the end of every SQL statement."})]})]})]})})]}),e.jsx(xe,{title:"Import selected file(s)?",message:I,open:j,setOpen:S,onConfirm:()=>{Ya(n,m,h=>{var f;if(h!=null&&h.message&&((f=h==null?void 0:h.context)!=null&&f.imported)&&Array.isArray(h.context.imported)){const v=h.context.imported;N(!0),L(h.message),O(T(v))}else P(M.contactSupport,{variant:"error"})},h=>{a.error("error",h),P(M.contactSupport,{variant:"error"})})}}),e.jsx(gs,{title:z,message:F,open:A,setOpen:N,onConfirm:()=>{g(""),s(!1)}})]})};const Es=d.lazy(()=>ie(()=>import("./Alert-1.0.17-27b19721.js"),["./Alert-1.0.17-27b19721.js","./main-1.0.17.js","./index.esm-1.0.17-7de921eb.js","./iconBase-1.0.17-8d991e6c.js","./AlertTitle-1.0.17-4b186927.js","./createSvgIcon-1.0.17-f0c1dc0a.js","./useSlot-1.0.17-ca7553c5.js","./Close-1.0.17-6c546366.js"],import.meta.url)),Za=()=>{var O;const s=H(),t=d.useRef(null),{search:r,setSearch:n}=Re("ppExplorerSearch"),i=is(),o=k(T=>Ut(T));a.debug(o);const g=k(T=>hs(T));a.debug(g);const x=k(T=>ks(T));a.debug(x);const[m,y]=d.useState("");d.useEffect(()=>{window.ppActionEnableImport=(T=!0)=>{w(T)},c()},[]);const c=()=>{let T=[];const B=localStorage.getItem("ppExplorerSearchDbsTypes");B!=null&&B!==""?T=JSON.parse(B):T=[$.WP,$.LOCAL,$.REMOTE],un(R=>{const b=R==null?void 0:R.data;a.debug("response data",b);const h=[],f={};b.map(_=>{h.push({dbs:_.dbs,dbsType:_.dbs_type,pdsDbs:_.pds}),f[_.dbs]=!1}),C(f),h.sort((_,U)=>{var D,J,q,oe;return((D=_==null?void 0:_.dbs)==null?void 0:D.toLocaleLowerCase())>((J=U==null?void 0:U.dbs)==null?void 0:J.toLocaleLowerCase())?1:((q=U==null?void 0:U.dbs)==null?void 0:q.toLocaleLowerCase())>((oe=_==null?void 0:_.dbs)==null?void 0:oe.toLocaleLowerCase())?-1:0}),a.debug(h),s(qt({dbs:h,dbsTypes:T}));const v={};b.map(_=>{v[_.dbs]=_.dbs_type}),s(Qt({dbs:v}));const E=R.context;a.debug("context",E),s(Yt({context:E}))},R=>{a.error("error",R),y(R??M.contactSupport)})},[u,C]=d.useState({}),[j,S]=d.useState(!0),[I,w]=d.useState(!1),A=()=>e.jsx(je,{title:"Import data or execute scripts",children:e.jsx(ne,{sx:{color:"inherit"},onClick:()=>{w(!I)},children:e.jsx(wn,{})})}),N=()=>e.jsx(ne,{onClick:()=>{F(L==="large"?"medium":L==="medium"?"small":"large")},sx:{color:"#fff"},children:L==="small"?e.jsx(_n,{}):L==="medium"?e.jsx(En,{}):e.jsx(kn,{})}),z=localStorage.getItem("ppDataExplorerDensity"),[L,F]=d.useState(z==="large"||z==="medium"?z:"small");return d.useEffect(()=>{localStorage.setItem("ppDataExplorerDensity",L)},[L]),m!==""?e.jsx(d.Suspense,{children:e.jsx(Es,{severity:"error",message:m,close:!1})}):e.jsxs(l,{className:"pp-sub-container-explorer",sx:{width:"100%"},children:[e.jsx(as,{className:"pp-explorer-header",elevation:4,position:"relative",sx:{margin:"0 0 5px 0"},children:e.jsx(rs,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"0 !important"},children:((O=we.appOrig)==null?void 0:O.appTarget)==="backend"?e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto auto",justifyContent:"end",alignItems:"center",gridGap:"10px"},children:[N(),e.jsx(l,{sx:{textAlign:"right"},children:"Search & Filter"}),e.jsx(be,{search:r,setSearch:n,addFilter:!0})]}):e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto 1fr",justifyContent:"space-between",alignItems:"center",gridGap:"10px"},children:[e.jsx(l,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Data Explorer"}),e.jsx(l,{children:A()}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"end",alignItems:"center",gap:"10px"},children:[N(),e.jsx(be,{search:r,setSearch:n,addFilter:!0})]})]})})}),e.jsx(Ja,{}),I&&e.jsx(Xa,{setCanImport:w}),i==null?e.jsx(l,{sx:{padding:"30px"},children:e.jsx(js,{title:"Loading..."})}):e.jsxs(e.Fragment,{children:[o!==""&&e.jsx(ps,{sx:{marginBottom:"5px"},elevation:4,children:e.jsx(d.Suspense,{children:e.jsx(Es,{severity:"error",message:o,close:!0,setClose:()=>{s(Ms({error:""}))}})})}),e.jsx(ps,{className:"pp-data-exporer",elevation:4,children:e.jsx(Vn,{className:"pp-data-exporer-database-tree pp-density-"+L,"aria-label":"Data Explorer",sx:{display:"grid",gridGap:"0","& li.MuiTreeItem-root:first-of-type li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:0,borderTopRightRadius:0}},children:Object.keys(i).map(T=>{var R;if(x.includes(g[T])===!1||r!==""&&!Fe(T,r))return null;const B=((R=g[T])==null?void 0:R.toLocaleLowerCase())==="wp"?T+" (WordPress database)":T;return e.jsx(te,{ref:t,slots:{expandIcon:ce,collapseIcon:j?ce:In},itemId:T,className:"pp-data-exporer-database-tree-item hide-details",onClickCapture:b=>{var h,f,v,E;if((h=b.target.closest("li"))!=null&&h.classList.contains("pp-data-exporer-database-tree-item"))if((f=b.target.closest("li"))!=null&&f.classList.contains("hide-details")?((v=b.target.closest("li"))==null||v.classList.remove("hide-details"),S(!1)):((E=b.target.closest("li"))==null||E.classList.add("hide-details"),S(!0)),u[T])b.stopPropagation();else{const _=u;_[T]=!0,C(_)}},sx:{padding:"0","&:first-of-type":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px",overflow:"hidden"},"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[e.jsx(Rn,{}),B]}),children:e.jsx(Wa,{dbs:T})},T)})})})]})]})},er=()=>{const s=k(t=>ms(t));return a.debug(s),e.jsx(e.Fragment,{children:s!==void 0&&s.action===ue.EXPLORE&&e.jsx(ra,{appId:Pn(),dbs:s.dbs,tbl:s.tbl,exploring:!0})})},sr=({dbs:s,tbl:t})=>{a.debug(s,t);const[r,n]=d.useState(!1),[i,o]=d.useState(void 0),g=()=>{switch(i){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{disableGutters:!0,children:[e.jsx(ve,{expandIcon:e.jsx(ce,{}),children:"Reset"}),e.jsx(Ie,{children:e.jsxs(Q,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{o(cs.TABLE),n(!0)},children:"Reset Table Builder"}),e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{o(cs.FORM),n(!0)},children:"Reset Form Builder"}),e.jsx(G,{variant:"contained",color:"primary",onClick:()=>{o(cs.THEME),n(!0)},children:"Reset Theme"}),e.jsxs(ge,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},error:!0,children:[e.jsx(Ds,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(xe,{title:g(),message:"Are you sure? This action cannot be undone!",open:r,setOpen:n,onConfirm:()=>{i!==void 0&&ia(oa.GLOBAL,i,s,t,null,null,x=>{if(x!=null&&x.code&&(x==null?void 0:x.message)!==void 0)switch(x.code){case"ok":P(x.message,{variant:"success"});break;case"info":P(x.message,{variant:"info"});break;default:P(x.message??M.contactSupport,{variant:"error"})}else a.error(x),P(M.contactSupport,{variant:"error"})},x=>{a.error("error",x),P(x??M.contactSupport,{variant:"error"})})}})]})},tr=({dbs:s,tbl:t,setIsUpdated:r})=>{a.debug(s,t);const n=H(),i=k(g=>ye(g));a.debug(i);const o=g=>{const x={...i,table_settings:{...i.table_settings,hyperlink_definition:g}};n(Je({settings:x})),r(!0)};return e.jsxs(Ce,{disableGutters:!0,children:[e.jsx(ve,{expandIcon:e.jsx(ce,{}),children:"Table Settings"}),e.jsx(Ie,{children:e.jsxs(Q,{children:[e.jsx(se,{children:"Process hyperlink columns as"}),e.jsxs(Hs,{sx:{marginTop:"10px",marginBottom:"10px"},children:[e.jsxs(se,{className:"align-label-radio",children:[e.jsx(ns,{checked:i.table_settings.hyperlink_definition==="json",onChange:g=>{o("json"),g.stopPropagation()}}),"Preformatted JSON"]}),e.jsxs(se,{children:[e.jsx(ns,{checked:i.table_settings.hyperlink_definition==="text",onChange:g=>{o("text"),g.stopPropagation()}}),"Plain text"]})]}),e.jsx(ge,{children:"Preformatted JSON supports individual label and target settings. Plain text converts column content to a hyperlink link."})]})})]})},nr=({dbs:s,tbl:t,setIsUpdated:r})=>{var u;a.debug(s,t);const n=H(),i=k(C=>Jt(C));a.debug(i);const o=k(C=>ye(C));a.debug(o);const[g,x]=d.useState(""),m=(C,j)=>{const S={...o,list_labels:{...o.list_labels,[C]:j}};n(Je({settings:S})),r(!0)},y=(C,j)=>{const S={...o,form_labels:{...o.form_labels,[C]:j}};n(Je({settings:S})),r(!0)},c=(C,j)=>{const S={...o,column_media:{...o.column_media,[C]:j}};n(Je({settings:S})),r(!0)};return e.jsxs(Ce,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ve,{expandIcon:e.jsx(ce,{}),children:"Column Settings"}),e.jsx(Ie,{children:e.jsxs(Q,{fullWidth:!0,children:[e.jsx(l,{sx:{display:"grid",gridGap:"10px",marginBottom:"20px"},children:e.jsxs(l,{children:[...(u=i==null?void 0:i.columns)==null?void 0:u.map((C,j)=>{const S=C.column_name;return e.jsxs(Ce,{expanded:g===S,onChange:()=>{x(g===S?"":S)},sx:{"&.MuiPaper-root.MuiPaper-elevation.Mui-expanded":{margin:0}},children:[e.jsx(ve,{expandIcon:e.jsx(ce,{}),children:C.column_name}),e.jsxs(Ie,{sx:{display:"grid",gridGap:"10px"},children:[e.jsx(re,{label:"Table label",value:o.list_labels[S],variant:"outlined",onChange:I=>{m(S,I.target.value)}}),e.jsx(re,{label:"Form label",value:o.form_labels[S],variant:"outlined",onChange:I=>{y(S,I.target.value)}}),e.jsxs(Q,{children:[e.jsx(ts,{id:"media_type_label"+j,variant:"outlined",children:"Media type"}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},labelId:"media_type_label"+j,id:"media_type"+j,label:"Media type",value:o.column_media[S]??"",variant:"outlined",onChange:I=>{c(S,I.target.value),I.stopPropagation()},children:[e.jsx(K,{value:"",children:"Â "},""),e.jsx(K,{value:"Attachment",children:"Attachment"},"Attachment"),e.jsx(K,{value:"Audio",children:"Audio"},"Audio"),e.jsx(K,{value:"Hyperlink",children:"Hyperlink"},"Hyperlink"),e.jsx(K,{value:"Image",children:"Image"},"Image"),e.jsx(K,{value:"ImageURL",children:"ImageURL"},"ImageURL"),e.jsx(K,{value:"Video",children:"Video"},"Video")]})]})]})]})})]})}),e.jsx(ge,{children:"Default column labels and column media types"})]})})]})};var Y=(s=>(s.SELECT="select",s.INSERT="insert",s.UPDATE="update",s.DELETE="delete",s))(Y||{}),Oe=(s=>(s.GET="GET",s.POST="POST",s))(Oe||{});const Ye=({restApi:s,action:t,roles:r,users:n,setRestApi:i,expanded:o,setExpanded:g})=>{a.debug(s,t,r,n,o);const x=(j,S)=>{const I=la(s);if(S)I.methods.push(j);else{const w=I.methods.indexOf(j);w>-1&&I.methods.splice(w,1)}a.debug(j,S,I),i(I)},m=j=>{a.debug(j),i({...s,authorization:j})},y=j=>{a.debug(j),i({...s,authorized_roles:j.map(S=>S.key)})},c=j=>{a.debug(j),i({...s,authorized_users:j.map(S=>S.key)})},u=d.useMemo(()=>r.filter(j=>s.authorized_roles.includes(j.key)),[s.authorized_roles,r]),C=d.useMemo(()=>n.filter(j=>s.authorized_users.includes(j.key)),[s.authorized_users,n]);return e.jsxs(Ce,{disableGutters:!0,expanded:o===t.toString(),onChange:()=>{o===t.toString()?g(""):g(t)},children:[e.jsx(ve,{expandIcon:e.jsx(ce,{}),sx:{textTransform:"capitalize"},children:t}),e.jsx(Ie,{children:e.jsxs(l,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(se,{children:"Supported HTTP methods"}),e.jsxs(l,{children:[e.jsx(Ne,{control:e.jsx(De,{checked:s.methods.includes(Oe.GET),onChange:(j,S)=>{x(Oe.GET,S),j.stopPropagation()}}),label:"GET",labelPlacement:"end"}),e.jsx(Ne,{control:e.jsx(De,{checked:s.methods.includes(Oe.POST),onChange:(j,S)=>{x(Oe.POST,S),j.stopPropagation()}}),label:"POST",labelPlacement:"end"})]}),e.jsx(se,{children:"Authorization"}),e.jsxs(Q,{sx:{marginLeft:"-10px"},children:[e.jsxs(Hs,{children:[e.jsxs(se,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(ns,{checked:s.authorization===Ae.AUTHORIZED,onChange:j=>{m(Ae.AUTHORIZED),j.stopPropagation()}}),"Authorized access only"]}),e.jsxs(l,{sx:{display:"grid",gridGap:"10px",margin:"20px 10px 20px 42px"},children:[e.jsx(Cs,{multiple:!0,disableCloseOnSelect:!0,options:r,getOptionLabel:j=>j.value,value:u,onChange:(j,S)=>{y(S)},renderInput:j=>e.jsx(re,{...j,label:"Roles"}),renderTags:(j,S)=>j.map((I,w)=>{const{key:A,...N}=S({index:w});return e.jsx(vs,{variant:"outlined",label:I.value,...N},A)})}),e.jsx(Cs,{multiple:!0,disableCloseOnSelect:!0,options:n,getOptionLabel:j=>j.value,value:C,onChange:(j,S)=>{c(S)},renderInput:j=>e.jsx(re,{...j,label:"Users"}),renderTags:(j,S)=>j.map((I,w)=>{const{key:A,...N}=S({index:w});return e.jsx(vs,{variant:"outlined",label:I.value,...N},A)})})]}),e.jsxs(se,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(ns,{checked:s.authorization===Ae.ANONYMOUS,onChange:j=>{m(Ae.ANONYMOUS),j.stopPropagation()}}),"Anonymous access"]})]}),s.authorization===Ae.ANONYMOUS&&s.methods.length>0&&e.jsxs(l,{sx:{marginTop:"10px",marginLeft:"10px"},children:[(t===Y.INSERT||t===Y.UPDATE||t===Y.DELETE)&&e.jsx(ge,{children:"This setting allows non-authorized users to modify this table"}),t===Y.SELECT&&e.jsx(ge,{children:"This setting allows non-authorized users to query this table"})]})]})]})})]})},ar=({dbs:s,tbl:t,typ:r,metaData:n,setIsUpdated:i})=>{var C,j,S,I;a.debug(s,t,r,n);const o=H(),g=k(w=>ye(w));a.debug(g);const x=k(w=>hs(w));a.debug(x);const[m,y]=d.useState(""),c=[];if(((j=(C=n==null?void 0:n.settings)==null?void 0:C.wp)==null?void 0:j.roles)!==void 0)for(const w in n.settings.wp.roles)c.push({key:w,value:n.settings.wp.roles[w]});a.debug(c);const u=[];if(((I=(S=n==null?void 0:n.settings)==null?void 0:S.wp)==null?void 0:I.users)!==void 0)for(const w in n.settings.wp.users)u.push({key:w,value:n.settings.wp.users[w]});return a.debug(u),e.jsxs(Ce,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ve,{expandIcon:e.jsx(ce,{}),children:"REST API"}),e.jsx(Ie,{children:e.jsxs(l,{children:[e.jsx(Ne,{control:e.jsx(De,{checked:g.rest_api!==null,onClick:w=>{g.rest_api!==null?o(Xt({})):o(Zt({})),i(!0),w.stopPropagation()}}),label:"Enable REST API",labelPlacement:"end"}),g.rest_api!==null&&e.jsxs(l,{sx:{marginTop:"20px"},children:[e.jsx(Ye,{restApi:g.rest_api.select,action:Y.SELECT,roles:c,users:u,setRestApi:w=>{const A={...g.rest_api};A[Y.SELECT]=w,o(Ue({rest_api:A})),i(!0)},expanded:m,setExpanded:y}),e.jsx(Ye,{restApi:g.rest_api.insert,action:Y.INSERT,roles:c,users:u,setRestApi:w=>{const A={...g.rest_api};A[Y.INSERT]=w,o(Ue({rest_api:A})),i(!0)},expanded:m,setExpanded:y}),e.jsx(Ye,{restApi:g.rest_api.update,action:Y.UPDATE,roles:c,users:u,setRestApi:w=>{const A={...g.rest_api};A[Y.UPDATE]=w,o(Ue({rest_api:A})),i(!0)},expanded:m,setExpanded:y}),e.jsx(Ye,{restApi:g.rest_api.delete,action:Y.DELETE,roles:c,users:u,setRestApi:w=>{const A={...g.rest_api};A[Y.DELETE]=w,o(Ue({rest_api:A})),i(!0)},expanded:m,setExpanded:y})]}),x[s]==="system"||x[s]==="wp"&&n.settings.wp.tables.includes(t)&&e.jsxs(ge,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",marginTop:"20px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(Ds,{}),"We discourage enabling REST API services for WordPress and system tables"]})]})})]})},rr=({dbs:s,tbl:t,typ:r,metaData:n})=>{var D,J,q,oe,Ve,me,Ke,We;a.debug(s,t,r,n);const i=H(),[o,g]=d.useState("sql"),[x,m]=d.useState(!0),[y,c]=d.useState(""),[u,C]=d.useState(s),[j,S]=d.useState(""),[I,w]=d.useState(!0),[A,N]=d.useState(!1),[z,L]=d.useState(!1),[F,O]=d.useState(!1),[T,B]=d.useState(!1),R=is();a.debug(R);const b=d.useMemo(()=>{const p=[];for(const X in R)p.push(X);return p},[R]);a.debug(b);const h=k(p=>hs(p));a.debug(h);const[f,v]=d.useState(R[s].pdsDbs===!0?((q=(J=(D=n==null?void 0:n.settings)==null?void 0:D.wp)==null?void 0:J.connect)==null?void 0:q.interval)??"":""),[E,_]=d.useState(R[s].pdsDbs===!0?((me=(Ve=(oe=n==null?void 0:n.settings)==null?void 0:oe.wp)==null?void 0:Ve.connect)==null?void 0:me.unit)??"":""),U=p=>{$n.post(n.settings.wp.homea+"?action=wpda_pds_update_interval",p,{headers:{"Content-Type":"multipart/form-data"}}).then(X=>{a.error(p,X)}).catch(X=>{a.error("error",X)})};return e.jsxs(e.Fragment,{children:[e.jsxs(l,{sx:{margin:0,padding:0,"& .pp-action":{display:"grid",gridTemplateColumns:"150px 1fr",alignItems:"center",margin:0,padding:"30px",borderBottom:"1px solid #ddd"},"& .pp-action button":{width:"120px"}},children:[r===W.TABLE&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsxs("form",{action:n.settings.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:s}),e.jsx("input",{type:"hidden",name:"table_names",value:t}),e.jsx("input",{type:"hidden",name:"format_type",value:o}),e.jsx("input",{type:"hidden",name:"include_table_settings",value:o==="sql"&&x?"on":"off"}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.aonce.split("-")[0]}),e.jsx(G,{variant:"contained",type:"submit",children:"Export"})]})}),e.jsxs(l,{sx:{display:"grid"},children:[e.jsxs(Q,{children:[e.jsx(ts,{variant:"outlined",children:"Export to"}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},label:"Export to",value:o,onChange:p=>{g(p.target.value)},children:[e.jsx(K,{value:"sql",children:"SQL"},"sql"),e.jsx(K,{value:"csv",children:"CSV"},"csv"),e.jsx(K,{value:"json",children:"JSON"},"json"),e.jsx(K,{value:"excel",children:"Excel"},"excel"),e.jsx(K,{value:"xml",children:"XML"},"xml")]})]}),e.jsx(Ne,{sx:{visibility:o==="sql"?"visible":"hidden",height:o==="sql"?"auto":0,marginTop:o==="sql"?"10px":0,marginLeft:0},control:e.jsx(De,{checked:x,onClick:p=>{m(!x),p.stopPropagation()}}),label:"With table settings",labelPlacement:"end"})]})]}),h[s]!=="system"&&(h[s]!=="wp"||!n.settings.wp.tables.includes(t))&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{t!==y&&y.trim()!==""?N(!0):P("Nothing to rename",{variant:"error"})},children:"Rename"})}),e.jsx(l,{children:e.jsx(re,{label:r===W.TABLE?"New table name":"New view name",value:y,onChange:p=>{c(p.target.value)},fullWidth:!0})})]}),r===W.TABLE&&e.jsxs(l,{className:"pp-action",children:[e.jsxs(l,{children:[e.jsx(G,{variant:"contained",onClick:()=>{j.trim()!==""?(B(!0),Qa(s,u,t,j,I,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":i(ze({dbs:s})),P(p.message,{variant:"success"});break;case"info":P(p.message,{variant:"info"});break;default:a.error(p),P(p.message??M.contactSupport,{variant:"error"})}else a.error(p),P(M.contactSupport,{variant:"error"});B(!1)},p=>{a.error("error",p),P(p??M.contactSupport,{variant:"error"}),B(!1)})):P("Nothing to rename",{variant:"error"})},children:"Copy"}),e.jsx(Ne,{control:e.jsx(De,{checked:I,onClick:p=>{w(!I),p.stopPropagation()}}),label:"Copy data",labelPlacement:"end",sx:{height:"56px"}}),e.jsx(l,{sx:{display:T?"block":"none","& > div":{marginRight:"30px"},"& span.MuiCircularProgress-root, svg":{height:"20px !important",width:"20px !important"}},children:e.jsx(js,{title:"Copying..."})})]}),e.jsxs(l,{sx:{display:"grid",gridGap:"10px"},children:[e.jsxs(Q,{fullWidth:!0,children:[e.jsx(ts,{variant:"outlined",children:"To database"}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},label:"To database",value:u,onChange:p=>{C(p.target.value)},children:[...b.map(p=>e.jsx(K,{value:p,children:p},p))]})]}),e.jsx(re,{label:"To table name",value:j,onChange:p=>{S(p.target.value)},fullWidth:!0})]})]}),r===W.TABLE&&h[s]!=="system"&&(h[s]!=="wp"||!n.settings.wp.tables.includes(t))&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{L(!0)},children:"Truncate"})}),e.jsxs(l,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx("span",{children:"Deletes all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),h[s]!=="system"&&(h[s]!=="wp"||!n.settings.wp.tables.includes(t))&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{O(!0)},children:"Drop"})}),e.jsxs(l,{sx:{display:"grid",gridGap:"5px"},children:[r==W.VIEW?e.jsx("span",{children:"Deletes view permanently."}):e.jsx("span",{children:"Deletes table and all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),r===W.TABLE&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsxs("form",{method:"POST",action:n.settings.wp.home+"?page=wpda_designer",children:[e.jsx("input",{type:"hidden",name:"action",value:"edit"}),e.jsx("input",{type:"hidden",name:"action2",value:"init"}),e.jsx("input",{type:"hidden",name:"wpda_schema_name",value:s}),e.jsx("input",{type:"hidden",name:"wpda_schema_name_re",value:s}),e.jsx("input",{type:"hidden",name:"wpda_table_name",value:t}),e.jsx("input",{type:"hidden",name:"wpda_table_name_re",value:t}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.alter}),e.jsx("input",{type:"hidden",name:"page_number",value:"1"}),e.jsx("input",{type:"hidden",name:"caller",value:"dataexplorer"}),e.jsx(G,{variant:"contained",type:"submit",children:"ALTER"})]})}),e.jsx(l,{sx:{display:"grid",gridGap:"5px"},children:"Loads table into the Data Designer."})]}),R[s].pdsDbs===!0&&((We=(Ke=n==null?void 0:n.settings)==null?void 0:Ke.wp)==null?void 0:We.connect)!==!1&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(G,{variant:"contained",onClick:()=>{if(f!==""&&f>0&&E!==""){const p=new FormData;p.append("wpnonce",n.settings.wp.refresh),p.append("schema_name",s),p.append("table_name",t),p.append("interval",f.toString()),p.append("unit",E),U(p)}else P("Please enter valid scheduled update values",{variant:"error"})},children:"Refresh"})}),e.jsxs(l,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx(l,{children:"Next scheduled update"}),e.jsxs(l,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyContent:"start",alignItems:"center",gap:"5px"},children:[e.jsx(re,{type:"number",inputProps:{min:0},value:f,autoComplete:"off",onChange:p=>{const X=p.target.value.replaceAll("-","");v(X===""?"":Number(X))}}),e.jsxs(Te,{MenuProps:{id:"pp-select-menu"},value:E,onChange:p=>{_(p.target.value)},children:[e.jsx(K,{value:""}),e.jsx(K,{value:"hour",children:"hour"}),e.jsx(K,{value:"day",children:"day"})]})]}),e.jsx(Q,{children:e.jsx(ge,{children:"Enter and press REFRESH to apply"})})]})]}),n.create!==""&&e.jsxs(l,{className:"pp-action",children:[e.jsx(l,{children:e.jsx(da,{text:n.create,onCopy:()=>{P("SQL was copied to your clipboard",{variant:"info"})},children:e.jsx(je,{title:"Copy SQL to clipboard",children:e.jsx(G,{variant:"contained",endIcon:e.jsx(ca,{}),sx:{display:"flex",alignItems:"flex-start","& svg":{width:"50%"}},children:"SQL"})})})}),e.jsx(l,{sx:{display:"grid",gridGap:"5px"},children:e.jsx(l,{sx:{whiteSpace:"pre-wrap",fontSize:"70%"},children:n.create})})]})]}),e.jsx(xe,{title:`Rename ${r===W.VIEW?"view":"table"}?`,message:"This can affect existing apps using this table!",open:A,setOpen:N,onConfirm:()=>{qa(s,t,y,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":r===W.VIEW?i(Ze({dbs:s})):i(ze({dbs:s})),i(es({})),P(p.message,{variant:"success"});break;case"info":P(p.message,{variant:"info"});break;default:a.error(p),P(p.message??M.contactSupport,{variant:"error"})}else a.error(p),P(M.contactSupport,{variant:"error"})},p=>{a.error("error",p),P(p??M.contactSupport,{variant:"error"})})}}),e.jsx(xe,{title:"Truncate table?",message:"This action cannot be undone!",open:z,setOpen:L,onConfirm:()=>{Js(s,t,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":P(p.message,{variant:"success"});break;case"info":P(p.message,{variant:"info"});break;default:a.error(p),P(p.message??M.contactSupport,{variant:"error"})}else a.error(p),P(M.contactSupport,{variant:"error"})},p=>{a.error("error",p),P(p??M.contactSupport,{variant:"error"})})}}),e.jsx(xe,{title:`Drop ${r===W.VIEW?"view":"table"}?`,message:"This action cannot be undone!",open:F,setOpen:O,onConfirm:()=>{Xs(s,t,r,p=>{if(a.debug(p),p!=null&&p.code&&(p==null?void 0:p.message)!==void 0)switch(p.code){case"ok":r===W.VIEW?i(Ze({dbs:s})):i(ze({dbs:s})),i(es({})),P(p.message,{variant:"success"});break;case"info":P(p.message,{variant:"info"});break;default:a.error(p),P(p.message??M.contactSupport,{variant:"error"})}else a.error(p),P(M.contactSupport,{variant:"error"})},p=>{a.error("error",p),P(p??M.contactSupport,{variant:"error"})})}})]})},ir=({dbs:s,tbl:t,typ:r})=>{var h,f;a.debug(s,t,r);const n=H(),[i,o]=d.useState(ye(ds.getState()));a.debug(i);const[g,x]=d.useState(""),[m,y]=d.useState(!1),[c,u]=d.useState({}),[C,j]=d.useState(!1),[S,I]=d.useState(!1);d.useEffect(()=>{m||w()},[s,t]);const w=()=>{pa(s,t,!0,v=>{var _,U;const E=v==null?void 0:v.data;if(a.debug("response data",s,t,E),(_=E==null?void 0:E.access)!=null&&_.select&&Array.isArray(E.access.select)&&E.access.select.includes("POST")){const D={...E.settings};D.list_labels={...E.table_labels},D.form_labels={...E.form_labels},D.column_media={...E.wp_media},delete D.hyperlinks,delete D.ui,delete D.wp;const J={...E};u(J),n(en({settings:D,metaData:J})),y(!0)}else{let D=M.contactSupport;(U=v==null?void 0:v.data)!=null&&U.message&&(D=v.data.message+" - check console for more information"),a.error(D),x(D)}},v=>{a.error("error",v),x(v??M.contactSupport)})};d.useEffect(()=>{g!==""&&(n(Ms({error:g})),n(bs({})),n(es({})))},[g]);const A=k(v=>ye(v));a.debug(A);const N=((h=ae)==null?void 0:h.palette.mode)===sn.LIGHT?(f=ae)==null?void 0:f.palette.primary.main:"",z=v=>{n(tn({anchor:v}))},L=()=>{n(es({})),n(bs({}))},F=()=>{C?I(!0):L()},O=()=>{const v={...A};let E=!1;xn(s,t,v,_=>{if(_!=null&&_.code&&(_==null?void 0:_.message)!==void 0)switch(_.code){case"ok":P(_.message,{variant:"success"});break;case"info":P(_.message,{variant:"info"});break;default:a.error(_),P(_.message??M.contactSupport,{variant:"error"}),E=!0}else a.error(_),P(M.contactSupport,{variant:"error"}),E=!0},_=>{a.error(_),P(_??M.contactSupport,{variant:"error"}),E=!0}),E||o(ye(ds.getState())),j(!1)},T=()=>{C?(O(),setTimeout(()=>{L()},1e3)):L()},[B,R]=d.useState("1"),b=(v,E)=>{R(E)};return g!==""?null:e.jsxs(e.Fragment,{children:[e.jsxs(Jn,{closeDrawer:F,children:[e.jsx(as,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(rs,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(l,{sx:{flexGrow:1},children:[e.jsx(Se,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(Se,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[s," - ",t]})]}),e.jsx(Xe,{title:"Dock to left",position:"bottom",children:e.jsx(ne,{onClick:()=>{z(ys.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Xn,{})})}),e.jsx(Xe,{title:"Dock to right",position:"bottom",children:e.jsx(ne,{onClick:()=>{z(ys.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Zn,{})})}),e.jsx(Xe,{title:"Close",position:"bottom",children:e.jsx(ne,{onClick:F,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(zs,{})})})]})}),e.jsx(us,{className:"pp-settings-container",children:e.jsx(xs,{sx:{padding:0,margin:0},children:m?e.jsxs(ea,{value:B,children:[e.jsxs(sa,{variant:"fullWidth",textColor:"primary",onChange:b,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(_s,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(_s,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(l,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(ws,{value:"1",children:e.jsx(rr,{dbs:s,tbl:t,typ:r,metaData:c})}),e.jsxs(ws,{value:"2",children:[e.jsx(tr,{dbs:s,tbl:t,setIsUpdated:j}),e.jsx(nr,{dbs:s,tbl:t,setIsUpdated:j}),e.jsx(ar,{dbs:s,tbl:t,typ:r,metaData:c,setIsUpdated:j}),e.jsx(sr,{dbs:s,tbl:t})]})]})]}):e.jsx(l,{sx:{padding:"30px"},children:e.jsx(js,{title:"Loading data..."})})})}),e.jsx(us,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:N},children:e.jsxs(xs,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(G,{variant:"outlined",className:"footer_action_button_apply",onClick:O,children:"Apply"}),e.jsx(G,{variant:"outlined",className:"footer_action_button",onClick:T,children:"OK"}),e.jsx(G,{variant:"outlined",className:"footer_action_button",onClick:F,children:"Cancel"})]})})]}),e.jsx(xe,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:S,setOpen:I,onConfirm:()=>{L()}})]})},or=()=>{const s=k(t=>ms(t));return a.debug(s),e.jsx(e.Fragment,{children:s!==void 0&&s.action===ue.MANAGE&&e.jsx(ir,{dbs:s.dbs,tbl:s.tbl,typ:s.typ})})},ti=()=>{const s=Wn();return e.jsx(An,{theme:s,children:e.jsxs(l,{sx:{"& > :nth-of-type(2)":{visibility:"hidden",position:"fixed"}},children:[e.jsx(er,{}),e.jsx(Za,{}),e.jsx(or,{})]})})};export{ti as default};
