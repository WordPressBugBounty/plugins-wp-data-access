const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TableChart-1.0.37-j4FK0x23.js","./cm-1.0.37-CEr77VZi.js","./redux-1.0.37-C4JSQ-MG.js","./vendor-1.0.37-CN03Eozo.js","./index-1.0.37-BWdCssYC.js","./index-1.0.37-D1xZWbV7.js","./ConfirmDialog-1.0.37-BDQ_OfRf.js","./iconBase-1.0.37-DRohixw7.js","./Typography-1.0.37-DjtXWQnP.js","./lib-1.0.37-Czwr-8r3.js","./loglevel-1.0.37-BZ7XahX3.js","./lodash-1.0.37-Dx3wKrSf.js","./moment-1.0.37-C5S46NFB.js","./useEnhancedEffect-1.0.37-UwysO4qr.js","./AdminTheme-1.0.37-7PLndQ8H.js","./index-1.0.37-B60ShF2d.js","./notistack-1.0.37-CEqipxDI.js","./hooks-1.0.37-DW0_oiBB.js","./ChartTypeSelection-1.0.37-g80wo80k.js","./ChartTypes-1.0.37-CDO5weV_.js","./index-1.0.37-CK0QxOhD.js","./FormHelperText-1.0.37-ylnS0Km6.js","./utils-1.0.37-iop7lDec.js","./useFormControl-1.0.37-BcUwa2qz.js","./TextField-1.0.37-CCe4G0U1.js","./Select-1.0.37-B5ZKqjeL.js","./Menu-1.0.37-Ca8DeoO3.js","./ThemeProvider-1.0.37-Cyf1xy26.js","./useControlled-1.0.37-DyimEgDk.js","./createSvgIcon-1.0.37-DXsAQOmB.js","./FormLabel-1.0.37-BQP5Nx_Z.js","./MenuItem-1.0.37-JkRcsicb.js","./ListItemIcon-1.0.37-CVeLs3zr.js","./Chart-1.0.37-BPm1pFP4.js","./main-1.0.37.js","./useChartSettings-1.0.37-DyLw1xR9.js","./useRemoveAppFromStore-1.0.37-HphIv4xo.js","./lang-1.0.37-CfHlhLgz.js","./Spinner-1.0.37-CwhfSVqI.js","./Tooltip-1.0.37-BLWvlO4a.js","./Popper-1.0.37-CSsNCozr.js","./AppTheme-1.0.37-DOXnENpA.js","./index-1.0.37-D4zhytA1.js","./getThemeProps-1.0.37-BGc0S4YC.js","./TableChartSelection-1.0.37-CNWwctdk.js","./useTableColumnOrder-1.0.37-D1_-t0Ut.js","./TableContainer-1.0.37-C-xGIJXi.js","./tanstack-1.0.37-DP4-37CF.js","./FallbackSpinner-1.0.37-DAc7pvnM.js","./ActionsSettings-1.0.37-DQdLIvID.js","./RestApi-1.0.37-CcjslynE.js","./TargetEnum-1.0.37-CIW1jlU5.js","./Tooltip-1.0.37-D_uDknxi.js","./Tooltip-1.0.37--D4jr2go.css","./ScopeEnum-1.0.37-B4DDvIDj.js","./index-1.0.37-LxgxH_yq.js","./TabPanel-1.0.37-CPE-1h3v.js","./useThemeProps-1.0.37-CD9ZXLtG.js","./useTableUpdater-1.0.37-CIKXY-oH.js","./DynamicModeEnum-1.0.37-BXuL5kgA.js","./useFormDetails-1.0.37-DnrKW97d.js","./settings-1.0.37-Bx2jvYL6.css","./Autocomplete-1.0.37-5_yZAyWV.js","./Close-1.0.37-Yr1E1-6A.js","./TableToolbarInlineEditingButton-1.0.37-D6PVzZwv.js","./TableQuery-1.0.37-DM7UY04J.js","./useStoreTable-1.0.37-Bzu2Dqnh.js","./index-1.0.37-9tYvXmzh.js","./ActionsDml-1.0.37-kzr7tHjI.js","./SanitizeComponent-1.0.37-DM7FdeKd.js","./dompurify-1.0.37-DhD2mIk-.js","./index.esm-1.0.37-Ch2AC2k0.js","./Stack-1.0.37-BFfovUQt.js","./Radio-1.0.37-C5rUTiNk.js","./SwitchBase-1.0.37-Bwy1aBhJ.js","./Checkbox-1.0.37-LjGLlM3B.js","./Collapse-1.0.37-DaP8rsgI.js","./AlertTitle-1.0.37-BCo6eK8b.js","./InputAdornment-1.0.37-Bm1BNe28.js","./TableRow-1.0.37-BL0M_io2.js","./Divider-1.0.37-PDNfV3Nd.js","./FormControlLabel-1.0.37-BLp4PuCc.js","./Switch-1.0.37-D8L-tSJ8.js","./Slider-1.0.37-R1cUZahP.js","./visuallyHidden-1.0.37-Dan1xhjv.js","./TimePicker-1.0.37-BtJEaGns.js","./useMobilePicker-1.0.37-R-jHVb2P.js","./ListItem-1.0.37-dqzHUGyt.js","./timeViewRenderers-1.0.37-Ch7-pd3X.js","./DateTimePicker-1.0.37-CnXTWBoh.js","./Tabs-1.0.37-CatYC_MQ.js","./dateViewRenderers-1.0.37-w-smkVHQ.js","./DatePicker-1.0.37-PLuiNNZ5.js","./tab-1.0.37-_GJbvkmQ.js","./useScreenSize-1.0.37-X1Uq-TFD.js","./SharedContainer-1.0.37-BgI3NpUN.js","./useStoreFormSettings-1.0.37-DetNzg9c.js","./AlertDialog-1.0.37-DG1NZI4D.js","./SharedContainer-1.0.37-DR7D6eET.css","./math-1.0.37-BQt3B2Pe.js","./AggregationLabelsEnum-1.0.37-B-3lhjpJ.js","./useTableCode-1.0.37-DhpODUMa.js","./useTheme-1.0.37-D4xQQypV.js","./TableQuery-1.0.37-uJ6MlsKy.css"])))=>i.map(i=>d[i]);
import{_ as ge}from"./main-1.0.37.js";import{j as i}from"./cm-1.0.37-CEr77VZi.js";import{r as u}from"./redux-1.0.37-C4JSQ-MG.js";import{l as a,v as Me,H as de,bJ as qe,aq as He,aQ as Ve,bR as Je,c1 as Ue}from"./lib-1.0.37-Czwr-8r3.js";import{F as Ke,M as ze,n as Ge,O as Xe,$ as Qe}from"./index-1.0.37-B60ShF2d.js";import{P as Ye,b as ue,a as Ze}from"./index-1.0.37-BWdCssYC.js";import{n as pe,o as Le,p as $e}from"./index-1.0.37-LxgxH_yq.js";import{r as We}from"./jstoxml-1.0.37-DkGlThlH.js";import{F as $}from"./FileSaver.min-1.0.37-Mmc9tWhG.js";import"./dompurify-1.0.37-DhD2mIk-.js";import{u as De,a as er,b as rr}from"./TableQuery-1.0.37-DM7UY04J.js";import{d as tr}from"./ActionsDml-1.0.37-kzr7tHjI.js";import{B as K,C as or}from"./ConfirmDialog-1.0.37-BDQ_OfRf.js";import{e as U}from"./notistack-1.0.37-CEqipxDI.js";import{a as sr}from"./hooks-1.0.37-DW0_oiBB.js";import{a as nr}from"./useRemoveAppFromStore-1.0.37-HphIv4xo.js";import{a as ir}from"./AppTheme-1.0.37-DOXnENpA.js";import{u as me}from"./index-1.0.37-D4zhytA1.js";import{B as T}from"./Spinner-1.0.37-CwhfSVqI.js";import{I as V}from"./iconBase-1.0.37-DRohixw7.js";import{F as ye}from"./FormHelperText-1.0.37-ylnS0Km6.js";import{A as lr,C as cr}from"./Autocomplete-1.0.37-5_yZAyWV.js";import{T as dr}from"./TextField-1.0.37-CCe4G0U1.js";import{T as G}from"./Tooltip-1.0.37-BLWvlO4a.js";import{P as ur}from"./Menu-1.0.37-Ca8DeoO3.js";import{F as ae}from"./FormLabel-1.0.37-BQP5Nx_Z.js";import{F as E}from"./FormControlLabel-1.0.37-BLp4PuCc.js";import{C as pr}from"./Checkbox-1.0.37-LjGLlM3B.js";import{R as mr}from"./RadioGroup-1.0.37-CARB8om5.js";import{R as N}from"./Radio-1.0.37-C5rUTiNk.js";import{R as fe}from"./SharedContainer-1.0.37-BgI3NpUN.js";import"./moment-1.0.37-C5S46NFB.js";import{F as xe}from"./FallbackSpinner-1.0.37-DAc7pvnM.js";import"./vendor-1.0.37-CN03Eozo.js";import"./loglevel-1.0.37-BZ7XahX3.js";import"./lodash-1.0.37-Dx3wKrSf.js";import"./Typography-1.0.37-DjtXWQnP.js";import"./useEnhancedEffect-1.0.37-UwysO4qr.js";import"./index-1.0.37-D1xZWbV7.js";import"./useStoreTable-1.0.37-Bzu2Dqnh.js";import"./index-1.0.37-9tYvXmzh.js";import"./Tooltip-1.0.37-D_uDknxi.js";import"./SanitizeComponent-1.0.37-DM7FdeKd.js";import"./index-1.0.37-CK0QxOhD.js";import"./tanstack-1.0.37-DP4-37CF.js";import"./index.esm-1.0.37-Ch2AC2k0.js";import"./createSvgIcon-1.0.37-DXsAQOmB.js";import"./Stack-1.0.37-BFfovUQt.js";import"./useThemeProps-1.0.37-CD9ZXLtG.js";import"./getThemeProps-1.0.37-BGc0S4YC.js";import"./Collapse-1.0.37-DaP8rsgI.js";import"./AlertTitle-1.0.37-BCo6eK8b.js";import"./Close-1.0.37-Yr1E1-6A.js";import"./InputAdornment-1.0.37-Bm1BNe28.js";import"./useFormControl-1.0.37-BcUwa2qz.js";import"./Select-1.0.37-B5ZKqjeL.js";import"./utils-1.0.37-iop7lDec.js";import"./useControlled-1.0.37-DyimEgDk.js";import"./MenuItem-1.0.37-JkRcsicb.js";import"./ThemeProvider-1.0.37-Cyf1xy26.js";import"./TableRow-1.0.37-BL0M_io2.js";import"./ListItemIcon-1.0.37-CVeLs3zr.js";import"./Divider-1.0.37-PDNfV3Nd.js";import"./Switch-1.0.37-D8L-tSJ8.js";import"./SwitchBase-1.0.37-Bwy1aBhJ.js";import"./Slider-1.0.37-R1cUZahP.js";import"./visuallyHidden-1.0.37-Dan1xhjv.js";import"./TimePicker-1.0.37-BtJEaGns.js";import"./useMobilePicker-1.0.37-R-jHVb2P.js";import"./Popper-1.0.37-CSsNCozr.js";import"./ListItem-1.0.37-dqzHUGyt.js";import"./timeViewRenderers-1.0.37-Ch7-pd3X.js";import"./DateTimePicker-1.0.37-CnXTWBoh.js";import"./Tabs-1.0.37-CatYC_MQ.js";import"./dateViewRenderers-1.0.37-w-smkVHQ.js";import"./DatePicker-1.0.37-PLuiNNZ5.js";import"./lang-1.0.37-CfHlhLgz.js";import"./RestApi-1.0.37-CcjslynE.js";import"./tab-1.0.37-_GJbvkmQ.js";import"./TableContainer-1.0.37-C-xGIJXi.js";import"./AdminTheme-1.0.37-7PLndQ8H.js";import"./ActionsSettings-1.0.37-DQdLIvID.js";import"./TargetEnum-1.0.37-CIW1jlU5.js";import"./ScopeEnum-1.0.37-B4DDvIDj.js";import"./TabPanel-1.0.37-CPE-1h3v.js";import"./useTableUpdater-1.0.37-CIKXY-oH.js";import"./DynamicModeEnum-1.0.37-BXuL5kgA.js";import"./useFormDetails-1.0.37-DnrKW97d.js";/* empty css                        */import"./useScreenSize-1.0.37-X1Uq-TFD.js";import"./useChartSettings-1.0.37-DyLw1xR9.js";import"./math-1.0.37-BQt3B2Pe.js";import"./AggregationLabelsEnum-1.0.37-B-3lhjpJ.js";import"./useTableCode-1.0.37-DhpODUMa.js";import"./useTheme-1.0.37-D4xQQypV.js";import"./useStoreFormSettings-1.0.37-DetNzg9c.js";import"./useTableColumnOrder-1.0.37-D1_-t0Ut.js";import"./AlertDialog-1.0.37-DG1NZI4D.js";var W;(function(e){e.csv="text/csv",e.tsv="text/tab-separated-values",e.plain="text/plain"})(W||(W={}));var I=e=>e,g=e=>e,H=I,X=I,_=I,he=I,be=I,ar={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:W.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},fr=`\r
`,xr="\uFEFF",Q=e=>Object.assign({},ar,e);class hr extends Error{constructor(t){super(t),this.name="CsvGenerationError"}}class br extends Error{constructor(t){super(t),this.name="EmptyHeadersError"}}class gr extends Error{constructor(t){super(t),this.name="CsvDownloadEnvironmentError"}}class yr extends Error{constructor(t){super(t),this.name="UnsupportedDataFormatError"}}var jr=function(e,t){return t=='"'&&e.indexOf('"')>-1?e.replace(/"/g,'""'):e},wr=e=>he(typeof e=="object"?e.key:e),vr=e=>be(typeof e=="object"?e.displayLabel:e),Sr=(e,...t)=>t.reduce((s,c)=>c(s),e),Cr=e=>t=>e.useBom?X(g(t)+xr):t,Tr=e=>t=>e.showTitle?D(X(g(t)+e.title))(_("")):t,D=e=>t=>X(g(e)+g(t)+fr),je=e=>(t,s)=>kr(e)(_(g(t)+g(s))),kr=e=>t=>I(g(t)+e.fieldSeparator),Rr=(e,t)=>s=>{if(!e.showColumnHeaders)return s;if(t.length<1)throw new br("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let c=_("");for(let p=0;p<t.length;p++){const l=vr(t[p]);c=je(e)(c,we(e,g(l)))}return c=_(g(c).slice(0,-1)),D(s)(c)},Or=(e,t,s)=>c=>{let p=c;for(var l=0;l<s.length;l++){let m=_("");for(let y=0;y<t.length;y++){const w=wr(t[y]),h=s[l][g(w)];m=je(e)(m,we(e,h))}m=_(g(m).slice(0,-1)),p=D(p)(m)}return p},Er=e=>+e===e&&(!isFinite(e)||!!(e%1)),Fr=(e,t)=>{if(Er(t)){if(e.decimalSeparator==="locale")return H(t.toLocaleString());if(e.decimalSeparator)return H(t.toString().replace(".",e.decimalSeparator))}return H(t.toString())},z=(e,t)=>{let s=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf(`
`)>-1||t.indexOf("\r")>-1)&&(s=e.quoteCharacter+jr(t,e.quoteCharacter)+e.quoteCharacter),H(s)},Br=(e,t)=>{const s=t?"true":"false";return H(e.boolDisplay[s])},Ar=(e,t)=>typeof t>"u"&&e.replaceUndefinedWith!==void 0?z(e,e.replaceUndefinedWith+""):t===null?z(e,"null"):z(e,""),we=(e,t)=>{if(typeof t=="number")return Fr(e,t);if(typeof t=="string")return z(e,t);if(typeof t=="boolean"&&e.boolDisplay)return Br(e,t);if(t===null||typeof t>"u")return Ar(e,t);throw new yr(`
    typeof ${typeof t} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},Pr=e=>t=>{const s=Q(e),c=s.useKeysAsHeaders?Object.keys(t[0]):s.columnHeaders;let p=Sr(X(""),Cr(s),Tr(s),Rr(s,c),Or(s,c,t));if(g(p).length<1)throw new hr("Output is empty. Is your data formatted correctly?");return p},Nr=e=>t=>{const s=Q(e),c=g(t),p=s.useTextFile?"text/plain":s.mediaType;return new Blob([c],{type:`${p};charset=utf8;`})},_r=e=>t=>{if(!window)throw new gr("Downloading only supported in a browser environment.");const s=Nr(e)(t),c=Q(e),p=c.useTextFile?"txt":c.fileExtension,l=`${c.filename}.${p}`,m=document.createElement("a");m.download=l,m.href=URL.createObjectURL(s),m.setAttribute("visibility","hidden"),document.body.appendChild(m),m.click(),document.body.removeChild(m)},Ir=We();const Mr=({openSelection:e,setOpenSelection:t,appLanguage:s,columnLabels:c,availableColumns:p,selectedColumns:l,setSelectedColumns:m})=>{const y=me("(max-width:900px)"),w=me("(max-width:600px)");return i.jsx(Ke,{open:e,onClose:()=>{t(!1)},children:i.jsxs(T,{sx:{position:"absolute",top:"25%",left:"50%",transform:"translate(-50%, -50%)",width:w?"80vw":y?"70vw":"60vw",maxWidth:"700px",bgcolor:"background.paper",boxShadow:24,borderRadius:"4px",p:4},children:[i.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-20px"},children:[i.jsx("h3",{children:s.selectFromList}),i.jsx(V,{onClick:()=>{t(!1)},children:i.jsx(ze,{})})]}),i.jsx(ye,{fullWidth:!0,children:i.jsx(lr,{multiple:!0,options:p,value:l,disableCloseOnSelect:!0,getOptionLabel:h=>c[h],onChange:(h,k)=>{m(k),h.stopPropagation()},renderInput:h=>i.jsx(dr,{...h}),renderTags:(h,k)=>h.map((v,j)=>{const{key:R,...F}=k({index:j});return i.jsx(cr,{variant:"outlined",label:c[v],...F},R)})})})]})})},qr=({table:e,appId:t,metaData:s,bulkActions:c,tableStore:p,appLanguage:l,locale:m,refetch:y,componentWidth:w,aggregates:h})=>{a.debug(t,s,c);const k=sr(),v=p.table,j=p.columns;nr(t),De(t);const[R]=u.useState(p.table.clientSideProcessing),F=n=>{var r,o,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((o=s==null?void 0:s.columns[d])==null?void 0:o.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.data_type;return"varchar"},Y=n=>{var r,o,x;for(let d=0;d<((r=s==null?void 0:s.columns)==null?void 0:r.length);d++)if(((o=s==null?void 0:s.columns[d])==null?void 0:o.column_name)===n)return(x=s==null?void 0:s.columns[d])==null?void 0:x.column_type;return null},ee=()=>M.map(n=>{const r={};for(let o=0;o<b.length;o++)r[P[b[o]]]=n[P[b[o]]];return r}),J=()=>{var n,r,o;return(n=s==null?void 0:s.src)!=null&&n.app_id?"ppBulkAction-"+s.src.app_id+"-"+s.src.cnt_id:(r=s==null?void 0:s.src)!=null&&r.dbs&&((o=s==null?void 0:s.src)!=null&&o.tbl)?"ppBulkAction-"+s.src.dbs+"-"+s.src.tbl:null},[Jr,Ur]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdforientation");if(n!==null)return n}catch(n){a.debug(n)}return"landscape"}),[Kr,zr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-pdfstyle");if(n!==null)return n}catch(n){a.debug(n)}return"striped"}),[Gr,Xr]=u.useState(()=>{try{const n=localStorage.getItem("ppBulkAction-poweredBy");if(n!==null)return n==="true"}catch(n){a.debug(n)}return!0});let re="csv";c.select!==void 0&&(re="select");const[f,ve]=u.useState(re),[Se,te]=u.useState(!1),Ce=u.useMemo(()=>Me(),[]),S=er(t),B=u.useMemo(()=>{const n={};return j.filter(r=>r.lookup!==void 0&&S!==void 0&&S[r.columnName]!==void 0).map(r=>{var o;if(S!==void 0&&S[r.columnName]!==void 0){const x=[];for(const d in S[r.columnName]){const L={key:d,value:Array.isArray(S[r.columnName][d])?S[r.columnName][d].join((o=r.lookup)==null?void 0:o.delimiter):S[r.columnName][d]};x.push(L)}n[r.columnName]=x}}),n},[S,j]);a.debug("lookupColumns",B);const A=u.useMemo(()=>{const n={};return j.filter(r=>r.computedField!==void 0).map(r=>{n[r.columnName]=r.computedField}),n},[j]);a.debug(A);const P=u.useMemo(()=>{const n={};return j.map(r=>{A[r.columnName]?n[r.columnName]=A[r.columnName].label:n[r.columnName]=r.columnLabel}),n},[A,j]);a.debug(P);const Te=(n,r)=>{if(B!==void 0&&B[n]!==void 0){const o=B[n].filter(x=>x.key===r);if(Array.isArray(o)&&o.length===1)return o[0].value}return r},Z=e.getAllColumns(),C=e.getSelectedRowModel().rows,O=u.useMemo(()=>Z.filter(n=>n.id!=="mrt-row-actions"&&n.id!=="mrt-row-select"&&n.id!=="mrt-row-expand").map(n=>n.id),[]);a.debug(O);const oe=u.useMemo(()=>O.map(n=>{const r=Y(n);if(r===null)return 20;if(r.indexOf("(")!==-1){let o=r.substring(r.indexOf("(")+1);return o.indexOf(")")!==-1&&(o=o.substring(0,o.indexOf(")"))),o.indexOf(".")!==-1&&(o=o.substring(0,o.indexOf("."))),o.indexOf(",")!==-1&&(o=o.substring(0,o.indexOf(","))),Number(o)}return null}),[O]);a.debug(oe);const[se,Qr]=u.useState(()=>{const n=J();if(n!==null)try{const r=localStorage.getItem(n+"-wrapped-columns");if(r!==null)return JSON.parse(r)}catch(r){a.debug(r)}return O.filter((r,o)=>(oe[o]??99)<=20)});a.debug(se);const ne=u.useMemo(()=>{const n=J();if(n!==null)try{const r=localStorage.getItem(n);if(r!==null)return JSON.parse(r)}catch(r){a.debug(r)}return O},[O]);a.debug(ne);const[b,ke]=u.useState(ne);a.debug(b);const M=C.map(n=>{const r={};return Z.map(o=>{o.id!=="mrt-row-actions"&&o.id!=="mrt-row-select"&&o.id!=="mrt-row-expand"&&(B!==void 0&&B[o.id]!==void 0?r[P[o.id]]=Te(o.id,n.getValue(o.id)):A[o.id]||(r[P[o.id]]=n.getValue(o.id)))}),r});a.debug(M);const ie=C.map(n=>{const r={};return Z.map(o=>{o.id!=="mrt-row-actions"&&o.id!=="mrt-row-select"&&o.id!=="mrt-row-expand"&&A[o.id]===void 0&&(r[o.id]=n.getValue(o.id))}),r});a.debug(ie);const q=()=>{var n,r;return(s==null?void 0:s.src)===void 0?t:s.src.app_id&&((r=(n=s==null?void 0:s.app)==null?void 0:n.app[0])==null?void 0:r.app_title)!==""?s.app.app[0].app_title:s.src.dbs?s.src.tbl:t},le=Q({filename:q(),fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0}),[Re,Yr]=u.useState(()=>{const n=J();if(n!==null)try{const r=localStorage.getItem(n+"-pdf-title");if(r!==null)return r}catch(r){a.debug(r)}return q()});a.debug("pdfTitle",Re);const Oe=async()=>{},Ee=()=>{const n=Pr(le)(ee());_r(le)(n)},Fe=()=>{$(new Blob([JSON.stringify(ee())],{type:"text/json;charset=utf-8"}),q()+".json")};u.useRef();const Be=()=>{const n=C.map(o=>{const x={};for(let d=0;d<b.length;d++)o.original[b[d]]!==void 0&&(x[b[d]]=o.original[b[d]]??"");return{row:x}}),r=Ir.toXML({table:n});$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".xml")},Ae=()=>{const n=Ve(t);a.debug(n);let r="insert into "+n.tbl+" (";Object.keys(C[0].original).map(o=>{r+=o+","}),r=r.slice(0,-1)+") values ";for(let o=0;o<M.length;o++){const x=M[o];r+="(";for(const d in x){const L=Je(F(d));x[d]===null?r+="null,":L==="number"?r+=x[d]+",":r+="'"+x[d]+"',"}r=r.slice(0,-1),r+="),"}r=r.slice(0,-1)+`;
`,$(new Blob([r],{type:"text/plain;charset=utf-8"}),q()+".sql")},Pe=()=>{k(de({appId:t,property:{isRowCountUpdated:!0}}));for(let n=0;n<M.length;n++){const r=Ue(s,ie[n]);tr(t,r,o=>{if(o!=null&&o.code&&(o!=null&&o.message))switch(o.code){case"ok":U(l.deletedSuccessful,{variant:"success"}),y();break;default:a.error(o),U(o.message??l.invalidResponse,{variant:"error"})}else a.error(o),U(l.invalidResponse,{variant:"error"})},o=>{a.error("error",o),U(o??l.invalidResponse,{variant:"error"})})}e.setRowSelection({})},Ne=()=>null,_e=()=>null,[Zr,Lr]=u.useState(0),[$r,Wr]=u.useState(0),[Ie,ce]=u.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(Ye,{variant:"popover",popupId:Ce,children:n=>{var r;return i.jsxs(i.Fragment,{children:[w<900?i.jsx(G,{title:l.bulkActions,children:i.jsx(V,{...ue(n),children:i.jsx(pe,{})})}):i.jsx(K,{variant:"contained",endIcon:i.jsx(pe,{}),...ue(n),children:l.bulkActions}),p.state.relTab===!0&&i.jsx(K,{variant:"contained",startIcon:i.jsx(Ge,{}),sx:{marginLeft:"10px"},onClick:()=>{k(de({appId:t,property:{isRelTabOpen:!1}}))},children:l.back}),i.jsx(ur,{...Ze(n),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)"},children:i.jsxs(T,{sx:{display:"grid",gap:"20px",padding:"20px"},children:[R===!0?i.jsxs(T,{sx:{textAlign:"center",display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center"},children:[C.length===0?i.jsx(ae,{sx:{textAlign:"center"},children:l.noRowsSelected}):i.jsx("span",{}),i.jsx(ye,{children:i.jsx(E,{control:i.jsx(pr,{className:"pp-checkbox",checked:C.length>0,onChange:()=>{e.toggleAllRowsSelected()}}),label:i.jsx(T,{sx:{display:"flex",alignItems:"center"},children:l.selectAll})})})]}):i.jsx(i.Fragment,{children:C.length===0&&i.jsx(T,{sx:{textAlign:"center"},children:i.jsx(ae,{children:l.noRowsSelected})})}),i.jsxs(mr,{value:f,onChange:(o,x)=>{ve(x),o.stopPropagation()},children:[Ne(),c.csv&&i.jsx(E,{value:"csv",label:l.exportToCsv,control:i.jsx(N,{})}),c.json&&i.jsx(E,{value:"json",label:l.exportToJson,control:i.jsx(N,{})}),_e(),c.xml&&i.jsx(E,{value:"xml",label:l.exportToXml,control:i.jsx(N,{})}),c.sql&&!qe(t)&&i.jsx(E,{value:"sql",label:l.exportToSql,control:i.jsx(N,{})}),((r=s==null?void 0:s.privs)==null?void 0:r.delete)&&!He(s)&&(c==null?void 0:c.delete)===!0&&v.transactions.delete&&i.jsx(E,{value:"delete",label:l.deletePermanently,control:i.jsx(N,{})}),(c.select??!1)&&i.jsx(E,{value:"select",label:l.addSelectedRow,control:i.jsx(N,{})})]}),i.jsxs(T,{sx:{display:"grid",gridTemplateColumns:f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"?"1fr auto":"1fr",gap:"10px"},children:[i.jsx(K,{variant:"contained",onClick:()=>{if(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml"){const o=J();if(o!==null)try{localStorage.setItem(o,JSON.stringify(b)),localStorage.setItem(o+"-wrapped-columns",JSON.stringify(se))}catch(x){a.debug(x)}}switch(f){case"pdf":Oe();break;case"csv":Ee();break;case"json":Fe();break;case"excel":break;case"xml":Be();break;case"sql":Ae();break;case"delete":te(!0);break}},disabled:C.length===0||(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&(b==null?void 0:b.length)===0,children:l.apply}),(f==="pdf"||f==="csv"||f==="json"||f==="excel"||f==="xml")&&i.jsx(G,{title:m.showHideColumns,children:i.jsx(V,{onClick:()=>{ce(!0)},children:i.jsx(Xe,{})})})]})]})})]})}}),i.jsx(or,{title:l.deleteRowsTitle,message:l.deleteRowsMessage,open:Se,setOpen:te,onConfirm:()=>{Pe()},theme:ir}),i.jsx(Mr,{openSelection:Ie,setOpenSelection:ce,appLanguage:l,columnLabels:P,availableColumns:O,selectedColumns:b,setSelectedColumns:ke})]})},Hr=u.lazy(()=>ge(()=>import("./TableChart-1.0.37-j4FK0x23.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63]),import.meta.url)),Vr=u.lazy(()=>ge(()=>import("./TableToolbarInlineEditingButton-1.0.37-D6PVzZwv.js"),__vite__mapDeps([64,1,2,3,65,34,16,9,10,11,12,66,17,67,15,7,8,13,68,50,52,53,69,70,20,47,71,29,42,43,72,57,39,27,28,40,38,73,74,23,75,6,14,26,62,25,22,63,76,77,24,30,21,78,31,79,32,80,81,82,83,84,85,86,5,87,88,89,90,91,92,37,93,36,46,48,49,51,54,55,56,58,59,60,61,94,95,41,35,96,97,98,99,100,101,102,45,103]),import.meta.url)),zo=({table:e,metaData:t,appId:s,bulkActions:c,hasBulkActions:p,tableStore:l,appLanguage:m,locale:y,refetch:w,showForm:h,appSettings:k,componentWidth:v,aggregates:j})=>{var F;const R=l.table;return rr(s),i.jsxs(T,{sx:{display:"flex",flexWrap:"nowrap",gap:v<600?"0":"8px",alignItems:"center",whiteSpace:"nowrap"},className:"pp-toolbar-buttons",children:[i.jsx(G,{arrow:!0,title:m.refresh,className:"ppToolbarRefreshIcon",children:i.jsx(V,{onClick:()=>w(),children:i.jsx(Qe,{})})}),((F=R==null?void 0:R.transactions)==null?void 0:F.insert)&&i.jsx(i.Fragment,{children:v<900?i.jsx(G,{title:m.newRow,children:i.jsx(V,{onClick:()=>{h(null,fe.INSERT)},children:i.jsx(Le,{})})}):i.jsx(K,{variant:"contained",startIcon:i.jsx($e,{}),onClick:()=>{h(null,fe.INSERT)},children:m.newRow})}),p&&i.jsx(qr,{table:e,appId:s,metaData:t,bulkActions:c,tableStore:l,appLanguage:m,locale:y,refetch:w,componentWidth:v,aggregates:j}),l.table.charts.enabled===!0&&(l.table.charts.interactive===!0||!0)&&i.jsx(u.Suspense,{fallback:i.jsx(xe,{}),children:i.jsx(Hr,{appId:s,componentWidth:v,table:e,tableStore:l,metaData:t,appLanguage:m})}),l.table.inlineEditing.addColumnButton===!1&&l.columns.filter(Y=>Y.inlineEditing===!0).length>0&&i.jsx(u.Suspense,{fallback:i.jsx(xe,{}),children:i.jsx(Vr,{appId:s,metaData:t,locale:y,appLanguage:m,componentWidth:v,refetch:w})}),!1]})};export{zo as default};
