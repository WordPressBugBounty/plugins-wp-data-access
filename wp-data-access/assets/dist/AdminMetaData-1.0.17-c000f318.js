import{l as s,r as n,a_ as h,b8 as D,j as m,C as x}from"./main-1.0.17.js";import{a as j,B as M,S as T}from"./main-1.0.17-54ffa424.js";import{f as L,S as y,T as C}from"./usePrepareStore-1.0.17-a8be8b2f.js";import{g as B}from"./ActionsDml-1.0.17-9041b8e8.js";const N=({dbs:e,tbl:r,appId:c,exploring:S})=>{s.debug(e,r,c);const u=j(),[f,i]=n.useState(""),[d,g]=n.useState(!1),{prepareAdminStore:A}=L(c,y.ADMIN);n.useEffect(()=>{d||E()},[e,r]);const E=()=>{B(e,r,!1,function(a){var l,p;const t=a==null?void 0:a.data;if(s.debug("response data",e,r,t),(l=t==null?void 0:t.access)!=null&&l.select&&Array.isArray(t.access.select)&&t.access.select.includes("POST"))A(e,r,t,S===!0)?g(!0):i(x.contactSupport);else{let o="Unauthorized";((p=a==null?void 0:a.data)==null?void 0:p.message)!==void 0&&(o=a.data.message),o+=" - check console for more information",s.error(o),i(o)}},a=>{s.error("error",a),i(a??x.contactSupport)})};return f!==""?(u(h({error:f})),u(D({})),null):d?m.jsx(C,{appId:c}):m.jsx(M,{sx:{padding:"30px"},children:m.jsx(T,{title:"Loading metadata..."})})};export{N as A};
