const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ResizableDrawer-1.0.40-D6A5i9fs.js","./cm-1.0.40-DO7MoydR.js","./redux-1.0.40-W_04YL6Z.js","./vendor-1.0.40-CN03Eozo.js","./useScreenSize-1.0.40-DAXf1AlH.js","./lib-1.0.40-CJM-IO_o.js","./loglevel-1.0.40-BZ7XahX3.js","./lodash-1.0.40-yZQKpWII.js","./moment-1.0.40-C5S46NFB.js","./hooks-1.0.40-DoKijNI1.js","./Typography-1.0.40-oRKYqE3b.js","./ThemeProvider-1.0.40-D9QtC9zH.js","./useEnhancedEffect-1.0.40-DvrM_gBo.js","./iconBase-1.0.40-CH6TO7hF.js","./index-1.0.40-DmMQghWt.js","./notistack-1.0.40-HUa4vT_u.js","./Menu-1.0.40-BKp7UqHL.js","./ThemeSettings-1.0.40-Cy9gXjud.js","./AppTheme-1.0.40-whCBYKjb.js","./index-1.0.40-xxiPHCiq.js","./getThemeProps-1.0.40-CtGZuG5N.js","./PremiumFeature-1.0.40-C4a0KOip.js","./index-1.0.40-DlucSO_j.js","./AdminTheme-1.0.40-B669Ow89.js","./FormLabel-1.0.40-DLOepjQ0.js","./useFormControl-1.0.40-BL8koKXQ.js","./index-1.0.40-DdW0OcA3.js","./Spinner-1.0.40-Bmn0_C4u.js","./FormHelperText-1.0.40-D6buAdoc.js","./utils-1.0.40-iop7lDec.js","./Switch-1.0.40-CJ3Ir4CS.js","./SwitchBase-1.0.40-BQrnL2Sx.js","./useControlled-1.0.40-B7yPDtn1.js","./Stack-1.0.40-_IJfHuNj.js","./useThemeProps-1.0.40-CnqSFvnT.js","./Slider-1.0.40-w2yGdRCB.js","./visuallyHidden-1.0.40-Dan1xhjv.js","./FormControlLabel-1.0.40-BH1qH5qy.js","./Link-1.0.40-rVkAFnTh.js","./RadioGroup-1.0.40-D9A3e6h3.js","./Radio-1.0.40-BfbkSgOE.js","./createSvgIcon-1.0.40-DryBVjDb.js","./CssUnitTextField-1.0.40-bZOEwhww.js","./TextField-1.0.40-CejEr0KU.js","./Select-1.0.40-Db-Xnyoo.js","./ConfirmDialog-1.0.40-DRjx8-xC.js","./DynamicModeEnum-1.0.40-BXuL5kgA.js","./AccordionSummary-1.0.40-BaFEiNF8.js","./Collapse-1.0.40-C90ayxyF.js","./AccordionDetails-1.0.40-AFOWsBZA.js","./SettingsMap-1.0.40-Cng4B5Lk.js","./SettingsMapMarkers-1.0.40-D1ScLBC8.js","./useMapUpdater-1.0.40-BcGwfhdr.js","./main-1.0.40.js","./react-number-format.es-1.0.40-BdajC67w.js","./DefaultWhere-1.0.40-DTRDKm6T.js","./useMetadata-1.0.40-DdsiIGYX.js","./SanitizeComponent-1.0.40-qpEC7QW6.js","./dompurify-1.0.40-DhD2mIk-.js","./Tooltip-1.0.40-Czv1q8N-.js","./Popper-1.0.40-Jt4gcDMJ.js"])))=>i.map(i=>d[i]);
import{_ as S}from"./main-1.0.40.js";import{j as e}from"./cm-1.0.40-DO7MoydR.js";import{r as i}from"./redux-1.0.40-W_04YL6Z.js";import{u as P,a as F}from"./hooks-1.0.40-DoKijNI1.js";import{l as n,bI as d,S as c,aa as G,P as H,a as A,s as I,bJ as K,am as q,F as B,b as D}from"./lib-1.0.40-CJM-IO_o.js";import{B as J,a as W,b as X}from"./BuilderMenu-1.0.40-wmot84K1.js";import{d as Y,A as Q,T as Z,M as $}from"./index-1.0.40-DmMQghWt.js";import{B as x,C as ee}from"./ConfirmDialog-1.0.40-DRjx8-xC.js";import{T as f,C as y,a as E}from"./Tooltip-1.0.40-C5SL6QF3.js";import{A as R}from"./AdminTheme-1.0.40-B669Ow89.js";import{e as m}from"./notistack-1.0.40-HUa4vT_u.js";import{b as te}from"./ActionsSettings-1.0.40-eUdZc7P-.js";import{u as se}from"./useMapUpdater-1.0.40-BcGwfhdr.js";import{B as oe,S as g}from"./Spinner-1.0.40-Bmn0_C4u.js";/* empty css                        */import{i as ie}from"./index-1.0.40-D3XFZfpM.js";import{D as re}from"./DynamicModeEnum-1.0.40-BXuL5kgA.js";import{T as ne}from"./Typography-1.0.40-oRKYqE3b.js";import{I as h}from"./iconBase-1.0.40-CH6TO7hF.js";import{T as ae,a as z}from"./TabPanel-1.0.40-svpV7m9Q.js";import"./vendor-1.0.40-CN03Eozo.js";import"./loglevel-1.0.40-BZ7XahX3.js";import"./lodash-1.0.40-yZQKpWII.js";import"./moment-1.0.40-C5S46NFB.js";import"./Menu-1.0.40-BKp7UqHL.js";import"./ThemeProvider-1.0.40-D9QtC9zH.js";import"./useEnhancedEffect-1.0.40-DvrM_gBo.js";import"./MenuItem-1.0.40-UKMJrtYZ.js";import"./RestApi-1.0.40-Uj1ofskP.js";import"./TargetEnum-1.0.40-CIW1jlU5.js";import"./useThemeProps-1.0.40-CnqSFvnT.js";import"./getThemeProps-1.0.40-CtGZuG5N.js";const le=t=>{const o=P(r=>{var a,p;return(p=(a=r.maps[t])==null?void 0:a.state)==null?void 0:p.isUpdated});return n.debug("isUpdated",o),o},ce=t=>{const o=P(r=>r.ui.mapSettings.isOpen&&r.ui.mapSettings.appId===t);return n.debug(t,o),o},me=i.lazy(()=>S(()=>import("./ResizableDrawer-1.0.40-D6A5i9fs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url)),pe=i.lazy(()=>S(()=>import("./ThemeSettings-1.0.40-Cy9gXjud.js"),__vite__mapDeps([17,1,2,3,9,5,6,7,8,18,19,10,20,12,21,22,13,23,24,25,14,15,26,27,28,29,30,31,32,33,34,35,11,36,16,37,38,39,40,41,42,43,44,45,46,47,48,49]),import.meta.url)),ue=i.lazy(()=>S(()=>import("./SettingsMap-1.0.40-Cng4B5Lk.js"),__vite__mapDeps([50,1,2,3,51,9,5,6,7,8,52,42,14,13,10,12,15,43,44,16,11,29,32,25,41,24,28,27,45,23,47,48,49,39,40,31,35,36,37,30,53,54,21,22,55,38,56,57,58,59,60]),import.meta.url)),Je=({appId:t})=>{var k,v;const o=F(),[r,a]=i.useState(d.getSelectors().selectMap(c.getState().maps,t)),[p,de]=i.useState(G.getSelectors().selectThemeById(c.getState().themes,t)),[U,b]=i.useState(!1),L=le(t),j=se(t),w=((k=R)==null?void 0:k.palette.mode)===H.LIGHT?(v=R)==null?void 0:v.palette.primary.main:"",M=s=>{o(I({anchor:s}))},_=()=>{o(B({appId:t,mapState:r}))},l=()=>{o(K()),o(q({appId:t,property:{isUpdated:!1}}))},u=()=>{L?b(!0):(_(),l())},C=()=>{te(t,s=>{if(n.debug(s),s!=null&&s.code&&(s==null?void 0:s.message)!==void 0)switch(s.code){case"ok":o(B({appId:t,mapState:d.getSelectors().selectMap(c.getState().maps,t)})),a(d.getSelectors().selectMap(c.getState().maps,t)),m(s.message,{variant:"success"});break;case"info":m(s.message,{variant:"info"});break;default:n.error(s),m(s.message??D.contactSupport,{variant:"error"})}},s=>{n.error("error",s),m(s??D.contactSupport,{variant:"error"})}),j(!1)},N=()=>{C(),l()},[T,O]=i.useState(0),V=i.useMemo(()=>[{title:"Map",icon:e.jsx(Y,{})},{title:"Theme",icon:e.jsx(ie,{})}],[]);return ce(t)!==!0?null:e.jsxs(e.Fragment,{children:[e.jsx(i.Suspense,{fallback:e.jsx(g,{}),children:e.jsxs(me,{closeDrawer:u,children:[e.jsxs(Q,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(Z,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsx(ne,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{flexGrow:1,paddingLeft:"6px"},children:"Map Builder"}),e.jsx(f,{title:"Dock to left",position:"bottom",children:e.jsx(h,{onClick:()=>{M(A.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(J,{})})}),e.jsx(f,{title:"Dock to right",position:"bottom",children:e.jsx(h,{onClick:()=>{M(A.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(W,{})})}),e.jsx(f,{title:"Close",position:"bottom",children:e.jsx(h,{onClick:u,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx($,{})})})]}),e.jsx(X,{menuItems:V,menuIndex:T,setMenu:O})]}),e.jsx(y,{className:"pp-settings-container",children:e.jsx(E,{sx:{padding:0,margin:0},children:e.jsx(ae,{value:T,children:e.jsxs(oe,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(z,{value:0,children:e.jsx(i.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(ue,{appId:t})})}),e.jsx(z,{value:1,children:e.jsx(i.Suspense,{fallback:e.jsx(g,{}),children:e.jsx(pe,{appId:t,source:re.TABLE,setIsUpdated:j})})})]})})})}),e.jsx(y,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:w},children:e.jsxs(E,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx(x,{variant:"outlined",className:"footer_action_button_apply",onClick:C,children:"Apply"}),e.jsx(x,{variant:"outlined",className:"footer_action_button",onClick:N,children:"OK"}),e.jsx(x,{variant:"outlined",className:"footer_action_button",onClick:u,children:"Cancel"})]})})]})}),e.jsx(ee,{title:"Close Map Builder?",message:"All uncommitted changes will be lost!",open:U,setOpen:b,onConfirm:()=>{_(),l()},onKeep:()=>{l()}})]})};export{Je as default};
