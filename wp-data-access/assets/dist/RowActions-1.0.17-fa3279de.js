import{l,r as O,bM as R,j as e,cq as d,cK as T,e as c}from"./main-1.0.17.js";import{a as V,B as w,T as x,K as z,aj as B,o as K}from"./main-1.0.17-54ffa424.js";import{n as a,m as b}from"./usePrepareStore-1.0.17-a8be8b2f.js";import{C as q}from"./TabPanel-1.0.17-3c2dbf14.js";import{d as U}from"./ActionsDml-1.0.17-9041b8e8.js";import{I as f}from"./iconBase-1.0.17-8d991e6c.js";import"./FormControlLabel-1.0.17-cc31d0c1.js";import"./Select-1.0.17-745624d0.js";import"./Menu-1.0.17-09126381.js";import"./createSvgIcon-1.0.17-f0c1dc0a.js";import"./useScreenSize-1.0.17-44173319.js";import"./DialogContent-1.0.17-9628df83.js";import"./Tabs-1.0.17-a2a1c721.js";const I=({metaData:o,appId:n,rowId:r,rowData:j,storeTableSettings:m,appLanguage:s,tableDensity:t,showForm:h,refetch:p})=>{var v,k;l.debug(o,n,r,j,t);const A=V(),[M,u]=O.useState(!1),C=Object.keys(r).length>0,P=m.viewLink,E=!R(o)&&((v=o==null?void 0:o.privs)==null?void 0:v.update)&&m.transactions.update&&C,y=!R(o)&&((k=o==null?void 0:o.privs)==null?void 0:k.delete)&&m.transactions.delete&&C;return e.jsxs(w,{sx:{display:"flex",alignItems:"center",gap:0},children:[P&&e.jsx(x,{title:s.view,children:e.jsx(f,{color:"primary",size:t===d.COMPACT?"small":"medium",onClick:i=>{Object.keys(r).length===0&&A(T({appId:n,data:j,context:null})),h(r,a.VIEW),i.stopPropagation()},children:e.jsx(z,{})})}),E&&e.jsx(x,{title:s.edit,children:e.jsx(f,{color:"primary",size:t===d.COMPACT?"small":"medium",onClick:i=>{h(r,a.UPDATE),i.stopPropagation()},children:e.jsx(B,{})})}),y&&e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s.delete,children:e.jsx(f,{color:"error",size:t===d.COMPACT?"small":"medium",onClick:i=>{u(!0),i.stopPropagation()},children:e.jsx(K,{})})}),e.jsx(q,{title:s.deleteRowTitle,message:s.deleteRowMessage,open:M,setOpen:u,onConfirm:()=>{U(n,r,i=>{if(i!=null&&i.code&&(i!=null&&i.message))switch(i.code){case"ok":c(s.deletedSuccessful,{variant:"success"}),p();break;default:l.error(i),c(i.message??s.invalidResponse,{variant:"error"})}else l.error(i),c(s.invalidResponse,{variant:"error"})},i=>{l.error("error",i),c(i??s.invalidResponse,{variant:"error"})})},locale:s,theme:b})]})]})};export{I as default};
