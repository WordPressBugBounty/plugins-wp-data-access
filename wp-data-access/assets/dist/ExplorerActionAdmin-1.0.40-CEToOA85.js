const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsActions-1.0.40-39H5OTYI.js","./cm-1.0.40-DO7MoydR.js","./redux-1.0.40-W_04YL6Z.js","./vendor-1.0.40-CN03Eozo.js","./RestApi-1.0.40-Uj1ofskP.js","./lib-1.0.40-CJM-IO_o.js","./loglevel-1.0.40-BZ7XahX3.js","./lodash-1.0.40-yZQKpWII.js","./moment-1.0.40-C5S46NFB.js","./ActionsAdmin-1.0.40-CDUiJt-3.js","./hooks-1.0.40-DoKijNI1.js","./notistack-1.0.40-HUa4vT_u.js","./ConfirmDialog-1.0.40-DRjx8-xC.js","./iconBase-1.0.40-CH6TO7hF.js","./Typography-1.0.40-oRKYqE3b.js","./useEnhancedEffect-1.0.40-DvrM_gBo.js","./AdminTheme-1.0.40-B669Ow89.js","./index-1.0.40-DmMQghWt.js","./Spinner-1.0.40-Bmn0_C4u.js","./index-1.0.40-DlucSO_j.js","./index-1.0.40-Beue_JiO.js","./useExplorer-1.0.40-Bc0jqvLm.js","./FormHelperText-1.0.40-D6buAdoc.js","./utils-1.0.40-iop7lDec.js","./useFormControl-1.0.40-BL8koKXQ.js","./TextField-1.0.40-CejEr0KU.js","./Select-1.0.40-Db-Xnyoo.js","./Menu-1.0.40-BKp7UqHL.js","./ThemeProvider-1.0.40-D9QtC9zH.js","./useControlled-1.0.40-B7yPDtn1.js","./createSvgIcon-1.0.40-DryBVjDb.js","./FormLabel-1.0.40-DLOepjQ0.js","./MenuItem-1.0.40-UKMJrtYZ.js","./FormControlLabel-1.0.40-BH1qH5qy.js","./Switch-1.0.40-CJ3Ir4CS.js","./SwitchBase-1.0.40-BQrnL2Sx.js","./Tooltip-1.0.40-Czv1q8N-.js","./Popper-1.0.40-Jt4gcDMJ.js","./SettingsTable-1.0.40-BXOIc463.js","./AccordionSummary-1.0.40-BaFEiNF8.js","./Collapse-1.0.40-C90ayxyF.js","./AccordionDetails-1.0.40-AFOWsBZA.js","./RadioGroup-1.0.40-D9A3e6h3.js","./Radio-1.0.40-BfbkSgOE.js","./main-1.0.40.js","./BuilderMenu-1.0.40-wmot84K1.js","./Tooltip-1.0.40-C5SL6QF3.js","./Tooltip-1.0.40--D4jr2go.css","./ActionsExplorer-1.0.40-BO8XAUDR.js","./index-1.0.40-D3XFZfpM.js","./ActionsDml-1.0.40-BspTHnPS.js","./TabPanel-1.0.40-svpV7m9Q.js","./useThemeProps-1.0.40-CnqSFvnT.js","./getThemeProps-1.0.40-CtGZuG5N.js","./ExplorerActionEnum-1.0.40-eclZgKpy.js","./useUiExplorerAction-1.0.40-CnSsHEsn.js","./settings-1.0.40-Bx2jvYL6.css","./SettingsColumn-1.0.40-CaWmu2EM.js","./SettingsRestApi-1.0.40-CjNYfU0M.js","./Autocomplete-1.0.40-CcfYAr1c.js","./Close-1.0.40-DOQmTCBQ.js","./main-1.0.40-LBsY5zsP.css","./SettingsReset-1.0.40-BbQINuh5.js","./ActionsSettings-1.0.40-eUdZc7P-.js","./TargetEnum-1.0.40-CIW1jlU5.js","./ScopeEnum-1.0.40-B4DDvIDj.js","./ResizableDrawer-1.0.40-D6A5i9fs.js","./useScreenSize-1.0.40-DAXf1AlH.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.40-DO7MoydR.js";import{_ as m}from"./main-1.0.40.js";import{r as s}from"./redux-1.0.40-W_04YL6Z.js";import{B as se,a as oe,b as ae}from"./BuilderMenu-1.0.40-wmot84K1.js";import{T as _,C as P,a as B}from"./Tooltip-1.0.40-C5SL6QF3.js";import{A as re,T as ne,M as ie}from"./index-1.0.40-DmMQghWt.js";import{u as le,a as ce}from"./hooks-1.0.40-DoKijNI1.js";import{l,aY as O,S as w,an as me,a7 as N,ao as V,P as ue,a as F,s as pe,b as u,aZ as de}from"./lib-1.0.40-CJM-IO_o.js";import{A as G}from"./AdminTheme-1.0.40-B669Ow89.js";import{B as E,S as f}from"./Spinner-1.0.40-Bmn0_C4u.js";import{s as ge}from"./ActionsExplorer-1.0.40-BO8XAUDR.js";import{e as p}from"./notistack-1.0.40-HUa4vT_u.js";import{j as xe,m as fe}from"./index-1.0.40-D3XFZfpM.js";import{B as A,C as je}from"./ConfirmDialog-1.0.40-DRjx8-xC.js";import{g as he}from"./ActionsDml-1.0.40-BspTHnPS.js";/* empty css                        */import{T as U}from"./Typography-1.0.40-oRKYqE3b.js";import{I as b}from"./iconBase-1.0.40-CH6TO7hF.js";import{T as Se,a as H}from"./TabPanel-1.0.40-svpV7m9Q.js";import{E as _e}from"./ExplorerActionEnum-1.0.40-eclZgKpy.js";import{u as Ee}from"./useUiExplorerAction-1.0.40-CnSsHEsn.js";const Ae=()=>{const t=le(n=>n.manager.settings);return l.debug("managerSettings",t),t},be=s.lazy(()=>m(()=>import("./SettingsActions-1.0.40-39H5OTYI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37]),import.meta.url)),Te=s.lazy(()=>m(()=>import("./SettingsTable-1.0.40-BXOIc463.js"),__vite__mapDeps([38,1,2,3,17,13,14,5,6,7,8,15,11,10,39,29,40,41,22,23,24,31,42,43,35,30,44,45,18,12,16,27,28,32,46,47,48,4,49,50,51,52,53,54,55,56]),import.meta.url)),Ce=s.lazy(()=>m(()=>import("./SettingsColumn-1.0.40-CaWmu2EM.js"),__vite__mapDeps([57,1,2,3,17,13,14,5,6,7,8,15,11,10,39,29,40,41,22,23,24,18,25,26,27,28,30,31,32,44,45,12,16,46,47,48,4,49,50,51,52,53,54,55,56]),import.meta.url)),De=s.lazy(()=>m(()=>import("./SettingsRestApi-1.0.40-CjNYfU0M.js"),__vite__mapDeps([58,1,2,3,17,13,14,5,6,7,8,15,11,10,21,39,29,40,41,18,31,24,33,34,35,22,23,42,43,30,59,26,27,28,60,37,25,44,45,12,16,32,46,47,48,4,49,50,51,52,53,54,55,61,56]),import.meta.url)),Me=s.lazy(()=>m(()=>import("./SettingsReset-1.0.40-BbQINuh5.js"),__vite__mapDeps([62,1,2,3,17,13,14,5,6,7,8,15,11,63,4,64,65,12,16,39,29,40,41,22,23,24]),import.meta.url)),ke=s.lazy(()=>m(()=>import("./ResizableDrawer-1.0.40-D6A5i9fs.js"),__vite__mapDeps([66,1,2,3,67,5,6,7,8,10,14,28,15,13,17,11,27]),import.meta.url)),ve=({dbs:t,tbl:n,typ:j})=>{var R,z;l.debug(t,n,j);const c=ce(),[Y,q]=s.useState(O.getSelectors().selectManagerSettings(w.getState().manager));l.debug(Y);const[d,T]=s.useState(""),[C,K]=s.useState(!1),[D,W]=s.useState({}),[M,g]=s.useState(!1),[X,k]=s.useState(!1);s.useEffect(()=>{C||Z()},[t,n]);const Z=()=>{he(t,n,!0,r=>{var o,I;const a=r==null?void 0:r.data;if(l.debug("response data",t,n,a),(o=a==null?void 0:a.access)!=null&&o.select&&Array.isArray(a.access.select)&&a.access.select.includes("POST")){const i={...a.settings};i.list_labels={...a.table_labels},i.form_labels={...a.form_labels},i.column_media={...a.wp_media},delete i.hyperlinks,delete i.ui,delete i.wp;const L={...a};W(L),c(de({settings:i,metaData:L})),K(!0)}else{let i=u.contactSupport;(I=r==null?void 0:r.data)!=null&&I.message&&(i=r.data.message+" - check console for more information"),l.error(i),T(i)}},r=>{l.error("error",r),T(r??u.contactSupport)})};s.useEffect(()=>{d!==""&&(c(me({error:d})),c(N()),c(V()))},[d]);const $=Ae(),J=((R=G)==null?void 0:R.palette.mode)===ue.LIGHT?(z=G)==null?void 0:z.palette.primary.main:"",v=r=>{c(pe({anchor:r}))},x=()=>{c(V()),c(N())},h=()=>{M?k(!0):x()},y=()=>{const r={...$};let a=!1;ge(t,n,r,o=>{if(o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":p(o.message,{variant:"success"});break;case"info":p(o.message,{variant:"info"});break;default:l.error(o),p(o.message??u.contactSupport,{variant:"error"}),a=!0}else l.error(o),p(u.contactSupport,{variant:"error"}),a=!0},o=>{l.error(o),p(o??u.contactSupport,{variant:"error"}),a=!0}),a||q(O.getSelectors().selectManagerSettings(w.getState().manager)),g(!1)},Q=()=>{M?(y(),setTimeout(()=>{x()},1e3)):x()},[S,ee]=s.useState(0),te=s.useMemo(()=>[{title:"Actions",icon:e.jsx(xe,{})},{title:"Settings",icon:e.jsx(fe,{})}],[]);return d!==""?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(ke,{closeDrawer:h,children:[e.jsxs(re,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ne,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(E,{sx:{flexGrow:1},children:[e.jsx(U,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(U,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[t," - ",n]})]}),e.jsx(_,{title:"Dock to left",position:"bottom",children:e.jsx(b,{onClick:()=>{v(F.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(se,{})})}),e.jsx(_,{title:"Dock to right",position:"bottom",children:e.jsx(b,{onClick:()=>{v(F.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(oe,{})})}),e.jsx(_,{title:"Close",position:"bottom",children:e.jsx(b,{onClick:h,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ie,{})})})]}),e.jsx(ae,{menuItems:te,menuIndex:S,setMenu:ee})]}),e.jsx(P,{className:"pp-settings-container",children:e.jsx(B,{sx:{padding:0,margin:0},children:C?e.jsx(Se,{value:S,children:e.jsxs(E,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(H,{value:0,children:e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(be,{dbs:t,tbl:n,typ:j,metaData:D})})}),e.jsx(H,{value:1,children:e.jsxs(s.Suspense,{fallback:e.jsx(f,{}),children:[e.jsx(Te,{dbs:t,tbl:n,setIsUpdated:g}),e.jsx(Ce,{dbs:t,tbl:n,setIsUpdated:g}),e.jsx(De,{dbs:t,tbl:n,typ:j,metaData:D,setIsUpdated:g}),e.jsx(Me,{dbs:t,tbl:n})]})})]})}):e.jsx(E,{sx:{padding:"30px"},children:e.jsx(f,{title:"Loading data..."})})})}),e.jsx(P,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:J},children:e.jsx(B,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:S===0?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"outlined",className:"footer_action_button_apply",onClick:y,children:"Apply"}),e.jsx(A,{variant:"outlined",className:"footer_action_button",onClick:Q,children:"OK"}),e.jsx(A,{variant:"outlined",className:"footer_action_button",onClick:h,children:"Cancel"})]})})})]})}),e.jsx(je,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:X,setOpen:k,onConfirm:()=>{x()}})]})},ye=()=>{const t=Ee();return e.jsx(e.Fragment,{children:t!==void 0&&t.action===_e.MANAGE&&e.jsx(ve,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},Je=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{Je as E,Ae as u};
