const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SettingsActions-1.0.41-CtNzqWYy.js","./cm-1.0.41-DxZ4itL_.js","./redux-1.0.41-DJjpZqD1.js","./vendor-1.0.41-CN03Eozo.js","./RestApi-1.0.41-CZ_yORv3.js","./lib-1.0.41-DFdWuh_n.js","./loglevel-1.0.41-BZ7XahX3.js","./lodash-1.0.41-Cd8grAqB.js","./moment-1.0.41-C5S46NFB.js","./ActionsAdmin-1.0.41-X0ZI6JG8.js","./hooks-1.0.41-sDnKeMy7.js","./notistack-1.0.41-Bq-EKqc7.js","./ConfirmDialog-1.0.41-NKESMhfW.js","./iconBase-1.0.41-BNQFQdHp.js","./Typography-1.0.41-BIN1Ddvh.js","./useEnhancedEffect-1.0.41-BVsyj6AW.js","./AdminTheme-1.0.41-4tiUoVeb.js","./index-1.0.41-CpXj521P.js","./Spinner-1.0.41-fWZy8imI.js","./index-1.0.41-B2jO0d0P.js","./index-1.0.41-DIUNb9YZ.js","./ctc-1.0.41-D6Hg2DQJ.js","./useExplorer-1.0.41-BZDb32GS.js","./FormHelperText-1.0.41-BPSj83yP.js","./utils-1.0.41-iop7lDec.js","./useFormControl-1.0.41-1E9QEnRo.js","./TextField-1.0.41-CGPjmVeQ.js","./Select-1.0.41-aTzlc-HZ.js","./Menu-1.0.41-DBfdBNVU.js","./ThemeProvider-1.0.41-D1lNQgXT.js","./useControlled-1.0.41-BEhJe3xs.js","./createSvgIcon-1.0.41-0lRWzB2Q.js","./FormLabel-1.0.41-CgxisugM.js","./MenuItem-1.0.41-DCc8qvzQ.js","./FormControlLabel-1.0.41-OBCouq3I.js","./Switch-1.0.41-BrkxB2Jy.js","./SwitchBase-1.0.41-C_lqznV-.js","./Tooltip-1.0.41-g4uuOuci.js","./Popper-1.0.41-Dl4_0sfD.js","./SettingsTable-1.0.41-BlYHONjt.js","./AccordionSummary-1.0.41-CY9CEWZQ.js","./Collapse-1.0.41-QlMDtjRk.js","./AccordionDetails-1.0.41-DlUbOAS0.js","./RadioGroup-1.0.41-BzP_AWOa.js","./Radio-1.0.41-S-npPzGQ.js","./main-1.0.41.js","./BuilderMenu-1.0.41-CI6mFW4W.js","./Tooltip-1.0.41-BQBkdKQ5.js","./Tooltip-1.0.41--D4jr2go.css","./ActionsExplorer-1.0.41-DSAyrNr3.js","./index-1.0.41-DGYaemnA.js","./ActionsDml-1.0.41--r5h77NM.js","./CardContent-1.0.41-Cwtu331C.js","./TabPanel-1.0.41-BJuUpIHA.js","./useThemeProps-1.0.41-BJkkrkB6.js","./getThemeProps-1.0.41-BXG_2HDV.js","./ExplorerActionEnum-1.0.41-eclZgKpy.js","./useUiExplorerAction-1.0.41-CEC1ynh1.js","./settings-1.0.41-Bx2jvYL6.css","./SettingsColumn-1.0.41-Bi2g4gu6.js","./SettingsRestApi-1.0.41-BGJCtkPC.js","./Autocomplete-1.0.41-82-5yXGC.js","./Close-1.0.41-Dkp5SdDZ.js","./Chip-1.0.41-C0GI7jZZ.js","./main-1.0.41-LBsY5zsP.css","./SettingsReset-1.0.41-CCIt-Bm5.js","./ActionsSettings-1.0.41-3gFM2W6T.js","./TargetEnum-1.0.41-CIW1jlU5.js","./ScopeEnum-1.0.41-B4DDvIDj.js","./ResizableDrawer-1.0.41-C0gZVvMH.js","./useScreenSize-1.0.41-B3FN-Ith.js"])))=>i.map(i=>d[i]);
import{j as e}from"./cm-1.0.41-DxZ4itL_.js";import{_ as m}from"./main-1.0.41.js";import{r as s}from"./redux-1.0.41-DJjpZqD1.js";import{B as se,a as oe,b as re}from"./BuilderMenu-1.0.41-CI6mFW4W.js";import{T as _}from"./Tooltip-1.0.41-BQBkdKQ5.js";import{A as ae,T as ne,M as ie}from"./index-1.0.41-CpXj521P.js";import{u as le,a as ce}from"./hooks-1.0.41-sDnKeMy7.js";import{l,aQ as P,S as B,af as me,$ as O,ag as w,P as pe,a as N,s as ue,b as p,aR as de}from"./lib-1.0.41-DFdWuh_n.js";import{A as V}from"./AdminTheme-1.0.41-4tiUoVeb.js";import{B as E,S as f}from"./Spinner-1.0.41-fWZy8imI.js";import{s as ge}from"./ActionsExplorer-1.0.41-DSAyrNr3.js";import{e as u}from"./notistack-1.0.41-Bq-EKqc7.js";import{g as xe,j as fe}from"./index-1.0.41-DGYaemnA.js";import{B as A,C as je}from"./ConfirmDialog-1.0.41-NKESMhfW.js";import{g as he}from"./ActionsDml-1.0.41--r5h77NM.js";/* empty css                        */import{T as F}from"./Typography-1.0.41-BIN1Ddvh.js";import{I as b}from"./iconBase-1.0.41-BNQFQdHp.js";import{C as G,a as U}from"./CardContent-1.0.41-Cwtu331C.js";import{T as Se,a as H}from"./TabPanel-1.0.41-BJuUpIHA.js";import{E as _e}from"./ExplorerActionEnum-1.0.41-eclZgKpy.js";import{u as Ee}from"./useUiExplorerAction-1.0.41-CEC1ynh1.js";const Ae=()=>{const t=le(n=>n.manager.settings);return l.debug("managerSettings",t),t},be=s.lazy(()=>m(()=>import("./SettingsActions-1.0.41-CtNzqWYy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38]),import.meta.url)),Te=s.lazy(()=>m(()=>import("./SettingsTable-1.0.41-BlYHONjt.js"),__vite__mapDeps([39,1,2,3,17,13,14,5,6,7,8,15,11,10,40,30,41,42,23,24,25,32,43,44,36,31,45,46,18,12,16,28,29,33,47,48,49,4,50,51,52,53,54,55,56,57,58]),import.meta.url)),Ce=s.lazy(()=>m(()=>import("./SettingsColumn-1.0.41-Bi2g4gu6.js"),__vite__mapDeps([59,1,2,3,17,13,14,5,6,7,8,15,11,10,40,30,41,42,23,24,25,18,26,27,28,29,31,32,33,45,46,12,16,47,48,49,4,50,51,52,53,54,55,56,57,58]),import.meta.url)),De=s.lazy(()=>m(()=>import("./SettingsRestApi-1.0.41-BGJCtkPC.js"),__vite__mapDeps([60,1,2,3,17,13,14,5,6,7,8,15,11,10,22,40,30,41,42,18,32,25,34,35,36,23,24,43,44,31,61,27,28,29,62,38,63,26,45,46,12,16,33,47,48,49,4,50,51,52,53,54,55,56,57,64,58]),import.meta.url)),Me=s.lazy(()=>m(()=>import("./SettingsReset-1.0.41-CCIt-Bm5.js"),__vite__mapDeps([65,1,2,3,17,13,14,5,6,7,8,15,11,66,4,67,68,12,16,40,30,41,42,23,24,25]),import.meta.url)),ke=s.lazy(()=>m(()=>import("./ResizableDrawer-1.0.41-C0gZVvMH.js"),__vite__mapDeps([69,1,2,3,70,5,6,7,8,10,14,29,15,13,17,11,28]),import.meta.url)),ve=({dbs:t,tbl:n,typ:j})=>{var R,z;l.debug(t,n,j);const c=ce(),[$,q]=s.useState(P.getSelectors().selectManagerSettings(B.getState().manager));l.debug($);const[d,T]=s.useState(""),[C,K]=s.useState(!1),[D,Q]=s.useState({}),[M,g]=s.useState(!1),[W,k]=s.useState(!1);s.useEffect(()=>{C||X()},[t,n]);const X=()=>{he(t,n,!0,a=>{var o,I;const r=a==null?void 0:a.data;if(l.debug("response data",t,n,r),(o=r==null?void 0:r.access)!=null&&o.select&&Array.isArray(r.access.select)&&r.access.select.includes("POST")){const i={...r.settings};i.list_labels={...r.table_labels},i.form_labels={...r.form_labels},i.column_media={...r.wp_media},delete i.hyperlinks,delete i.ui,delete i.wp;const L={...r};Q(L),c(de({settings:i,metaData:L})),K(!0)}else{let i=p.contactSupport;(I=a==null?void 0:a.data)!=null&&I.message&&(i=a.data.message+" - check console for more information"),l.error(i),T(i)}},a=>{l.error("error",a),T(a??p.contactSupport)})};s.useEffect(()=>{d!==""&&(c(me({error:d})),c(O()),c(w()))},[d]);const Y=Ae(),J=((R=V)==null?void 0:R.palette.mode)===pe.LIGHT?(z=V)==null?void 0:z.palette.primary.main:"",v=a=>{c(ue({anchor:a}))},x=()=>{c(w()),c(O())},h=()=>{M?k(!0):x()},y=()=>{const a={...Y};let r=!1;ge(t,n,a,o=>{if(o!=null&&o.code&&(o==null?void 0:o.message)!==void 0)switch(o.code){case"ok":u(o.message,{variant:"success"});break;case"info":u(o.message,{variant:"info"});break;default:l.error(o),u(o.message??p.contactSupport,{variant:"error"}),r=!0}else l.error(o),u(p.contactSupport,{variant:"error"}),r=!0},o=>{l.error(o),u(o??p.contactSupport,{variant:"error"}),r=!0}),r||q(P.getSelectors().selectManagerSettings(B.getState().manager)),g(!1)},Z=()=>{M?(y(),setTimeout(()=>{x()},1e3)):x()},[S,ee]=s.useState(0),te=s.useMemo(()=>[{title:"Actions",icon:e.jsx(xe,{})},{title:"Settings",icon:e.jsx(fe,{})}],[]);return d!==""?null:e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs(ke,{closeDrawer:h,children:[e.jsxs(ae,{position:"static",elevation:4,sx:{borderRadius:0},children:[e.jsxs(ne,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(E,{sx:{flexGrow:1},children:[e.jsx(F,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(F,{sx:{fontSize:"10px",paddingLeft:"10px"},children:[t," - ",n]})]}),e.jsx(_,{title:"Dock to left",position:"bottom",children:e.jsx(b,{onClick:()=>{v(N.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(se,{})})}),e.jsx(_,{title:"Dock to right",position:"bottom",children:e.jsx(b,{onClick:()=>{v(N.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(oe,{})})}),e.jsx(_,{title:"Close",position:"bottom",children:e.jsx(b,{onClick:h,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(ie,{})})})]}),e.jsx(re,{menuItems:te,menuIndex:S,setMenu:ee})]}),e.jsx(G,{className:"pp-settings-container",children:e.jsx(U,{sx:{padding:0,margin:0},children:C?e.jsx(Se,{value:S,children:e.jsxs(E,{sx:{margin:0,padding:0,overflowX:"hidden",overflowY:"auto",height:"calc(100vh - 232px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(H,{value:0,children:e.jsx(s.Suspense,{fallback:e.jsx(f,{}),children:e.jsx(be,{dbs:t,tbl:n,typ:j,metaData:D})})}),e.jsx(H,{value:1,children:e.jsxs(s.Suspense,{fallback:e.jsx(f,{}),children:[e.jsx(Te,{dbs:t,tbl:n,setIsUpdated:g}),e.jsx(Ce,{dbs:t,tbl:n,setIsUpdated:g}),e.jsx(De,{dbs:t,tbl:n,typ:j,metaData:D,setIsUpdated:g}),e.jsx(Me,{dbs:t,tbl:n})]})})]})}):e.jsx(E,{sx:{padding:"30px"},children:e.jsx(f,{title:"Loading data..."})})})}),e.jsx(G,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:J},children:e.jsx(U,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:S===0?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"outlined",className:"footer_action_button_apply",onClick:y,children:"Apply"}),e.jsx(A,{variant:"outlined",className:"footer_action_button",onClick:Z,children:"OK"}),e.jsx(A,{variant:"outlined",className:"footer_action_button",onClick:h,children:"Cancel"})]})})})]})}),e.jsx(je,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:W,setOpen:k,onConfirm:()=>{x()}})]})},ye=()=>{const t=Ee();return e.jsx(e.Fragment,{children:t!==void 0&&t.action===_e.MANAGE&&e.jsx(ve,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},Ze=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{Ze as E,Ae as u};
