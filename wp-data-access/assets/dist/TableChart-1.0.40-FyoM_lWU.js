import{j as m}from"./cm-1.0.40-DO7MoydR.js";import{r as g}from"./redux-1.0.40-W_04YL6Z.js";import{P as je,b as V,a as ye}from"./index-1.0.40-5CXoWu3g.js";import{c as Y}from"./index-1.0.40-DmMQghWt.js";import{C as Se}from"./ChartTypeSelection-1.0.40-B42aMEJH.js";import{C as _e}from"./Chart-1.0.40-Bz4vBsVt.js";import{T as Re}from"./TableChartSelection-1.0.40-n_JlVA2M.js";import{a as we}from"./useChartSettings-1.0.40-CCxE4Zu8.js";import{c as C,g as he}from"./vendor-1.0.40-CN03Eozo.js";import"./lib-1.0.40-CJM-IO_o.js";import{a as Oe}from"./hooks-1.0.40-DoKijNI1.js";import{T as qe}from"./Tooltip-1.0.40-Czv1q8N-.js";import{I as Ce}from"./iconBase-1.0.40-CH6TO7hF.js";import{B as Z}from"./ConfirmDialog-1.0.40-DRjx8-xC.js";import{P as Ee}from"./Menu-1.0.40-BKp7UqHL.js";import{B as k}from"./Spinner-1.0.40-Bmn0_C4u.js";import"./index-1.0.40--1Cd81c-.js";import"./Typography-1.0.40-oRKYqE3b.js";import"./notistack-1.0.40-HUa4vT_u.js";import"./useEnhancedEffect-1.0.40-DvrM_gBo.js";import"./ChartTypes-1.0.40-DjqkFoVg.js";import"./index-1.0.40-DlucSO_j.js";import"./FormHelperText-1.0.40-D6buAdoc.js";import"./utils-1.0.40-iop7lDec.js";import"./useFormControl-1.0.40-BL8koKXQ.js";import"./TextField-1.0.40-CejEr0KU.js";import"./Select-1.0.40-Db-Xnyoo.js";import"./useControlled-1.0.40-B7yPDtn1.js";import"./createSvgIcon-1.0.40-DryBVjDb.js";import"./FormLabel-1.0.40-DLOepjQ0.js";import"./MenuItem-1.0.40-UKMJrtYZ.js";import"./ListItemIcon-1.0.40-B1zY5Zqz.js";import"./main-1.0.40.js";import"./loglevel-1.0.40-BZ7XahX3.js";import"./lodash-1.0.40-yZQKpWII.js";import"./moment-1.0.40-C5S46NFB.js";import"./lang-1.0.40-D4Y70Q_T.js";import"./useRemoveAppFromStore-1.0.40-DxUqDH6k.js";import"./useMetadata-1.0.40-DdsiIGYX.js";import"./useTableColumnOrder-1.0.40-SiEYxTEI.js";import"./Autocomplete-1.0.40-CcfYAr1c.js";import"./Close-1.0.40-DOQmTCBQ.js";import"./Popper-1.0.40-Jt4gcDMJ.js";import"./ThemeProvider-1.0.40-D9QtC9zH.js";import"./AdminTheme-1.0.40-B669Ow89.js";var I,ee;function H(){if(ee)return I;ee=1;function e(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}return I=e,I}var z,re;function ke(){if(re)return z;re=1;var e=typeof C=="object"&&C&&C.Object===Object&&C;return z=e,z}var P,te;function pe(){if(te)return P;te=1;var e=ke(),r=typeof self=="object"&&self&&self.Object===Object&&self,t=e||r||Function("return this")();return P=t,P}var B,ne;function Ie(){if(ne)return B;ne=1;var e=pe(),r=function(){return e.Date.now()};return B=r,B}var N,ie;function ze(){if(ie)return N;ie=1;var e=/\s/;function r(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}return N=r,N}var G,oe;function Pe(){if(oe)return G;oe=1;var e=ze(),r=/^\s+/;function t(n){return n&&n.slice(0,e(n)+1).replace(r,"")}return G=t,G}var W,ae;function ge(){if(ae)return W;ae=1;var e=pe(),r=e.Symbol;return W=r,W}var D,ue;function Be(){if(ue)return D;ue=1;var e=ge(),r=Object.prototype,t=r.hasOwnProperty,n=r.toString,a=e?e.toStringTag:void 0;function i(u){var c=t.call(u,a),s=u[a];try{u[a]=void 0;var o=!0}catch{}var f=n.call(u);return o&&(c?u[a]=s:delete u[a]),f}return D=i,D}var L,se;function Ne(){if(se)return L;se=1;var e=Object.prototype,r=e.toString;function t(n){return r.call(n)}return L=t,L}var A,ce;function Ge(){if(ce)return A;ce=1;var e=ge(),r=Be(),t=Ne(),n="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function u(c){return c==null?c===void 0?a:n:i&&i in Object(c)?r(c):t(c)}return A=u,A}var M,fe;function We(){if(fe)return M;fe=1;function e(r){return r!=null&&typeof r=="object"}return M=e,M}var F,de;function De(){if(de)return F;de=1;var e=Ge(),r=We(),t="[object Symbol]";function n(a){return typeof a=="symbol"||r(a)&&e(a)==t}return F=n,F}var U,le;function Le(){if(le)return U;le=1;var e=Pe(),r=H(),t=De(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function s(o){if(typeof o=="number")return o;if(t(o))return n;if(r(o)){var f=typeof o.valueOf=="function"?o.valueOf():o;o=r(f)?f+"":f}if(typeof o!="string")return o===0?o:+o;o=e(o);var b=i.test(o);return b||u.test(o)?c(o.slice(2),b?2:8):a.test(o)?n:+o}return U=s,U}var $,me;function xe(){if(me)return $;me=1;var e=H(),r=Ie(),t=Le(),n="Expected a function",a=Math.max,i=Math.min;function u(c,s,o){var f,b,j,h,d,T,S=0,R=!1,p=!1,y=!0;if(typeof c!="function")throw new TypeError(n);s=t(s)||0,e(o)&&(R=!!o.leading,p="maxWait"in o,j=p?a(t(o.maxWait)||0,s):j,y="trailing"in o?!!o.trailing:y);function v(l){var _=f,w=b;return f=b=void 0,S=l,h=c.apply(w,_),h}function x(l){return S=l,d=setTimeout(q,s),R?v(l):h}function O(l){var _=l-T,w=l-S,Q=s-_;return p?i(Q,j-w):Q}function J(l){var _=l-T,w=l-S;return T===void 0||_>=s||_<0||p&&w>=j}function q(){var l=r();if(J(l))return K(l);d=setTimeout(q,O(l))}function K(l){return d=void 0,y&&f?v(l):(f=b=void 0,h)}function ve(){d!==void 0&&clearTimeout(d),S=0,f=T=b=d=void 0}function Te(){return d===void 0?h:K(r())}function E(){var l=r(),_=J(l);if(f=arguments,b=this,T=l,_){if(d===void 0)return x(T);if(p)return clearTimeout(d),d=setTimeout(q,s),v(T)}return d===void 0&&(d=setTimeout(q,s)),h}return E.cancel=ve,E.flush=Te,E}return $=u,$}var Ae=xe();const Me=he(Ae);var X,be;function Fe(){if(be)return X;be=1;var e=xe(),r=H(),t="Expected a function";function n(a,i,u){var c=!0,s=!0;if(typeof a!="function")throw new TypeError(t);return r(u)&&(c="leading"in u?!!u.leading:c,s="trailing"in u?!!u.trailing:s),e(a,i,{leading:c,maxWait:i,trailing:s})}return X=n,X}var Ue=Fe();const $e=he(Ue),Xe=(e,r,t,n)=>{switch(r){case"debounce":return Me(e,t,n);case"throttle":return $e(e,t,n);default:return e}},He=e=>{const r=g.useRef(e);return g.useEffect(()=>{r.current=e}),g.useMemo(()=>(...t)=>{var n;return(n=r.current)===null||n===void 0?void 0:n.call(r,...t)},[])},Je=e=>{const[r,t]=g.useState((e==null?void 0:e.current)||null);return e&&setTimeout(()=>{e.current!==r&&t(e.current)},0),{refProxy:g.useMemo(()=>new Proxy(a=>{a!==r&&t(a)},{get(a,i){return i==="current"?r:a[i]},set(a,i,u){return i==="current"?t(u):a[i]=u,!0}}),[r]),refElement:r,setRefElement:t}},Ke=(e,r)=>r==="border-box"?{width:e.borderBoxSize[0].inlineSize,height:e.borderBoxSize[0].blockSize}:r==="content-box"?{width:e.contentBoxSize[0].inlineSize,height:e.contentBoxSize[0].blockSize}:{width:e.contentRect.width,height:e.contentRect.height};function Qe({skipOnMount:e=!1,refreshMode:r,refreshRate:t=1e3,refreshOptions:n,handleWidth:a=!0,handleHeight:i=!0,targetRef:u,observerOptions:c,onResize:s}={}){const o=g.useRef(e),f=He(s),[b,j]=g.useState({width:void 0,height:void 0}),{refProxy:h,refElement:d}=Je(u),{box:T}=c||{},S=g.useCallback(p=>{if(!a&&!i)return;if(o.current){o.current=!1;return}const y=(v,x)=>a&&v.width!==x.width||i&&v.height!==x.height;p.forEach(v=>{const x=Ke(v,T);j(O=>y(O,x)?(f==null||f({width:x.width,height:x.height,entry:v}),x):O)})},[a,i,o,T]),R=g.useCallback(Xe(S,r,t,n),[S,r,t,n]);return g.useEffect(()=>{let p;return d?(p=new window.ResizeObserver(R),p.observe(d,c)):(b.width||b.height)&&(f==null||f({width:null,height:null,entry:null}),j({width:void 0,height:void 0})),()=>{var y,v,x;(y=p==null?void 0:p.disconnect)===null||y===void 0||y.call(p),(x=(v=R).cancel)===null||x===void 0||x.call(v)}},[R,d]),Object.assign({ref:h},b)}const Ve=({appId:e,popupState:r})=>(Oe(),(n=>null)()),Fr=({appId:e,componentWidth:r,tableStore:t,metaData:n,appLanguage:a})=>{const i=we(e),[u,c]=g.useState("BarChart"),s=g.useRef(null),o=g.useCallback(()=>{s.current&&j(s.current.offsetWidth)},[s]),{width:f}=Qe({targetRef:s,onResize:o}),[b,j]=g.useState();return m.jsx(je,{variant:"popover",popupId:e,children:h=>{var d;return m.jsxs(m.Fragment,{children:[r<900?m.jsx(qe,{title:"Charts",children:m.jsx(Ce,{...V(h),children:m.jsx(Y,{})})}):m.jsx(Z,{variant:"contained",endIcon:m.jsx(Y,{}),...V(h),children:"CHARTS"}),m.jsx(Ee,{...ye(h),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","& > .MuiPaper-root":{resize:"horizontal",minWidth:"380px",width:b+"px"}},children:m.jsxs(k,{sx:{display:"grid",gap:"20px",padding:"20px"},ref:s,children:[m.jsx(Re,{appId:e,metaData:n,tableStore:t}),m.jsx(Se,{chartType:u,setChartType:c,chartTypes:(i==null?void 0:i.chartTypes)??[],isTableChart:!0}),m.jsxs(k,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem"},children:[m.jsx(k,{sx:{whiteSpace:"nowrap"},children:t.state.masterDetailConditions===void 0&&m.jsx(Ve,{appId:e,popupState:h})}),m.jsxs(Z,{variant:"contained",onClick:()=>{h.close()},children:[" ",a.back," "]})]}),((i==null?void 0:i.docked)==="undocked"||!0)&&((d=i==null?void 0:i.data)==null?void 0:d.length)>0&&(i==null?void 0:i.majorAxisColumn)!==""&&(i==null?void 0:i.minorAxisColumns.length)>0&&m.jsx(_e,{appId:e,isBuilderEnabled:!1,isToolbarEnabled:!1,chartWidth:f,isTableChart:!0})]})})]})}})};export{Fr as default};
