import{j as b}from"./cm-1.0.32-roxymF9V.js";import{r as h}from"./redux-1.0.32-BsgiH_bG.js";import{P as yr,b as V,a as Cr}from"./index-1.0.32-Iej93Alk.js";import{c as Y,B as Z}from"./cjs-1.0.32-AqZgyPIn.js";import{a as pr}from"./RestApi-1.0.32-Bp_RRidr.js";import{ch as _r,l as Rr,aa as Sr,ay as wr}from"./lib-1.0.32-CBsDffd2.js";import{C as Or}from"./ChartTypeSelection-1.0.32-DNM7HAM8.js";import{C as qr}from"./Chart-1.0.32-D0aR_QQf.js";import{T as Er}from"./TableChartSelection-1.0.32-DaiwqN8X.js";import{e as kr}from"./useTheme-1.0.32-Boox29T5.js";import{c as q,g as hr}from"./vendor-1.0.32-BmpNFhoq.js";import{T as Ir}from"./Tooltip-1.0.32-BFRxm1kH.js";import{I as zr}from"./iconBase-1.0.32-inVKjZEJ.js";import{P as Ar}from"./Menu-1.0.32-CRF2Elfu.js";import{B as k}from"./Spinner-1.0.32-D1QL5ry3.js";import"./index-1.0.32-6Cfvmv3-.js";import"./Typography-1.0.32-D9d-UzA0.js";import"./notistack-1.0.32-N2grKTUm.js";import"./loglevel-1.0.32-BZ7XahX3.js";import"./lodash-1.0.32-B7VmFneh.js";import"./moment-1.0.32-C5S46NFB.js";import"./ChartTypes-1.0.32-DrYtp9hR.js";import"./index-1.0.32-wSDMfVDG.js";import"./FormHelperText-1.0.32-BG3xt4JA.js";import"./useFormControl-1.0.32-Tf9RtQ-m.js";import"./TextField-1.0.32-EUJpMVir.js";import"./FormLabel-1.0.32-agP5qBoD.js";import"./useControlled-1.0.32-fDn_qfrW.js";import"./createSvgIcon-1.0.32-DGmABpxr.js";import"./MenuItem-1.0.32-Bc1CXi88.js";import"./ListItemIcon-1.0.32-CPQjWjIH.js";import"./main-1.0.32.js";import"./useTableColumnOrder-1.0.32-Q496z8_E.js";import"./index.esm-1.0.32-BcBy0Voo.js";import"./TableContainer-1.0.32-CcQeMHoT.js";import"./AdminTheme-1.0.32-WcjuTcVF.js";import"./tanstack-1.0.32-hjLg6WMC.js";import"./FallbackSpinner-1.0.32-kTXSQeKF.js";import"./ActionsSettings-1.0.32-u1MS6Fmu.js";import"./TargetEnum-1.0.32-DPFnTxiX.js";import"./ConfirmDialog-1.0.32-A4KvBqFE.js";import"./DialogContent-1.0.32-B0aW5NMk.js";import"./ScopeEnum-1.0.32-B4DDvIDj.js";import"./index-1.0.32-D1JAhTpk.js";import"./TabPanel-1.0.32-DFUvt78C.js";import"./useTableUpdater-1.0.32-BssjPM3j.js";import"./settings-1.0.32-OrNy0l2i.js";import"./Autocomplete-1.0.32-CC-cYb5n.js";import"./Close-1.0.32-BV_W41ov.js";import"./Popper-1.0.32-Dr5x4zRa.js";import"./index-1.0.32-D6IhVoXv.js";var I,rr;function H(){if(rr)return I;rr=1;function r(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}return I=r,I}var z,er;function Pr(){if(er)return z;er=1;var r=typeof q=="object"&&q&&q.Object===Object&&q;return z=r,z}var A,tr;function vr(){if(tr)return A;tr=1;var r=Pr(),e=typeof self=="object"&&self&&self.Object===Object&&self,i=r||e||Function("return this")();return A=i,A}var P,ir;function Br(){if(ir)return P;ir=1;var r=vr(),e=function(){return r.Date.now()};return P=e,P}var B,nr;function Nr(){if(nr)return B;nr=1;var r=/\s/;function e(i){for(var n=i.length;n--&&r.test(i.charAt(n)););return n}return B=e,B}var N,or;function Gr(){if(or)return N;or=1;var r=Nr(),e=/^\s+/;function i(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return N=i,N}var G,ar;function gr(){if(ar)return G;ar=1;var r=vr(),e=r.Symbol;return G=e,G}var W,ur;function Wr(){if(ur)return W;ur=1;var r=gr(),e=Object.prototype,i=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function c(u){var t=i.call(u,a),l=u[a];try{u[a]=void 0;var o=!0}catch{}var s=n.call(u);return o&&(t?u[a]=l:delete u[a]),s}return W=c,W}var D,sr;function Dr(){if(sr)return D;sr=1;var r=Object.prototype,e=r.toString;function i(n){return e.call(n)}return D=i,D}var L,cr;function Lr(){if(cr)return L;cr=1;var r=gr(),e=Wr(),i=Dr(),n="[object Null]",a="[object Undefined]",c=r?r.toStringTag:void 0;function u(t){return t==null?t===void 0?a:n:c&&c in Object(t)?e(t):i(t)}return L=u,L}var M,lr;function Mr(){if(lr)return M;lr=1;function r(e){return e!=null&&typeof e=="object"}return M=r,M}var F,fr;function Fr(){if(fr)return F;fr=1;var r=Lr(),e=Mr(),i="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==i}return F=n,F}var U,dr;function Ur(){if(dr)return U;dr=1;var r=Gr(),e=H(),i=Fr(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,t=parseInt;function l(o){if(typeof o=="number")return o;if(i(o))return n;if(e(o)){var s=typeof o.valueOf=="function"?o.valueOf():o;o=e(s)?s+"":s}if(typeof o!="string")return o===0?o:+o;o=r(o);var p=c.test(o);return p||u.test(o)?t(o.slice(2),p?2:8):a.test(o)?n:+o}return U=l,U}var $,mr;function xr(){if(mr)return $;mr=1;var r=H(),e=Br(),i=Ur(),n="Expected a function",a=Math.max,c=Math.min;function u(t,l,o){var s,p,C,y,d,v,m=0,T=!1,g=!1,_=!0;if(typeof t!="function")throw new TypeError(n);l=i(l)||0,r(o)&&(T=!!o.leading,g="maxWait"in o,C=g?a(i(o.maxWait)||0,l):C,_="trailing"in o?!!o.trailing:_);function j(f){var R=s,S=p;return s=p=void 0,m=f,y=t.apply(S,R),y}function x(f){return m=f,d=setTimeout(O,l),T?j(f):y}function w(f){var R=f-v,S=f-m,Q=l-R;return g?c(Q,C-S):Q}function J(f){var R=f-v,S=f-m;return v===void 0||R>=l||R<0||g&&S>=C}function O(){var f=e();if(J(f))return K(f);d=setTimeout(O,w(f))}function K(f){return d=void 0,_&&s?j(f):(s=p=void 0,y)}function Tr(){d!==void 0&&clearTimeout(d),m=0,s=v=p=d=void 0}function jr(){return d===void 0?y:K(e())}function E(){var f=e(),R=J(f);if(s=arguments,p=this,v=f,R){if(d===void 0)return x(v);if(g)return clearTimeout(d),d=setTimeout(O,l),j(v)}return d===void 0&&(d=setTimeout(O,l)),y}return E.cancel=Tr,E.flush=jr,E}return $=u,$}var $r=xr();const Xr=hr($r);var X,br;function Hr(){if(br)return X;br=1;var r=xr(),e=H(),i="Expected a function";function n(a,c,u){var t=!0,l=!0;if(typeof a!="function")throw new TypeError(i);return e(u)&&(t="leading"in u?!!u.leading:t,l="trailing"in u?!!u.trailing:l),r(a,c,{leading:t,maxWait:c,trailing:l})}return X=n,X}var Jr=Hr();const Kr=hr(Jr),Qr=(r,e,i,n)=>{switch(e){case"debounce":return Xr(r,i,n);case"throttle":return Kr(r,i,n);default:return r}},Vr=r=>{const e=h.useRef(r);return h.useEffect(()=>{e.current=r}),h.useMemo(()=>(...i)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...i)},[])},Yr=r=>{const[e,i]=h.useState((r==null?void 0:r.current)||null);return r&&setTimeout(()=>{r.current!==e&&i(r.current)},0),{refProxy:h.useMemo(()=>new Proxy(a=>{a!==e&&i(a)},{get(a,c){return c==="current"?e:a[c]},set(a,c,u){return c==="current"?i(u):a[c]=u,!0}}),[e]),refElement:e,setRefElement:i}},Zr=(r,e)=>e==="border-box"?{width:r.borderBoxSize[0].inlineSize,height:r.borderBoxSize[0].blockSize}:e==="content-box"?{width:r.contentBoxSize[0].inlineSize,height:r.contentBoxSize[0].blockSize}:{width:r.contentRect.width,height:r.contentRect.height};function re({skipOnMount:r=!1,refreshMode:e,refreshRate:i=1e3,refreshOptions:n,handleWidth:a=!0,handleHeight:c=!0,targetRef:u,observerOptions:t,onResize:l}={}){const o=h.useRef(r),s=Vr(l),[p,C]=h.useState({width:void 0,height:void 0}),{refProxy:y,refElement:d}=Yr(u),{box:v}=t||{},m=h.useCallback(g=>{if(!a&&!c)return;if(o.current){o.current=!1;return}const _=(j,x)=>a&&j.width!==x.width||c&&j.height!==x.height;g.forEach(j=>{const x=Zr(j,v);C(w=>_(w,x)?(s==null||s({width:x.width,height:x.height,entry:j}),x):w)})},[a,c,o,v]),T=h.useCallback(Qr(m,e,i,n),[m,e,i,n]);return h.useEffect(()=>{let g;return d?(g=new window.ResizeObserver(T),g.observe(d,t)):(p.width||p.height)&&(s==null||s({width:null,height:null,entry:null}),C({width:void 0,height:void 0})),()=>{var _,j,x;(_=g==null?void 0:g.disconnect)===null||_===void 0||_.call(g),(x=(j=T).cancel)===null||x===void 0||x.call(j)}},[T,d]),Object.assign({ref:y},p)}const ee=({appId:r,popupState:e})=>(pr(),(n=>null)()),Ze=({appId:r,componentWidth:e,table:i,tableStore:n,metaData:a,appLanguage:c})=>{const u=pr(),t=kr(r),[l,o]=h.useState("BarChart");h.useEffect(()=>{s.current!==null&&v()},[l]);const s=h.useRef(null),p=h.useCallback(()=>{s.current&&d(s.current.offsetWidth)},[s]),{width:C}=re({targetRef:s,onResize:p}),[y,d]=h.useState(),v=()=>{var T;const m=_r(i,t.majorAxisColumn,t.minorAxisColumns,t.grouped,n.columns,a);Rr.debug(m),((T=t==null?void 0:t.data)==null?void 0:T.length)>0?u(Sr({appId:r,property:{majorAxisColumn:t.majorAxisColumn,minorAxisColumns:t.minorAxisColumns,data:m,chartType:l,grouped:t.grouped}})):u(wr({appId:r,chartState:{majorAxisColumn:t.majorAxisColumn,minorAxisColumns:t.minorAxisColumns,data:m,chartType:l,grouped:t.grouped}}))};return b.jsx(yr,{variant:"popover",popupId:r,children:m=>{var T;return b.jsxs(b.Fragment,{children:[e<900?b.jsx(Ir,{title:"Charts",children:b.jsx(zr,{...V(m),onClickCapture:()=>{t!==void 0&&v()},children:b.jsx(Y,{})})}):b.jsx(Z,{variant:"contained",endIcon:b.jsx(Y,{}),...V(m),onClickCapture:()=>{t!==void 0&&v()},children:"CHARTS"}),b.jsx(Ar,{...Cr(m),anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{boxShadow:"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)","& > .MuiPaper-root":{resize:"horizontal",minWidth:"380px",width:y+"px"}},children:b.jsxs(k,{sx:{display:"grid",gap:"20px",padding:"20px"},ref:s,children:[b.jsx(Er,{appId:r,metaData:a,tableStore:n}),b.jsx(Or,{chartType:l,setChartType:o,chartTypes:(t==null?void 0:t.chartTypes)??[],isTableChart:!0}),b.jsxs(k,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"0.5rem"},children:[b.jsx(k,{sx:{whiteSpace:"nowrap"},children:n.state.masterDetailConditions===void 0&&b.jsx(ee,{appId:r,popupState:m})}),b.jsxs(Z,{variant:"contained",onClick:()=>{m.close()},children:[" ",c.back," "]})]}),(t==null?void 0:t.docked)==="undocked"&&((T=t==null?void 0:t.data)==null?void 0:T.length)>0&&(t==null?void 0:t.majorAxisColumn)!==""&&(t==null?void 0:t.minorAxisColumns.length)>0&&b.jsx(qr,{appId:r,isBuilderEnabled:!1,isToolbarEnabled:!1,chartWidth:C,isTableChart:!0})]})})]})}})};export{Ze as default};
